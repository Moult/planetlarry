<feed xmlns:ns0="http://purl.org/syndication/thread/1.0" xmlns="http://www.w3.org/2005/Atom"><title>Planet Larry</title><link href="https://planetlarry.org" /><updated>2026-02-03T02:46:05</updated><author><name>Larry the Cow</name></author><id>https://planetlarry.org/</id><entry>
        <title>2026-02-02T13</title>
        <updated>2026-02-02T13</updated>
        <summary>All RSS feeds now include content inline instead of just a summary.</summary>
    </entry>
    <entry>
        <title>2026-02-02T12</title>
        <updated>2026-02-02T12</updated>
        <summary>The fediverse has sparked debate on social network design sans the unhealthier aspects: likes, resharing with comments, and follower counts. I've decided a self-hosted static site and RSS feed is all that is needed. I.e., if you're reading this, I actually have no idea.</summary>
    </entry>
    <entry>
        <title>2026-02-01</title>
        <updated>2026-02-01</updated>
        <summary>I have begun a microblog!</summary>
    </entry>
    <entry>
        <title>Pi minima</title>
        <link href="https://thinkmoult.com/pi-minima.html" />
        <id>https://thinkmoult.com/pi-minima.html</id>
        <updated>2026-01-12</updated>
        <summary>The value of pi depends on the coordinate system used. Of all possible values of pi, our familiar Euclidean geometry represents a minimum.</summary>
        <content type="html">

&lt;p&gt;The Pythagorean theorem states that &lt;code&gt;a^2 + b^2 = c^2&lt;/code&gt;. But what if we generalise this formula to &lt;code&gt;a^n + b^n = c^n&lt;/code&gt;? By changing &lt;code&gt;n&lt;/code&gt; we can describe different, non-Euclidean spaces. A circle is defined as a series of points equidistant from its center, so the formula of a unit circle is &lt;code&gt;x^2 + y^2 = 1&lt;/code&gt;, and in case you forgot what a circle looks like, it looks like this:&lt;/p&gt;
&lt;p&gt;But if we live in a world where &lt;code&gt;n != 2&lt;/code&gt;, what does a circle look like? here's &lt;code&gt;n = 1&lt;/code&gt;.&lt;/p&gt;
        </content>
    </entry>
    <entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">After using Gentoo Linux and KDE for 15 years I have switched to Lubuntu (LXQt)</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2025/08/18/after-using-gentoo-linux-and-kde-for-15-years-i-have-switched-to-lubuntu-lxqt/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6727</id>
		<updated>2025-09-29T16:19:06Z</updated>
		<published>2025-08-18T15:44:20Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Android" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Desktops &amp; Window Managers" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="GeckoLinux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Gentoo Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Hardware" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Lubuntu Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="desktop environments" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="KDE" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="LXQt" />
		<summary type="html">The demise of my laptops Recently both my laptops &amp;#8211; a ten-year-old 14&amp;#8243; Clevo W230SS running the stable version of Gentoo Linux, and a fifteen-year-old 15.6&amp;#8243; Compal NBLB2 running the testing version of Gentoo Linux &amp;#8211; died. The Clevo laptop was my main machine. They had been heavily used in succession for work and personal [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2025/08/18/after-using-gentoo-linux-and-kde-for-15-years-i-have-switched-to-lubuntu-lxqt/#comments" ns0:count="5" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2025/08/18/after-using-gentoo-linux-and-kde-for-15-years-i-have-switched-to-lubuntu-lxqt/feed/atom/" ns0:count="5" />
			<total>5</total>
			</entry>
		<entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Resurrecting my legacy ASRock ION330HT nettop</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2025/09/04/resurrecting-my-legacy-asrock-ion330ht-nettop/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6747</id>
		<updated>2025-09-04T14:59:43Z</updated>
		<published>2025-09-04T14:51:02Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Hardware" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Lubuntu Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="ASRock" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="desktop environments" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="ION330HT" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="nettop" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="SATA" />
		<summary type="html">A couple of weeks after my previous post regarding the demise of my two legacy laptops, my legacy ASRock ION330HT nettop failed to boot. It seems bad luck does come in threes. In that post I described how I had connected the nettop&amp;#8217;s eSATA port to each of the 2.5&amp;#8243; HDDs salvaged from my two [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2025/09/04/resurrecting-my-legacy-asrock-ion330ht-nettop/#comments" ns0:count="0" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2025/09/04/resurrecting-my-legacy-asrock-ion330ht-nettop/feed/atom/" ns0:count="0" />
			<total>0</total>
			</entry>
		<entry>
        <title>Threadbare</title>
        <link href="https://thinkmoult.com/threadbare-frugal-php-forum.html" />
        <id>https://thinkmoult.com/threadbare-frugal-php-forum.html</id>
        <updated>2025-04-28</updated>
        <summary>A frugal online PHP forum script which works completely without Javascript.</summary>
        <content type="html">

&lt;p&gt;Threadbare is a &lt;a href="https://idlewords.com/talks/website_obesity.htm"&gt;frugal&lt;/a&gt; PHP + SQLite based forum.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A screenshot of the Threadbare homepage" src="https://thinkmoult.com/assets/threadbare-html.png"&gt;&lt;/p&gt;
&lt;p&gt;Threadbare is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Free software (AGPL-3.0-or-later)&lt;/li&gt;
&lt;li&gt;A single PHP (i.e. easy to host) file about a thousand lines long with zero boilerplate or design patterns.&lt;/li&gt;
&lt;li&gt;Uses SQLite. Unless you have a thousand new posts a day, you're not going to notice.&lt;/li&gt;
&lt;li&gt;100% works without &lt;a href="https://tonsky.me/blog/js-bloat/"&gt;JavaScript&lt;/a&gt;. Conservatively optionally enhanced with up to 70KB (before gzip) on the heaviest page.&lt;/li&gt;
&lt;li&gt;Very semantic HTML. Best viewed in &lt;a href="https://thinkmoult.com/using-elinks-browse-web.html"&gt;elinks&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Heaviest page load in 25 milliseconds. 2ms if cached. Basically like a static website.&lt;/li&gt;
&lt;li&gt;Opinionated. There are no settings.&lt;/li&gt;
&lt;li&gt;Relies on SendGrid for email and hCaptcha / Akismet for bots.&lt;/li&gt;
&lt;li&gt;Secure. I think. I hope. Let me know if it isn't.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Threadbare is not:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It isn't a fully featured forum. If you're looking for plugins, themes, and a hundred dials, this isn't it.&lt;/li&gt;
&lt;li&gt;No logging and community metrics.&lt;/li&gt;
&lt;li&gt;Non-hierarchical. It's just threads and posts. No categories or subcategories.&lt;/li&gt;
&lt;li&gt;No private messages, profiles, or gamification. Take a deep breath. Enjoy the open-air prose.&lt;/li&gt;
&lt;li&gt;Not tested. Let me know if you find any issues.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Threads! Posts! Add, edit, delete.&lt;/li&gt;
&lt;li&gt;Kudos +1 or -1 on posts.&lt;/li&gt;
&lt;li&gt;Coloured automatic avatar without images (unless you really want 25 extra HTTP requests to Gravatar on the homepage with leaked email hashes, eh?).&lt;/li&gt;
&lt;li&gt;Decoupled UI with mustache. Have whatever theme you want I guess?&lt;/li&gt;
&lt;li&gt;File uploads.&lt;/li&gt;
&lt;li&gt;Live post preview.&lt;/li&gt;
&lt;li&gt;Auto embed video links. Lazy load images.&lt;/li&gt;
&lt;li&gt;Markdown formatting in posts.&lt;/li&gt;
&lt;li&gt;Email notifications on new replies.&lt;/li&gt;
&lt;li&gt;User mentions with tab autocomplete and email notifications.&lt;/li&gt;
&lt;li&gt;Login, sign up, reset password, validation emails.&lt;/li&gt;
&lt;li&gt;Captcha and Akismet.&lt;/li&gt;
&lt;li&gt;Admins can edit / delete all posts and bypass rate limits. Admins can also move posts to other threads or split into a new thread. Trusted users bypass spam filters.&lt;/li&gt;
&lt;li&gt;Aggressive caching for guests (using APCu cache).&lt;/li&gt;
&lt;li&gt;Pagination.&lt;/li&gt;
&lt;li&gt;Last read stats, views, last reply.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Brutalist web design&lt;/h2&gt;
&lt;p&gt;Let's take a brief foray into philosophy.&lt;/p&gt;
&lt;p&gt;Brutalism is a design ideology that focuses on the honesty of materiality. If raw concrete, ugly buildings, and harsh environments come to mind, let me assure you that original meaning of Brutalism is separate to minimalism, or lack of elegance and beauty.&lt;/p&gt;
&lt;p&gt;Honesty of materiality implies that mediums are used appropriately based on its function. For web design, this means that HTML is used for document semantics, CSS is used for styling, and JS is used for interactivity enhancements. This is not new. We have well established concepts like progressive enhancement and semantic HTML. But there is another medium that is slowly being forgotten in the app-ification of the internet: text. Text should be used for content.&lt;/p&gt;
&lt;p&gt;Threadbare was designed for text. Text is designed to be read.&lt;/p&gt;
&lt;h2&gt;A brief exploration in readability-first design&lt;/h2&gt;
&lt;p&gt;I thought it'd be fun to see how readable popular forum systems look like.&lt;/p&gt;
&lt;p&gt;I help host the Open Source Architecture Community forums, and this used to be using software known as Vanilla Forums. Vanilla is open source by legality, but corporate managed. This isn't a particularly sustainable combination, and the day came when &lt;a href="https://open.vanillaforums.com/discussion/39620/higher-logic-has-terminated-open-source-vanilla"&gt;open source Vanilla forums stopped being maintained&lt;/a&gt;. This begs for further reflection on how free software is more than a license, but that isn't today's topic.&lt;/p&gt;
&lt;p&gt;I like progressively enhanced websites that work on text-only command line browsers. This is a rather niche requirement but I find that there is a strong correlation between websites that focus on content and their usability in text-only environments. When websites keep on adding more knobs and dials it stops becoming content and tips towards the "app" end of the scale, and it shows -- when you browse it on elinks you see all sorts of garbage in the way to the point that the website completely breaks.&lt;/p&gt;
&lt;p&gt;Let's see what this looks like. Here's what Vanilla forums looks like if you haven't logged in yet:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Browsing vanilla forums as a guest with a lot of boilerplate" src="https://thinkmoult.com/assets/vanilla-guest.png"&gt;&lt;/p&gt;
&lt;p&gt;There's a concept in design known as "above the fold" (think back to a folded newspaper) where key content should be displayed and presented first. Notice how 50% of my page is just boilerplate before I get to the first header (in green). Then it's more fluff until I finally see the first thread link about 80% down. I see 2.5 headers before I run out of screen space. And if you log in, it's even worse:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Vanilla forums as a logged in user with a page full of boilerplate" src="https://thinkmoult.com/assets/vanilla-user.png"&gt;&lt;/p&gt;
&lt;p&gt;When logged in, the entire first page is skippable boilerplate. Notice how content is also duplicated (you see notifications and edit links twice!). The page has clearly been designed by someone writing HTML to serve the JavaScript, as opposed to vice versa. When you finally scroll down to see the discussions as a logged in user, this is what you see:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Browsing discussions on Vanilla with many lines of junk" src="https://thinkmoult.com/assets/vanilla-discussions.png"&gt;&lt;/p&gt;
&lt;p&gt;Doesn't look great, does it? Here's what a post looks like:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Viewing posts" src="https://thinkmoult.com/assets/vanilla-posts.png"&gt;&lt;/p&gt;
&lt;p&gt;It's a bit better, but the formatting is still overall poor and pretty unreadable due to bad HTML. The reply form is a complete mess due to lack of progressive enhancement and file uploads are completely broken.&lt;/p&gt;
&lt;p&gt;Here's what Threadbare looks like, designed from first principles with only semantic content, no more, no less. There isn't a single wrapper or container div or flow control element.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Threadbare homepage showing discussions" src="https://thinkmoult.com/assets/threadbare-homepage.png"&gt;&lt;/p&gt;
&lt;p&gt;The first thing you see is the header. The navigation and search is concise. You can see a whopping 20 thread titles with 2 lines per thread. Threads are just an ordered list of links. Here's what it looks like to read posts:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Threadbare showing posts in a thread as a clean ordered list" src="https://thinkmoult.com/assets/threadbare-posts.png"&gt;&lt;/p&gt;
&lt;p&gt;What about PHPBB? The grandfather of forums still going strong? Well... it "depends". Here's what PHPBB looks like on the &lt;a href="https://forums.gentoo.org/"&gt;Gentoo Forums&lt;/a&gt;. Look at that 1990's tabular layout! It's not semantic, but tables do the job in visual layout. The content is ... well, highly relevant and well designed. It's fantastic!&lt;/p&gt;
&lt;p&gt;&lt;img alt="PHPBB as used in the Gentoo Forums showing tabular layouts" src="https://thinkmoult.com/assets/phpbb-gentoo.png"&gt;&lt;/p&gt;
&lt;p&gt;Modern PHPBB has taken one step forward, two steps back. They've foregone tables for more semantic tags (i.e. lists) ... but does increased semantic tags mean greater plaintext readability? Here's the &lt;a href="https://forum.freecad.org"&gt;FreeCAD Forum&lt;/a&gt; who has kept up with the times of PHPBB. It's a list of threads and makes liberal use of &lt;code&gt;dl&lt;/code&gt;, &lt;code&gt;time&lt;/code&gt;, and as was the style at the time, eschews tables in favour of &lt;code&gt;divs&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="PHPBB as used in the FreeCAD forums showing list layouts" src="https://thinkmoult.com/assets/phpbb-freecad.png"&gt;&lt;/p&gt;
&lt;p&gt;Notice the duplication of data (last post, time, total replies are shown twice). All the effort in semantic principles are for naught because the designer has designed for JavaScript. Is &lt;code&gt;dl&lt;/code&gt; really the most appropriate thing to use for the list of stats for each thread? I don't think so, and it shows in the lack of readability.&lt;/p&gt;
&lt;p&gt;It's probably worth reflecting that LLMs are now causing people to reintroduce text-centric markdown views of their webpage for AIs to scrape, but that's also a topic for another day.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Software I like</title>
        <link href="https://thinkmoult.com/software.html" />
        <id>https://thinkmoult.com/software.html</id>
        <updated>2024-12-20</updated>
        <summary>A list of software I recommend.</summary>
        <content type="html">

&lt;p&gt;You may also like command line applications that stand the test of time,
operating on standardised protocols and schemas, in contrast to UI-centric web
applications, which tend towards bloat, quick obsolescence, and black box
proprietary backends.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Gentoo&lt;/strong&gt;: a "build-it-yourself" Linux operating system.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ratpoison&lt;/strong&gt;: a tiling-based "graphical" user interface&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;xterm&lt;/strong&gt;: I spend most of my time in the terminal&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;elinks&lt;/strong&gt;: a text only web browser. I use this as my primary browser until websites break. It also browses Gemini.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Blender&lt;/strong&gt;: I work heavily with analysing 3D geometry and BIM data.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Krita&lt;/strong&gt;: for any 2D graphics work&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Inkscape&lt;/strong&gt;: for vector graphics work&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LaTeX&lt;/strong&gt;: write documents&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;vim&lt;/strong&gt;: a text editor that will change your life&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;mutt&lt;/strong&gt;: a local email client&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;newsboat&lt;/strong&gt;: RSS feed reader&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ledger&lt;/strong&gt;: financial accounting and budgeting&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;weechat&lt;/strong&gt;: connect to online chatrooms on IRC&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;mc&lt;/strong&gt; (Midnight Commander): a two-panel file browser that has completely replaced the need for a graphical file explorer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;pass&lt;/strong&gt;: password manager using Git&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;scrot&lt;/strong&gt;: take screenshots&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ncdu&lt;/strong&gt;: a hierarchical view of filespace usage to help keep systems lean&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nethack&lt;/strong&gt;: the greatest game you will ever play&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Radiance&lt;/strong&gt;: photometrically validated light simulation and rendering&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lilypond&lt;/strong&gt;: like LaTeX, but for scoring music&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;feh&lt;/strong&gt;: image viewer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;geeqie&lt;/strong&gt;: multiple image viewer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;mpd&lt;/strong&gt; with &lt;strong&gt;ncmpcpp&lt;/strong&gt;: music player&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;mupdf&lt;/strong&gt;: open PDFs&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;calcurse&lt;/strong&gt;: calendar&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;mplayer&lt;/strong&gt;: watch videos&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;git&lt;/strong&gt; with &lt;strong&gt;lazygit&lt;/strong&gt;: version control&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rsync&lt;/strong&gt; (with &lt;a href="https://rsync.net"&gt;rsync.net&lt;/a&gt;): sync files from A to B. Used for backups. This is not a sponsored link. They're just that good.&lt;/li&gt;
&lt;/ul&gt;
        </content>
    </entry>
    <entry>
        <title>pyttyplay: a NetHack ttyrec player in Python</title>
        <link href="https://thinkmoult.com/pyttyplay-nethack-player.html" />
        <id>https://thinkmoult.com/pyttyplay-nethack-player.html</id>
        <updated>2024-12-10</updated>
        <summary>A ttyrec player written in Python, tailored for playing back NetHack recordings.</summary>
        <content type="html">

&lt;p&gt;If you want to record activity in a terminal, you can store it in a &lt;code&gt;.ttyrec&lt;/code&gt;
format. This is much more efficient than a video, and captures exactly all of
the characters and escape events occuring in the terminal. When playing it
back, it relies on the ability of your own terminal to recreate the experience.&lt;/p&gt;
&lt;p&gt;ttyrec is commonly used to record NetHack games, which may span many hours or
days of recording. A more modern alternative is
&lt;a href="https://docs.asciinema.org/manual/asciicast/v2/#asciicast-v2"&gt;asciicast&lt;/a&gt;, used
by asciinema, which although it contains more information, is extremely
inefficient due to the storage of everything as UTF-8 encoded JSON strings.
ttyrec by itself is very spartan, including nothing but the binary raw terminal
characters interspersed with headers denoting the timestamp. Notably missing
are things like terminal size, full recording duration, encoding, custom user
colourschemes, etc.&lt;/p&gt;
&lt;p&gt;There are a number of &lt;a href="https://nethackwiki.com/wiki/Ttyrec"&gt;existing ttyrec
players&lt;/a&gt; out there, but none seem to have
all the features I'm looking for, so I wrote another one. Check out the &lt;a href="https://github.com/Moult/pyttyplay"&gt;Github
pyttyplay repository&lt;/a&gt; to download and run.&lt;/p&gt;
&lt;p&gt;Here's what it looks like in action:&lt;/p&gt;
&lt;p&gt;&lt;img alt="pyttyplay playing a ttyrec of a NetHack game by elenmirie" src="https://thinkmoult.com/assets/pyttyplay-nethack1.png"&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Written in Python. Apparently there's not much out there.&lt;/li&gt;
&lt;li&gt;Is a very small script. Is something broken and you know Python? Look inside.&lt;/li&gt;
&lt;li&gt;Runs in a terminal. While there's a time and a place for a GUI ttyrec player,
  tiles player (such as customised for DCSS), or web player, it's also really
  nice to have one in a local terminal.&lt;/li&gt;
&lt;li&gt;Can load from local files or fetch from URLs&lt;/li&gt;
&lt;li&gt;Can load gzipped ttyrec files&lt;/li&gt;
&lt;li&gt;Correctly handles some escape codes such as "repeat last character" and DEC
  graphics mode toggling that other players don't support. This can result in
  broken output in other viewers.&lt;/li&gt;
&lt;li&gt;Allows play and pause and shows a graphical timeline of progress.&lt;/li&gt;
&lt;li&gt;Shows stats such as time of recording, elapsed time, and current frame.&lt;/li&gt;
&lt;li&gt;Allows stepping forward and backward frame-by-frame, jump multiple frames, or
  jump to beginning / end.&lt;/li&gt;
&lt;li&gt;Just to repeat: yes, rewinding is supported!&lt;/li&gt;
&lt;li&gt;Allows toggling of speed multipliers.&lt;/li&gt;
&lt;li&gt;Completely keyboard driven with vi-key bindings.&lt;/li&gt;
&lt;li&gt;Toggle capping of frame durations. Did the person you're watching step out
  for lunch for an hour? Durations are capped at 1 second.&lt;/li&gt;
&lt;li&gt;Allows frame merging by duration. If each frame includes partially written
  characters, durations shorter than X can be merged into a single frame.&lt;/li&gt;
&lt;li&gt;Can switch between seeking by frame versus seeking by time.&lt;/li&gt;
&lt;li&gt;Lazy-loading and instant playback. Don't wait for the entire ttyrec to load
  before playing - start playing immediately and it'll continue to load in the
  background.&lt;/li&gt;
&lt;li&gt;Allows customisation of terminal size. It automatically fills your current
  terminal by default, or you can manually specify a size. Smaller sizes will
  crop.&lt;/li&gt;
&lt;li&gt;Can toggle display of the UI. Want a pure ttyplay experience? You got it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="pyttyplay playing a ttyrec of a NetHack game by disperse showing DEC graphics" src="https://thinkmoult.com/assets/pyttyplay-nethack2.png"&gt;&lt;/p&gt;
&lt;p&gt;If you want to try it out on some ttyrecs, you can download NetHack recordings
from the &lt;a href="https://www.hardfought.org/nethack/ttyrecs/"&gt;HardFought ttyrec
server&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If there are bugs, that's probably because it's something to do with a VT100
command that I don't fully understand. If you want to solve it, you might want
to investigate this &lt;a href="https://espterm.github.io/docs/VT100%20escape%20codes.html"&gt;list of VT100 escape
codes&lt;/a&gt;, or &lt;a href="https://invisible-island.net/xterm/ctlseqs/ctlseqs.html"&gt;XTerm
control sequences&lt;/a&gt; and
&lt;a href="https://en.wikipedia.org/wiki/ANSI_escape_code#Colors"&gt;ANSI colour codes&lt;/a&gt;.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Exploring Gemini, a modern take on the traditional web document</title>
        <link href="https://thinkmoult.com/exploring-gemini.html" />
        <id>https://thinkmoult.com/exploring-gemini.html</id>
        <updated>2024-12-05</updated>
        <summary>Gemini is a grassroots effort to resurrect a document focused internet. I discuss my personal experience of the evolution of the web, and thoughts on the protocol.</summary>
        <content type="html">

&lt;p&gt;The growth of the web has come at a cost. Let's rediscover Gopher and Gemini,
and discuss the fine line between these protocols, how technology shapes social
outcome, and vice versa.&lt;/p&gt;
&lt;h2&gt;The evolution of the web from documents to applications&lt;/h2&gt;
&lt;p&gt;The web has evolved significantly, changing from primarily a place to share and
reference static documents into a dynamic, interactive, multimedia experience.
A lot of what people visit nowadays aren't really "websites" anymore, they are
"webapps": applications that just don't need to be installed and are loaded,
executed, bit by bit, but with the majority of the processing and storage
happening elsewhere.&lt;/p&gt;
&lt;p&gt;Along with the rise of web applications came a lot of good, and a lot of bad.
It's great that I can sign in anywhere and order groceries to my home. But
there's a lot of bad too. Bad like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Systemic tracking and monitoring of things that Are None Of Your Business.&lt;/li&gt;
&lt;li&gt;Loss of data ownership, where information is stored in a black box outside
  your control.&lt;/li&gt;
&lt;li&gt;The growth of software bloat and unnecessary resource usage. The average
  website size is an abomination.&lt;/li&gt;
&lt;li&gt;Advertising. Everywhere. A completely parasitical proliferation of
  unnecessary consumerism.&lt;/li&gt;
&lt;li&gt;Security holes such as stealing account details and unwarranted cryptomining.&lt;/li&gt;
&lt;li&gt;The monopolisation of two web engines steering the online capabilities of the
  world (including other protocols like the email world)&lt;/li&gt;
&lt;li&gt;Loss of accessibility for those with disabilities&lt;/li&gt;
&lt;li&gt;The abuse of free software through using SaaS as a delivery&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that not all these Bad Things are because of the growth of web
applications. You can still have SaaS and social media without a web app, and
the the market will probably still exist.&lt;/p&gt;
&lt;p&gt;Achieving the modern web involved the development of technologies like HTTP,
TLS, CSS, and JavaScript, and the various web APIs. If I had to point at a
single culprit that led us down this path, I'd point at JavaScript.&lt;/p&gt;
&lt;p&gt;Some of us watched this gradual process occur. HTML started with the
ingredients to be a semantic markup language that separated semantics from
style (CSS). Slowly, tables were used for layouts. Images were used for text
and layout (remember rounded corners?).  Embedded applets and blobs were used
for entire navigation sections. The term "Div Soup" was coined.  Whether you
were conscious of it or not, entire page layouts were redesigned to fit
"standardised pixel dimensions" of advertisement banners.&lt;/p&gt;
&lt;p&gt;Images were warped into the 1x1 tracking pixel. Hotlinking inline resources
meant advertising networks could be setup. CSS improvements meant that simple
input forms and documents could now look like complex, interactive
applications. SSL/TLS meant that sensitive data could be exchanged and opened
the doors to the mass commercialisation of the internet.&lt;/p&gt;
&lt;p&gt;The mobile internet brought a short renaissance in lightweight browsing, and
the "mobile-first design" paradigm, focusing on the most critical pieces of
content first. Developers rediscovered the meaning of &lt;a href="https://en.wikipedia.org/wiki/Progressive_enhancement"&gt;Progressive
Enhancement&lt;/a&gt; and the
usage of HTML did, for a brief, beautiful moment, shift the needle back towards
semantic documents. It wasn't long before that paradigm was replaced with "only
available on the app".&lt;/p&gt;
&lt;p&gt;Once JavaScript started maturing, things changed completely. HTML denoted
elements that were invisible, and would only appear in certain unknown
circumstances. Or content would be missing completely until unknown triggers
would load them. The &lt;code&gt;&amp;lt;template&amp;gt;&lt;/code&gt; tag was the final admission of defeat.
JavaScript, instead of enhancing basic interactivity, became mandatory and
monitored all your behaviour. JavaScript changed the rules on how and when data
was downloaded - it could happen on a timer, in the background, determined by
the application, not by you. JavaScript, used as it is today, has killed the
semantics of the web. Most of the time, we don't look at documents. We execute
real-time software that selectively renders content for us.&lt;/p&gt;
&lt;p&gt;Don't believe me? How much JavaScript do you download just to visit a website?
Forget downloading HTML, text, images, video, fonts, and so on ... what about
just JavaScript on a single page? Here's a list I fact-checked from &lt;a href="https://tonsky.me/blog/js-bloat/"&gt;Tomsky's
blog on JavaScript bloat&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Slack (just after signing in): 55MB&lt;/li&gt;
&lt;li&gt;Jira (fresh empty kanban board page): 50MB&lt;/li&gt;
&lt;li&gt;LinkedIn (home feed): 34MB&lt;/li&gt;
&lt;li&gt;Gmail (inbox) / Ebay (homepage): 18MB&lt;/li&gt;
&lt;li&gt;Instagram / Notion: 16MB&lt;/li&gt;
&lt;li&gt;X / Twitter: 14MB&lt;/li&gt;
&lt;li&gt;Soundcloud / Spotify / YouTube / Facebook / Booking.com: 12MB&lt;/li&gt;
&lt;li&gt;Reddit (viewing subreddit): 10MB&lt;/li&gt;
&lt;li&gt;Github (viewing repo): 8MB&lt;/li&gt;
&lt;li&gt;Bandcamp: 6MB&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In contrast, the entirety of 1993's Doom runs in 2.39MB and NetHack 3.4.3 ran
in 2MB. That's less than it takes for Google to show a single search input
field (2.5MB) on its homepage.&lt;/p&gt;
&lt;p&gt;The technology stack also grew in complexity. New programmers were hired who
didn't know how to serve a static HTML page. CMSes grew in popularity, causing
contented generated from WYSIWYG instead of WYMIWYG. The thickening of the
stack centralised hosting and platforms to those sold the dream that they
needed the stack.&lt;/p&gt;
&lt;p&gt;The stark contrast of websites and web applications caused an imbalance in the
social dynamics of the internet. Richer, flashier experiences became preferred
outlets, causing a centralisation of activity and content. Accessing remote
payloads meant that any website could embed code from other websites for
analytics, advertising, embedded social media, and in doing so chained
themselves to centralised systems. The utility of user bookmarks started to die
out and the walled garden of applications, SEO-optimised content, "lists",
"favourites", and "likes" grew. This had a circular effect. Content was now
produced not because the content had intrinsic intellectual or artistic value,
but instead as a reaction to its "algorithmic performance" on the internet.&lt;/p&gt;
&lt;p&gt;From this moment on, there was no turning back. The growing list of web API
specifications natively formalised what people were already building. The web
had changed.&lt;/p&gt;
&lt;h2&gt;Gopher, and Gemini, what are they and why do they exist?&lt;/h2&gt;
&lt;p&gt;The web isn't the only technology out there. Another alternative is one known
as Gopher, back in a world where a "URL" didn't really exist as we know it
today.&lt;/p&gt;
&lt;p&gt;Imagine instead of a web browser visiting a website, you had a file browser
visiting a ... uh, a filesite? That's Gopher. Imagine the internet as a big,
shared network drive. You browse folders, and inside folders you see a menu
listing of files. This file menu may also include some basic explanatory text
interspersed within, but not much more. When you open a file, that's it. If you
open a text file, you read text. There's no more to it. If someone writes a
link inside that text file, you can't click it, since it's just text. You'll
copy paste it and manually visit it in your "Gopher browser". No images either.
If you want an image, you go back into the folder and open the image
separately.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A screenshot of a Gopherhole (website)" src="https://thinkmoult.com/assets/gopher-website.png"&gt;&lt;/p&gt;
&lt;p&gt;If you want to see for yourself what Gopher looks like without installing a
Gopher browser, check out the &lt;a href="http://gopher.floodgap.com/gopher/gw"&gt;Floodgap
proxy&lt;/a&gt;. You'll be visiting one of the
hundreds of Gopherholes still online today.&lt;/p&gt;
&lt;p&gt;Under the hood, Gopher also lacks many of the technical details that mean it
cannot do the same things that our beloved and hated internet can do. E.g. No
TLS means no security over financial data, so don't expect to do your shopping
on Gopher.&lt;/p&gt;
&lt;p&gt;There's an underground society of Gophers currently still active today, but it
is a niche of primarily technical folk, preferring a more ascetic digital
experience. As a ballpark figure, Gopher has only a few hundred "websites". See
the &lt;a href="https://www.ils.unc.edu/callee/gopherpaper.htm"&gt;rise and fall of Gopher&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Gopher is inherently different from the web: it distinguishes between menus and
files. You navigate through a menu (traditionally hierarchical), and open a
(primarily text) file. Meanwhile, the WWW focuses on "documents" with links.&lt;/p&gt;
&lt;p&gt;Gemini is a more recent grassroots protocol borne out of Gopherspace, best
described as being "somewhere between Gopher and the web". It doesn't have a
menu / file binarism but instead adopts the WWW's document-centric approach.
However, unlike the mixed-media approach of the web, where a website contains
not just HTML, but also images, CSS, and other assets (fonts, JavaScript, etc),
a single Gemini document only contains one type of data (e.g. text, or image,
but not both).&lt;/p&gt;
&lt;p&gt;Gemini, being for a dedicated purpose, was invented alongside a file format
known as Gemtext. Gemini + Gemtext is analogous to HTTP + HTML. Gemtext is
basically yet another Markdown flavour inclined towards minimalism (i.e. no
Markdown tables, no images), with one big restriction: no inline links. Links
are distinctly separated from text. If you want a 1x1 tracking pixel image, you
have to link to it on its own line.  Someone has to explicitly click that link
and load that 1x1 pixel image as a separate request. Oh, also no manual line
wrapping, line wrapping can only occur on the client side.&lt;/p&gt;
&lt;p&gt;Here's what a Gemini capsule (website) looks like. As you see below, it looks
mostly the same as any website, except that links are on their own line. In
this case, headers are in green, and links are in blue. A Gemini website will
look superficially different for different people, depending on their Gemini
browser, font, and colour choices.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A screenshot of a Gemini capsule" src="https://thinkmoult.com/assets/gemini-website.png"&gt;&lt;/p&gt;
&lt;p&gt;Gemini, in the space of a short few years, have surpassed the number of Gopher
websites and now boasts a few thousand capsules (Gemini websites).&lt;/p&gt;
&lt;p&gt;Gemini capsules and Gopherholes are very similar. They focus primarily on
static text content, with only the occasional image, audio, or video file. The
markdown flavour of Gemtext preserves some of the most critical semantic
identifiers of the early web (h1, h2, h3, p, ul, pre, a).&lt;/p&gt;
&lt;p&gt;If you're curious, visit &lt;a href="gopher://thinkmoult.com"&gt;my Gopherhole&lt;/a&gt; and &lt;a href="gemini://thinkmoult.com"&gt;Gemini
capsule&lt;/a&gt;. It's the same content served across three
channels.&lt;/p&gt;
&lt;p&gt;All in all, it's a peaceful life.&lt;/p&gt;
&lt;h2&gt;Why isn't the web like this?&lt;/h2&gt;
&lt;p&gt;Most websites under the hood already store core, fundamental content in a
separate location. It's a conscious choice by both web developers to present it
in such a cluttered manner. Here's a cute trick on my own website: if you're
using Firefox, press &lt;code&gt;&amp;lt;Alt&amp;gt;&lt;/code&gt;. Then in the top menu, go to &lt;code&gt;View &amp;gt; Page Style&lt;/code&gt;
and choose &lt;code&gt;Modern&lt;/code&gt;. That's right! No JavaScript - just web standards combined
with honest, Brutalist web design.&lt;/p&gt;
&lt;p&gt;Let's see how far we can get.&lt;/p&gt;
&lt;p&gt;You could get a very similar experience of this simpler time with the web as it
is today. If you've read this far, you're on such a website which contains no
tracking, semantic HTML, works fantastically on &lt;a href="https://thinkmoult.com/assets/../using-elinks-browse-web.html"&gt;a text
browser&lt;/a&gt;, no ads, no interactivity, no
Javascript, and practically boilerplate CSS. The problem, as identified by the
Gemini folks, is that this is voluntary by the server - a reader doesn't know
what's going to hit them when they visit a website. Is it going to be a spartan
document or a complete software suite?&lt;/p&gt;
&lt;p&gt;There's really two separate problems here: the protocol that lends itself to
having persistent data about users, and the nightmare trifecta of HTML, CSS,
and JavaScript. Put together, this creates the default web engine behaviour
which is so ingrained in the culture of being a miniature operating system.&lt;/p&gt;
&lt;p&gt;Consider a regular HTTP website that only returned &lt;code&gt;text/markdown&lt;/code&gt; instead of
HTML (and imagine we agreed on a dialect). You can configure your browser to
open text and other files (such as gemtext) &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/open-in-browser/"&gt;in the
browser&lt;/a&gt; and
then &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/markdown-viewer-chrome/"&gt;render the contents as
Markdown&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you'd like you can test it on &lt;a href="https://thinkmoult.com/exploring-gemini.gmi"&gt;this article as
gemtext&lt;/a&gt;. Here's what it can look
like:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Firefox rendering gemtext as markdown" src="https://thinkmoult.com/assets/firefox-markdown.png"&gt;&lt;/p&gt;
&lt;p&gt;The replacement of the HTML/CSS/JS with spartan Markdown rendering resolves
some issues, such as encouraging semantic text and preventing lawless code
execution on your machine. If servers would return &lt;code&gt;text/markdown&lt;/code&gt; instead of
&lt;code&gt;text/html&lt;/code&gt;, and browsers rendered it, we'd immediately have a huge distinction
between pure documents and richer experiences.&lt;/p&gt;
&lt;p&gt;However, the HTTP protocol still allows for headers, and therefore cookies and
sessions.  We'd also need a separate protocol that is similarly spartan,
preserving the ability to fetch data without the persistent bits. HTTP can't
directly be used for this, because we don't know prior to fetching a page
whether or not it needs headers or not (i.e. is a dumb document, or a smart
app). Let's imagine we derived a stripped down version of HTTP, say a
HTTP+GET:// protocol, which is basically HTTP minus RFC6265 (Cookies), minus
any verb that isn't &lt;code&gt;GET&lt;/code&gt;, and so on until it preserves just the bits of HTTP
needed to fetch a document and nothing else. Existing browsers would "just
work" with minimal modifications.&lt;/p&gt;
&lt;p&gt;This effectively creates two splits. First the protocol: a dumb, privacy
respecting document retrieval protocol vs a metadata rich protocol that can
continue to evolve for dynamic apps (they're here to stay!). Similarly, we
formally standardise (stop inventing Markdown dialects!) rendering a simple,
semantic document format, vs a rich, app UI toolkit.&lt;/p&gt;
&lt;p&gt;Users can become more aware of the two web worlds: static documents, and
dynamic apps. You don't need to rebuild search engines. You don't need to
reinvent a BBS. They can coexist.&lt;/p&gt;
&lt;p&gt;This minor derivative using existing technologies is effectively a
formalisation of what many people already do: use "reader mode" on phones and
browsers, use themed "night mode" and overridden CSS, use "no script" and "ad
block plus", and get bombarded with "accept cookies"?.&lt;/p&gt;
&lt;h2&gt;Gemini is a social statement&lt;/h2&gt;
&lt;p&gt;It seems as though we've already got all the technology we need ... but there's
still one problem: it's very difficult to enforce this subset. Non-technical
users won't recognise the difference when text/html gets returned from a
HTTP+GET:// protocol and still ends up executing JavaScript. Non-technical
users will just say "this looks ugly" when text/markdown is return from a HTTP
website. Using a subset of the technology would mean that it's hard to draw the
line where support starts and stops. What's in it for the two major browser
monopolies to support this schism of the web? Are users really going to kick up
a fuss if something that "looks" like a document is instead served as an app?&lt;/p&gt;
&lt;p&gt;They key message is that although the protocols, servers, and clients &lt;em&gt;can&lt;/em&gt;
distinguish between the two, psychologically the world of "documents" and
"apps" are still conflated.&lt;/p&gt;
&lt;p&gt;This is where the strategy like &lt;code&gt;gemini://&lt;/code&gt; as a distinct protocol (i.e. not a
HTTP subset) and the "psychological" coupling of &lt;code&gt;text/gemini&lt;/code&gt; to the protocol
come into place. It draws a strict line between the two worlds. This to me is a
trade-off between technical reuse and social manifesto. Although you &lt;em&gt;could&lt;/em&gt;
just use the web the way it was used historically, is there a critical mass of
society that feels it is worth inventing a reactionary post-web protocol? Let's
find out.&lt;/p&gt;
&lt;p&gt;Note that you can build (basic) apps in Gemini, since nothing stops you putting
data in the URL itself. This naturally has a size limitation, so it works for
small input fields, search engines, or similar. Gemini is "designed" to be
ruthless towards the "gradual feature creep" that formed the modern web, using
strategies like not versioning the protocol. Despite this people will still
build this stuff because they can. Hopefully because WWW already exists, there
won't be much incentive for the same "app creep" to occur.&lt;/p&gt;
&lt;h2&gt;Things I dislike about Gemini&lt;/h2&gt;
&lt;p&gt;Daniel Stenberg (the curl guy) makes &lt;a href="https://daniel.haxx.se/blog/2023/05/28/the-gemini-protocol-seen-by-this-http-client-person/"&gt;six technical
recommendations&lt;/a&gt;
which seem very sensible to someone who isn't in the weeds. Meanwhile, I'll
stick to commenting on markup.&lt;/p&gt;
&lt;p&gt;I think inventing another Markdown flavour is silly. Reuse something more
battle tested. Github did a lot of work with their flavour, reuse their work.
It's creative commons. I especially dislike the lack of semantic tables.&lt;/p&gt;
&lt;p&gt;The reduction of all external media to a "link" is an interesting one. A huge
disadvantage is that the semantics of the media type is lost. The alt text and
the title text is conflated. At least it does somewhat encourage some title
text (even if not alt text) to distinguish between actually meaningful images
versus "filler stock image".&lt;/p&gt;
&lt;p&gt;The theory is that explicit, separate links encourages intentional resource
loading. But nothing is stopping someone from building a Gemini browser that
fetches all links (including remote ones, such as those much loved tracking
pixels) and renders them inline depending on mimetype. The missing semantics of
the &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; tag discourages indiscriminate "fetching" of these resources, but
doesn't altogether prevent it. Any fetched resource could be used as a tracker.&lt;/p&gt;
&lt;p&gt;I'm not convinced text-centricism is the main selling point in 2024. I believe
static document centricism should be the goal, which certainly includes a lot
of text, but also other media. Non-text media isn't the problem - it's the
abuse of unintentional resource loading, and it's the obfuscation of critical
document content resources with "layout", "page" or "system" resources. I'd
love to have more semantics: images, or "lists of images" (i.e.  photo
gallery), videos, music, podcasts, spreadsheets, and so on.&lt;/p&gt;
&lt;p&gt;I also dislike the loss of document structure semantics. Whilst Markdown
provides basic semantics for a single article, it does not handle multiple
articles, nor navigation. So whilst it handles the "document" portion of
"browsing documents", it's missing on the "browsing" part. A webpage / capsule
still has the semantic concept of HTML's &lt;code&gt;&amp;lt;nav&amp;gt;&lt;/code&gt; at the very least, and we
might argue it's useful to have &lt;code&gt;&amp;lt;header&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;footer&amp;gt;&lt;/code&gt;. This would allow for
accessible text browsing such as "Skip to Content".&lt;/p&gt;
&lt;h2&gt;The growth of Gemini&lt;/h2&gt;
&lt;p&gt;Stats taken from &lt;a href="gemini://gemini.bortzmeyer.org/software/lupa/stats.gmi"&gt;St&#233;phane Bortzmeyer's
capsule&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2022: ~1,900 capsules.&lt;/li&gt;
&lt;li&gt;2023: ~2,500 capsules.&lt;/li&gt;
&lt;li&gt;2024: ~4,000 capsules.&lt;/li&gt;
&lt;li&gt;2025: ~4,400 capsules.&lt;/li&gt;
&lt;/ul&gt;
        </content>
    </entry>
    <entry>
        <title>Using elinks to browse the web</title>
        <link href="https://thinkmoult.com/using-elinks-browse-web.html" />
        <id>https://thinkmoult.com/using-elinks-browse-web.html</id>
        <updated>2024-11-30</updated>
        <summary>Elinks is the most well maintained, feature-rich command line text browser available today. I demonstrate how you can use it for every day browsing, and where it still falls short.</summary>
        <content type="html">

&lt;p&gt;Sometime in the past decade, the web took a wrong turn and has been too embarrassed to turn back.&lt;/p&gt;
&lt;p&gt;Websites changed from being a medium to host static documents into rich, interactive software that doesn't require installation on your computer. With that complexity came a reduction of browser engines and a race to take two steps backwards, one step forward in the replacement of desktop software. If this resonates with you and you still primarily access the internet for the consumption of text-heavy content, this article will describe the state of pure text-based command line browsers in 2024.&lt;/p&gt;
&lt;p&gt;In short, you can practically use text-based browsers in this day and age (I have been regularly doing so myself), so long as you only use them on traditional websites where your main focus is on text content. The moment you want to access a website with lots of images (if you want to look at something graphical), video, or interactive, it's not an option. So if you're reading a news article, searching Wikipedia, reading documentation, browsing a forum, or checking the phone number of a local business website, go for it. If you want to search for videos, do an image search, or access a graphical or interactive app of any kind, use a graphical browser. If you've gone this far, you'll start to be pleasantly surprised by the number of websites that work and offer quite a charming experience. You'll become quite skilled at learning to disregard the boilerplate and unneccessary cruft that plagues modern websites. Unfortunately, you will also be unpleasantly surprised by websites that you expect to be suitably rendered in text (browsing Github repositories and searching issues, visiting a Discourse forum to read posts, or checking out comments on Reddit, etc) only for the experience to be horrific or completely broken. Shame on these web developers.&lt;/p&gt;
&lt;p&gt;The most advanced command line browser is &lt;a href="http://elinks.or.cz/"&gt;elinks&lt;/a&gt;. I highly advise you also try out &lt;a href="https://lynx.browser.org/"&gt;Lynx&lt;/a&gt; (the oldest), &lt;a href="https://github.com/acg/w3m"&gt;w3m&lt;/a&gt; (images in the terminal, cool!), and &lt;a href="http://links.twibright.com/"&gt;links&lt;/a&gt; (grandfather of elinks, faster, but much less features like colours, scripting, options, protocols, etc), and when you've convinced yourself that elinks is truly the only option for day-to-day usage, keep reading. If you come across stuff like felinks (later renamed to elinks) or links2 (fork with graphical mode), they're all dead and elinks is now the fork that matters.&lt;/p&gt;
&lt;p&gt;Let's see what it looks like in action. Here's my very own website, showing a list of articles. Notice the numbers next to each link. This lets me quickly jump to a link.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Elinks browsing my website" src="https://thinkmoult.com/assets/elinks-browsing-website.png"&gt;&lt;/p&gt;
&lt;p&gt;Here's the &lt;a href="https://community.osarch.org"&gt;OSArch forums&lt;/a&gt;. Notice the search input field on the top left. Notice how cleanly formatted this webpage is. It uses HTML rewriting with Python to optimise the layout, explained further below:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Elinks browsing a forum with custom HTML formatting" src="https://thinkmoult.com/assets/elinks-browsing-forum-with-html-rewriting-hook.png"&gt;&lt;/p&gt;
&lt;p&gt;And here's the NetHackWiki, showing an article about a Giant Ant. In this case, link numbering is turned off, and there is nothing but content to focus on:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Elinks browsing a text heavy website like a wiki" src="https://thinkmoult.com/assets/elinks-browsing-wikipedia.png"&gt;&lt;/p&gt;
&lt;p&gt;Here is the same page but showing ncurses menus for a more graphical experience, tables, and images in red (which if you click on them, will open in your image viewer, feh on my machine).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Elinks with tables, menus, and images" src="https://thinkmoult.com/assets/elinks-with-tables-and-menus.png"&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;It's still maintained and developed.&lt;/li&gt;
&lt;li&gt;You can toggle link numbering to jump to links and navigate purely using the keyboard.&lt;/li&gt;
&lt;li&gt;It has tabs. You can create tabs. Reorder tabs. Open links in new tabs. Close tabs.&lt;/li&gt;
&lt;li&gt;You can configure colours and styling. Choose from any true colour, not limited to 8 / 16 / 256 colours.&lt;/li&gt;
&lt;li&gt;It understands CSS styling (not CSS layouting, so don't expect flexbox to work).&lt;/li&gt;
&lt;li&gt;Renders tables and frames&lt;/li&gt;
&lt;li&gt;For long-form textarea authoring, you can launch your own text editor (go Vim!).&lt;/li&gt;
&lt;li&gt;It has bookmarks, history, downloads, cache, cookie, and tab managers.&lt;/li&gt;
&lt;li&gt;It has that annoying feature to "remember what I typed into this form"&lt;/li&gt;
&lt;li&gt;You can customise external apps to launch for different mimetypes or custom protocols (e.g. image viewer, video player, etc)&lt;/li&gt;
&lt;li&gt;It has mouse support to "click" on a link or scroll. Or even RMB for context menu options.&lt;/li&gt;
&lt;li&gt;Customisable document margins and width. What if all web page text could be reformatted to fit nicely with 60-80 characters per line for readability? You can do it.&lt;/li&gt;
&lt;li&gt;You can "find in page" with instant as-you-type search&lt;/li&gt;
&lt;li&gt;You can navigate with vi-keys (once mapped). Keybindings are completely configurable.&lt;/li&gt;
&lt;li&gt;Can be handled as a remote session, so when launching a link from another app (e.g mutt, newsboat, etc) it'll open it as a new tab in an existing elinks session&lt;/li&gt;
&lt;li&gt;Closing and reopening remembers the tabs from your last session&lt;/li&gt;
&lt;li&gt;It supports URL rewriting, such that typing "ddg foobar" auto searches DuckDuckGo (Lite) with the keyword foobar. Do need to type out full URLs.&lt;/li&gt;
&lt;li&gt;It supports HTML rewriting. Is your favourite website coded by a web developer who doesn't understand the importance of semantic HTML? You can pattern match URLs and auto manipulate HTML output to fix their broken website, client-side. Scary.&lt;/li&gt;
&lt;li&gt;It can be scripted with a variety of bindings, including LUA, Perl, Ruby, Python and ECMAScript.&lt;/li&gt;
&lt;li&gt;You can browse local files, FTP, SFTP, Gopher and Gemini&lt;/li&gt;
&lt;li&gt;If you do come across a website that is so utterly broken, you're a hotkey away from opening it in a more "modern" browser.&lt;/li&gt;
&lt;li&gt;Lots of options to customise everything&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The best place to familiarise yourself with elinks is to read the &lt;a href="http://elinks.or.cz/documentation/manual.html"&gt;Elinks documentation&lt;/a&gt;, as well as &lt;a href="https://xteddy.org/elinks/"&gt;Thomas Adam's tips&lt;/a&gt; and &lt;a href="http://www.calmar.ws/elinks/"&gt;Calmar's tips&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I've tweaked my elinks to have Vi-key bindings, support external browser, and view images, videos, and SVGs. This guide assumes you use a similar configuration to mine (otherwise, hotkeys and such will differ). At the bottom of this article, you'll see my ELinks configuration.&lt;/p&gt;
&lt;h2&gt;Navigation and browsing&lt;/h2&gt;
&lt;p&gt;Use &lt;code&gt;o&lt;/code&gt; to go to a new website in the current tab, or &lt;code&gt;t&lt;/code&gt; to open a new tab. URL completion is awesome, so get familiar with "URI rewriting". When you press &lt;code&gt;o&lt;/code&gt;, type in &lt;code&gt;ddg thinkmoult&lt;/code&gt; to search for "thinkmoult" on DuckDuckGo.&lt;/p&gt;
&lt;p&gt;If you frequent sites, type &lt;code&gt;s&lt;/code&gt; to launch your bookmarks, then &lt;code&gt;S&lt;/code&gt; to search your bookmarks. You can quickly clear the form by doing &lt;code&gt;&amp;lt;Esc&amp;gt;l&lt;/code&gt; to clear, then press &lt;code&gt;g&lt;/code&gt; to visit the bookmark.&lt;/p&gt;
&lt;p&gt;To navigate via single row/column scrolling, use hjkl vi-keys. Very often, you'll want to scroll multiple lines at a time, so use JK for this. HL is reserved to quickly go forwards and backwards in history.&lt;/p&gt;
&lt;p&gt;Alternatively, use &lt;code&gt;&amp;lt;Up&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;Down&amp;gt;&lt;/code&gt; to jump to the next link. The "active" link will be highlighted. Press &lt;code&gt;&amp;lt;Enter&amp;gt;&lt;/code&gt; to visit the link. You can also use &lt;code&gt;O&lt;/code&gt; to open that link in a new tab. You can use &lt;code&gt;c&lt;/code&gt; to close a tab. To undo a closed tab, press &lt;code&gt;u&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Instead of cycling manually through links, in practice you will use &lt;code&gt;.&lt;/code&gt; to toggle link numbering. Type the number to jump to the link. Toggling link numbering decreases readability of text, so it's better to toggle it than leave it permanently on.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;Up&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;Down&amp;gt;&lt;/code&gt; will also jump to form fields. Use &lt;code&gt;&amp;lt;Enter&amp;gt;&lt;/code&gt; to enter text into an input field. If it's a large text-area, use &lt;code&gt;Ctrl-t&lt;/code&gt; to launch vim to edit it.&lt;/p&gt;
&lt;p&gt;On a long page where you want to jump between multiple points in the page, you can set "marks" to remember your position and jump between them. Type &lt;code&gt;ma&lt;/code&gt; to set a mark called &lt;code&gt;a&lt;/code&gt;, then use &lt;code&gt;'a&lt;/code&gt; to jump to that mark. Once you go to a page you like, press &lt;code&gt;a&lt;/code&gt; to add it to your bookmarks.&lt;/p&gt;
&lt;p&gt;When you inevitably reach a broken webpage, press &lt;code&gt;E&lt;/code&gt; and select the &lt;code&gt;firefox&lt;/code&gt; option to open the current page in Firefox. Send an angrily worded email to the webmaster.&lt;/p&gt;
&lt;p&gt;Since elinks supports the mouse, you can also use the mouse to scroll, click on links, and even right click to open things in new tabs, and if you press &lt;code&gt;&amp;lt;Esc&amp;gt;&lt;/code&gt; you can navigate through the toolbar menus.&lt;/p&gt;
&lt;h2&gt;Styles and colours&lt;/h2&gt;
&lt;p&gt;Websites store information about how their content should be represented using CSS. This defines colours, spacing, fonts, and so on. Nowadays because developers sometimes don't know when to stop, they also define interactivity, animations, and content itself.&lt;/p&gt;
&lt;p&gt;Elinks supports a non-CSS styled colour display (like &lt;code&gt;w3m&lt;/code&gt; or other browsers): this is where all document (i.e. website) colours are determined by you. You don't have a lot of choice, given it's just text, but your &lt;code&gt;elinks.conf&lt;/code&gt; can set &lt;code&gt;document.colors.*&lt;/code&gt; to set things like the background colour, image colour, link colours, link number colours, text colours, and that's about it. Despite its limitation, it forms a great fallback when the website just has terrible colour choices and you just need things to be readable.&lt;/p&gt;
&lt;p&gt;Alternatively, elinks can use the CSS styles provided by the website. Like all browsers, you can also provide your own &lt;code&gt;default.css&lt;/code&gt; to be used as the default when no style is provided.&lt;/p&gt;
&lt;p&gt;I'm strongly of the opinion that the web should've been designed in manner where the remote server was only capable of delivering semantic HTML, and the concept of how things should look like (i.e. the CSS) should be purely client driven. With elinks, you can somewhat experience this blissful state of affairs.&lt;/p&gt;
&lt;p&gt;To do this, you can actually configure elinks to strip all server-side styling (you can keep classes and IDs and so on), then only apply your own CSS. I like to do this to consistently define my own colourscheme to quickly identify in a consistent manner headers, footers, navigation, links, code, and quotes.&lt;/p&gt;
&lt;p&gt;&lt;img alt="My Elinks colours" src="https://thinkmoult.com/assets/elinks-colorscheme.png"&gt;&lt;/p&gt;
&lt;p&gt;Here's the contents of my &lt;code&gt;default.css&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;body { background-color: #1a1a1a; color: #ddd; }
h1, h2, h3, h4, h5, h6 { color: #96f06e; }
a, button, input { color: #6ec8fa; font-weight: bold; }
code { color: #EDAE49; background-color: #000; }
pre { color: #fff; background-color: #000; }
blockquote { color: #FFC09F; }
footer, header { background-color: #111; }
nav { background-color: #03253A; }
hr { color: #777; }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Notice I don't use &lt;code&gt;!important&lt;/code&gt;. This is because I use HTML rewriting to first strip all existing styling from webpages. I'm not a fan of server-side styling, I much prefer client-side styling. See the Python scripting section below.&lt;/p&gt;
&lt;p&gt;Elinks offers the &lt;code&gt;%&lt;/code&gt; hotkey to toggle between three style modes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Non-CSS styles, using colours from &lt;code&gt;document.colors.*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;CSS styles, including local CSS&lt;/li&gt;
&lt;li&gt;CSS styles, including local CSS, but this time ignoring background CSS colours, since this is a very common source of unreadable text.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Document formatting&lt;/h2&gt;
&lt;p&gt;In addition to standardised colours across all websites, elinks takes it to the next level with standardised formatting. Instead of just displaying text in your terminal, elinks lets you set page margins and document widths. This means that long text doesn't just go on and on in your terminal - it wraps to whatever you wish. Coming from the world of LaTeX documents, most people find it more comfortable to read between 60-100 characters per line, and having some whitespace for the text to breathe in the margins.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Elinks showing Mastodon via Brutaldown with a custom document width" src="https://thinkmoult.com/assets/elinks-document-width.png"&gt;&lt;/p&gt;
&lt;h2&gt;JavaScript / EMCAScript&lt;/h2&gt;
&lt;p&gt;There is theoretical support. This alas is just theoretical and basically expect websites that rely on JavaScript to break.&lt;/p&gt;
&lt;h2&gt;Showing page metadata&lt;/h2&gt;
&lt;p&gt;Another neat thing this script does is to selectively allow the &lt;code&gt;&amp;lt;link&amp;gt;&lt;/code&gt; element. The HTML &lt;code&gt;&amp;lt;link&amp;gt;&lt;/code&gt; element is a way for documents to show that another page is related, such as for an alternative view of the page (like an Atom feed or RSS feed), or the same article in another language, or a next / previous page of a series of articles. Most graphical browsers hide this information from you. The &lt;code&gt;document.html.link_display&lt;/code&gt; option will show these links, and HTML rewriting can isolate only the most useful links. This is great if you're a heavy user of Atom feeds.&lt;/p&gt;
&lt;h2&gt;Hooks and HTML rewriting with Python scripting&lt;/h2&gt;
&lt;p&gt;This is an advanced, but very powerful feature. Simply create a &lt;code&gt;hooks.py&lt;/code&gt; (or &lt;code&gt;hooks.lua&lt;/code&gt; or &lt;code&gt;hooks.js&lt;/code&gt;) in &lt;code&gt;~/.config/elinks/&lt;/code&gt;. This allows you to hook into events and override the behaviour. For example, the &lt;code&gt;pre_format_html_hook&lt;/code&gt; will take HTML and let you pre-process it before rendering it. If a website you frequent has garbage HTML, you can fix it.&lt;/p&gt;
&lt;p&gt;Here's an example of a Github issue page. On the left is the original with only basic styling. Notice the long and inefficient block li elements used in the navigation, as well as feedback popup dialog and "loading" invisible div which is almost always irrelevant. On the right is the same issue page with HTML modifications which make it much nicer to browse (generally rendering list items with links inline are almost always an improvement in text browsers - notice the emojis representing reactions rendered nicely in a line).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Elinks HTML rewriting" src="https://thinkmoult.com/assets/elinks-html-rewriting.png"&gt;&lt;/p&gt;
&lt;p&gt;Python has a neat library called BeautifulSoup which makes HTML manipulation really easy. Imagine if you could write a quick config file that takes a tag selector query (e.g. &lt;code&gt;table.itemlist&lt;/code&gt;) and auto apply some "cleaning" function from a library of cleaning functions to make it more readable. Here's an example which strips all styling, makes textareas a consistent size, makes tables actually look like tables, and so on.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;import elinks
import hooks
import rules
from bs4 import BeautifulSoup
from importlib import reload

def pre_format_html_hook(url, html):
    # No need to restart elinks to test your rules
    reload(rules)

    if not url.startswith(&amp;quot;http&amp;quot;):
        return html

    soup = BeautifulSoup(html, 'html.parser')

    # Bookend the body in hr tags to make it clear where the primary content is
    if body := soup.find_all(&amp;quot;body&amp;quot;):
        body[0].insert(0, soup.new_tag(&amp;quot;hr&amp;quot;))
        body[0].append(soup.new_tag(&amp;quot;hr&amp;quot;))

    # Purge all unsemantic stuff. My CSS, my rules.
    [e.decompose() for e in soup.find_all(&amp;quot;template&amp;quot;)]
    [e.decompose() for e in soup.find_all(&amp;quot;style&amp;quot;)]
    [e.decompose() for e in soup.find_all(&amp;quot;script&amp;quot;)]
    for e in soup.descendants:
        try:
            del e[&amp;quot;style&amp;quot;]
        except:
            pass

    # I only like some semantic links
    allowed_links = {&amp;quot;next&amp;quot;, &amp;quot;prev&amp;quot;, &amp;quot;license&amp;quot;, &amp;quot;alternate&amp;quot;, &amp;quot;author&amp;quot;, &amp;quot;canonical&amp;quot;, &amp;quot;privacy-policy&amp;quot;, &amp;quot;terms-of-service&amp;quot;}
    disallowed_links = {&amp;quot;icon&amp;quot;}
    for e in soup.find_all(&amp;quot;link&amp;quot;):
        if &amp;quot;rel&amp;quot; in e.attrs and allowed_links &amp;amp; set(e[&amp;quot;rel&amp;quot;]) and not (disallowed_links &amp;amp; set(e[&amp;quot;rel&amp;quot;])):
            continue
        e.name = &amp;quot;nolink&amp;quot;

    # Textareas are meant to be big.
    for e in soup.find_all(&amp;quot;textarea&amp;quot;):
        e[&amp;quot;rows&amp;quot;] = 5
        e[&amp;quot;cols&amp;quot;] = 80

    # Tables should look like tables with clear borders
    for e in soup.select(&amp;quot;table&amp;quot;):
        e[&amp;quot;border&amp;quot;] = 1
        e[&amp;quot;frame&amp;quot;] = &amp;quot;box&amp;quot;

    # Very often websites have huge navigation lists or similar.
    # This takes most lists and renders them inline. It's mostly an improvement.
    for e in soup.select(&amp;quot;li&amp;quot;):
        e_strings = set(e.strings)
        a_strings = set()
        for a in e.find_all(&amp;quot;a&amp;quot;):
            a_strings.update(a.strings)
        if e_strings == a_strings:
            e.name = &amp;quot;span&amp;quot;
            e.insert(0, soup.new_string(&amp;quot; &#8226; &amp;quot;))

    return str(soup)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Check out &lt;a href="https://hellricer.github.io/2019/05/29/elinks-with-beautifulsoup.html"&gt;this great article&lt;/a&gt; which provides a neat framework that does this. It makes "fixing" nasty HTML a breeze.&lt;/p&gt;
&lt;h2&gt;Elinks configuration&lt;/h2&gt;
&lt;p&gt;In &lt;code&gt;.config/elinks/elinks.conf&lt;/code&gt;, feel free to use this as a starting point.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# Vi-like navigation
bind &amp;quot;main&amp;quot; &amp;quot;h&amp;quot; = &amp;quot;scroll-left&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;j&amp;quot; = &amp;quot;scroll-down&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;k&amp;quot; = &amp;quot;scroll-up&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;l&amp;quot; = &amp;quot;scroll-right&amp;quot;

bind &amp;quot;main&amp;quot; &amp;quot;H&amp;quot; = &amp;quot;history-move-back&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;J&amp;quot; = &amp;quot;move-half-page-down&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;K&amp;quot; = &amp;quot;move-half-page-up&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;L&amp;quot; = &amp;quot;history-move-forward&amp;quot;

bind &amp;quot;main&amp;quot; &amp;quot;Ctrl-d&amp;quot; = &amp;quot;move-half-page-down&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;Ctrl-u&amp;quot; = &amp;quot;move-half-page-up&amp;quot;

# Visit a new website (it'll pop up a fresh dialog to enter in a URL)
bind &amp;quot;main&amp;quot; &amp;quot;o&amp;quot; = &amp;quot;goto-url&amp;quot;
# Edit the current URL (it'll pop up a dialog with the existing URL)
bind &amp;quot;main&amp;quot; &amp;quot;e&amp;quot; = &amp;quot;goto-url-current&amp;quot;
# Reload webpage
bind &amp;quot;main&amp;quot; &amp;quot;r&amp;quot; = &amp;quot;reload&amp;quot;
# When a link is active, you can open it in a tab (or in the background)
bind &amp;quot;main&amp;quot; &amp;quot;O&amp;quot; = &amp;quot;open-link-in-new-tab&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;T&amp;quot; = &amp;quot;open-link-in-new-tab-in-background&amp;quot;

# I never got this to work. Use the default &amp;lt; and &amp;gt; to change tabs.
bind &amp;quot;main&amp;quot; &amp;quot;Ctrl-Tab&amp;quot; = &amp;quot;tab-next&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;Shift-Ctrl-Tab&amp;quot; = &amp;quot;tab-prev&amp;quot;
# Use [] to reorder tabs
bind &amp;quot;main&amp;quot; &amp;quot;]&amp;quot; = &amp;quot;tab-move-right&amp;quot;
bind &amp;quot;main&amp;quot; &amp;quot;[&amp;quot; = &amp;quot;tab-move-left&amp;quot;
# c to close tabs
bind &amp;quot;main&amp;quot; &amp;quot;c&amp;quot; = &amp;quot;tab-close&amp;quot;

# ?
bind &amp;quot;main&amp;quot; &amp;quot;u&amp;quot; = &amp;quot; *scripting-function*&amp;quot;

# Retain my current hand-written config, and only make changes as necessary if
# you change things through the UI.
set config.comments = 0
set config.saving_style = 3
set config.saving_style_w = 1
# set document.browse.links.numbering = 1
set document.colors.background = &amp;quot;#1a1a1a&amp;quot; # Close to black
set document.colors.image = &amp;quot;#fa6982&amp;quot; # Pink
set document.colors.link = &amp;quot;#6ec8fa&amp;quot; # Blue
set document.colors.link_number = &amp;quot;#dc6ea5&amp;quot; # Faded pink
set document.colors.text = &amp;quot;#eeeeee&amp;quot;
set document.colors.use_document_colors = 2
set document.colors.use_link_number_color = 1
set document.colors.vlink = &amp;quot;#117ebb&amp;quot;
# CSS is nice. My CSS is nice. Your CSS is not nice.
set document.css.enable = 1
set document.css.import = 0
set document.css.stylesheet = &amp;quot;default.css&amp;quot;
set document.html.link_display = 5
set document.html.wrap_nbsp = 0
set document.plain.compress_empty_lines = 1

# Do something with the current website in an external app.
bind &amp;quot;main&amp;quot; &amp;quot;E&amp;quot; = &amp;quot;tab-external-command&amp;quot;
# The &amp;quot;firefox&amp;quot; option will open the current page in firefox.
set document.uri_passing.firefox.command = &amp;quot;firefox-bin %c&amp;quot;
# The &amp;quot;xclip&amp;quot; option will copy the current URL to the clipboard.
set document.uri_passing.xclip.command = &amp;quot;echo %c | xclip -selection c&amp;quot;

# Just give up on JavaScript.
# set ecmascript.enable = 0

# Enable dumb and smart URI rewriting (so &amp;quot;ddg foo&amp;quot; searches DuckDuckGo for foo)
set protocol.rewrite.enable-dumb = 1
set protocol.rewrite.enable-smart = 1

# These colours are a lot more readable
set terminal.xterm-256color.block_cursor = 1
set terminal.xterm-256color.colors = 4
set terminal.xterm-256color.italic = 1
set terminal.xterm-256color.m11_hack = 1
set terminal.xterm-256color.strike = 1
set terminal.xterm-256color.transparency = 1
set terminal.xterm-256color.type = 1
set terminal.xterm-256color.underline = 1
set terminal.xterm-256color.utf_8_io = 1
set ui.colors.color.desktop.background = &amp;quot;black&amp;quot;
set ui.colors.color.desktop.text = &amp;quot;red&amp;quot;
set ui.colors.color.mainmenu.normal.background = &amp;quot;white&amp;quot;
set ui.colors.color.status.status-bar.background = &amp;quot;#96f06e&amp;quot;
set ui.colors.color.status.status-text.background = &amp;quot;#96f06e&amp;quot;
set ui.colors.color.tabs.normal.background = &amp;quot;#333333&amp;quot;
set ui.colors.color.tabs.normal.text = &amp;quot;#eeeeee&amp;quot;
set ui.colors.color.tabs.selected.background = &amp;quot;#96f06e&amp;quot;
set ui.colors.color.tabs.selected.text = &amp;quot;black&amp;quot;
set ui.colors.color.tabs.separator.background = &amp;quot;#222222&amp;quot;
set ui.colors.color.tabs.separator.text = &amp;quot;#333333&amp;quot;
set ui.colors.color.title.title-bar.background = &amp;quot;black&amp;quot;
set ui.colors.color.title.title-bar.text = &amp;quot;black&amp;quot;
set ui.colors.color.title.title-text.background = &amp;quot;black&amp;quot;
set ui.colors.color.title.title-text.text = &amp;quot;#dc6ea5&amp;quot;
set ui.language = &amp;quot;System&amp;quot;

# Save tabs when quitting and restore when starting
set ui.sessions.auto_restore = 1
set ui.sessions.auto_save = 1

# Immediately jump to redirect links
set document.browse.show_refresh_link = 0
set document.browse.minimum_refresh_time = 0

# Define custom handlers (image, video, pdf, svg) for extensions
set mime.handler.image.unix-xwin.program = &amp;quot;feh %u&amp;quot;
set mime.handler.video.unix-xwin.program = &amp;quot;mplayer -loop 0 %u&amp;quot;
set mime.handler.pdf.unix-xwin.program = &amp;quot;wget -O /home/dion/tmp/tmp.pdf %u &amp;amp;&amp;amp; mupdf /home/dion/tmp/tmp.pdf&amp;quot;
set mime.handler.svg.unix-xwin.program = &amp;quot;firefox-bin %u&amp;quot;

# Define extensions we will handle
set mime.extension.webm = &amp;quot;video/webm&amp;quot;
set mime.type.video.webm = &amp;quot;video&amp;quot;

set mime.extension.mp4 = &amp;quot;video/mp4&amp;quot;
set mime.type.video.mp4 = &amp;quot;video&amp;quot;

set mime.type.image.jpg = &amp;quot;image&amp;quot;
set mime.type.image.jpeg = &amp;quot;image&amp;quot;
set mime.type.image.png = &amp;quot;image&amp;quot;

set mime.extension.pdf = &amp;quot;application/pdf&amp;quot;
set mime.type.application.pdf = &amp;quot;pdf&amp;quot;

set mime.extension.svg = &amp;quot;image/svg+xml&amp;quot;
set mime.type.image.xml+svg = &amp;quot;svg&amp;quot;
set mime.type.image.svg+xml = &amp;quot;svg&amp;quot;

# Download to this folder
set document.download.directory = &amp;quot;/home/dion/tmp/&amp;quot;

# I can't be bothered to set up certificate verification on Gemini
set connection.ssl.gemini_cert_verify = 0

# Sometimes curl is better, but I find it slower
set protocol.http.use_curl = 0

# Just give up on JavaScript.
set ecmascript.enable = 0
# If JS is enabled, pop up error messages
set ecmascript.error_reporting = 1
# Log JS errors to ~/.config/elinks/console.log
set ecmascript.enable_console_log = 1

# Prioritise showing alt/title text, and fallback to image filenames
set document.browse.images.show_as_links = 1
set document.browse.images.display_style = 3

# Long text is hard to read. Reformat webpages to fit within 90 characters.
# The historical ideal is about 60-80 but you may prefer otherwise.
set document.browse.margin_width = 5
set document.browse.preferred_document_width = 90
set document.browse.use_preferred_document_width = 1
&lt;/code&gt;&lt;/pre&gt;
        </content>
    </entry>
    <entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Replacing XScreenSaver with XSecureLock for the lock screen in Lubuntu 22.04</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/08/08/replacing-xscreensaver-with-xsecurelock-for-the-lock-screen-in-lubuntu-22-04/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6707</id>
		<updated>2024-08-09T09:13:00Z</updated>
		<published>2024-08-08T23:03:12Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Desktops &amp; Window Managers" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Lubuntu Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="lockscreen" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Lubuntu" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="screensaver" />
		<summary type="html">LXQt in Lubuntu 22.04 uses XScreenSaver to provide both the screen saver and lock screen, and XScreenSaver appears to be tightly integrated with LXQt. My family had the following configuration for the screensaver and for session locking in their individual user accounts on the family desktop computer: 1. XScreenSaver was installed by default in Lubuntu [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/08/08/replacing-xscreensaver-with-xsecurelock-for-the-lock-screen-in-lubuntu-22-04/#comments" ns0:count="0" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2024/08/08/replacing-xscreensaver-with-xsecurelock-for-the-lock-screen-in-lubuntu-22-04/feed/atom/" ns0:count="0" />
			<total>0</total>
			</entry>
		<entry>
        <title>How to setup WeeChat for IRC</title>
        <link href="https://thinkmoult.com/setup-weechat-irc.html" />
        <id>https://thinkmoult.com/setup-weechat-irc.html</id>
        <updated>2024-05-14</updated>
        <summary>How to setup WeeChat to connect to IRC chatrooms and stay online 24/7 with a relay server.</summary>
        <content type="html">

&lt;p&gt;&lt;a href="https://weechat.org/"&gt;WeeChat&lt;/a&gt; is an excellent extensible chat client. It
looks like this:&lt;/p&gt;
&lt;p&gt;&lt;img alt="A picture of weechat" src="https://thinkmoult.com/assets/weechat.png"&gt;&lt;/p&gt;
&lt;p&gt;Weechat is highly configurable. It's main purpose is to connect to online &lt;a href="https://simple.wikipedia.org/wiki/Internet_Relay_Chat"&gt;IRC
chatrooms&lt;/a&gt;. IRC
chatrooms are one of the last bastions of the democratised, wild early internet
prior to the proliferation of commercialised walled gardens that most people
live in nowadays.&lt;/p&gt;
&lt;p&gt;It also connects to other chat protocols like Matrix. If your friends have been
tempted by emojis, image attachments, and other luxuries, you can still
participate nominally in their chats.&lt;/p&gt;
&lt;p&gt;One of the features of IRC is that it is ephemeral. When you join a chatroom,
you will not see any messages that were posted prior to you joining. When you
leave, you will not receive any messages until you join the chatroom again. So
when you disconnect, you're really disconnecting! Nobody can contact you.&lt;/p&gt;
&lt;p&gt;If this dosen't appeal to you, there are a number of strategies to retain chat
history. The easiest option is to configure WeeChat to store chat logs and
replay those chat logs when you reconnect. You'll still miss messages that
occur when you're offline, but if you're online almost 24/7, this is not much
of a concern.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# How many lines of message history to remember
/set logger.look.backlog_max_number 5000

# How many lines of message history to show when you rejoin
/set logger.look.backlog 5000

# Remember the message history ... in colour!
# Otherwise you'll only see text, and not colours that distinguish between different usernames.
/set logger.file.color_lines on
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Even if you set this up, you'll probably have some devices that aren't
connected all the time. It'll be nice to have all devices share the same
username and see the same messages at the same time. You'll need to figure out
how to reliably be online 24/7 from a "server" and to share the same session
across any "client".&lt;/p&gt;
&lt;p&gt;There are a myriad of solutions to this, including running a
&lt;a href="https://wiki.znc.in/ZNC"&gt;ZNC&lt;/a&gt; or &lt;a href="https://github.com/psybnc/psybnc"&gt;psyBNC&lt;/a&gt;
bouncer, self-hosting &lt;a href="https://thelounge.chat/"&gt;TheLounge&lt;/a&gt; as a modern
interface, or using a service like &lt;a href="https://www.irccloud.com/"&gt;IRCCloud&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In this article, we'll focus on using a WeeChat relay.&lt;/p&gt;
&lt;h2&gt;What is a WeeChat relay?&lt;/h2&gt;
&lt;p&gt;A relay is another client-server solution to keeping you connected 24/7.
Instead of your IRC client connected directly to an IRC server, it connects
first to a WeeChat relay on some external server. In turn, the WeeChat relay
connects to the IRC server.&lt;/p&gt;
&lt;p&gt;You'll need a server. You can get a Virtual Private Server (VPS) for about $5
dollars per month. It's worth it!&lt;/p&gt;
&lt;h2&gt;How to setup a WeeChat relay&lt;/h2&gt;
&lt;p&gt;The WeeChat relay server is provided by WeeChat itself. After installing
WeeChat on your server, run it inside &lt;code&gt;tmux&lt;/code&gt; and then connect to an IRC server
as usual. You can add as many servers as you want, but for now let's just add
&lt;a href="https://libera.chat/"&gt;Libera.Chat&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/server add libera irc.libera.chat
/set irc.server.libera.autoconnect on
/set irc.server.libera.autojoin_dynamic on
/set irc.server.libera.nicks &amp;quot;YourNickname&amp;quot;
/connect libera
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now let's set up a relay. It's pretty clear in the &lt;a href="https://weechat.org/files/doc/weechat/stable/weechat_user.en.html#relay"&gt;official WeeChat relay
documentation&lt;/a&gt;
but let's work through it together.&lt;/p&gt;
&lt;p&gt;To begin with, you need to have a certificate for TLS. There are detailed
instructions on &lt;a href="https://glowing-bear.org/"&gt;Glowing-Bear&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you just want your own self signed certificate (which nobody but yourself
will trust), you can do:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ mkdir -p ~/.config/weechat/tls
$ cd ~/.config/weechat/tls
$ openssl req -nodes -newkey rsa:2048 -keyout relay.pem -x509 -days 365 -out relay.pem
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now back inside WeeChat on your server, setup a password for your relay, and
load the certificate you generated.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/set relay.network.password &amp;quot;MY_PASSWORD&amp;quot;
/relay tlscertkey
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There are two types of relay protocols WeeChat supports. One is called &lt;code&gt;irc&lt;/code&gt;,
which relays IRC channels. Another is called (confusingly) &lt;code&gt;weechat&lt;/code&gt;, which
relays ... WeeChat itself. Sound confusing? Let's try again.&lt;/p&gt;
&lt;p&gt;WeeChat allows external clients to connect via two protocols in its relay
plugin:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;irc&lt;/code&gt;: any IRC client can connect (including WeeChat itself running on
   another computer). It sends IRC information to these clients.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;weechat&lt;/code&gt;: only specific clients that support the &lt;code&gt;weechat&lt;/code&gt; protocol can
   connect. They can see what WeeChat sees and send messages, but not much
   else. They can't join or leave channels and so on.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that WeeChat itself &lt;a href="https://github.com/weechat/weechat/issues/369"&gt;cannot connect to a WeeChat
relay&lt;/a&gt;. If this sounds like a
strange state of affairs, that's because it is. It's a known issue and it's
being solved. There is &lt;a href="https://specs.weechat.org/specs/2023-005-relay-http-rest-api.html"&gt;a new API
relay&lt;/a&gt;. The
goal with API protocol is to deprecate and replace the &lt;code&gt;weechat&lt;/code&gt; protocol (&lt;a href="https://github.com/weechat/weechat/issues/2066"&gt;see
issue tracker&lt;/a&gt;). You can test
out the new API relay functionality in WeeChat 4.2.2 onwards.&lt;/p&gt;
&lt;p&gt;But for now, most people aren't on WeeChat 4.2.2 yet, so let's enable both
relay protocols on two different ports:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/relay add tls.irc 8000
/relay add weechat 9000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;That's it! Your relay is setup!&lt;/p&gt;
&lt;h2&gt;How to connect to a WeeChat relay&lt;/h2&gt;
&lt;p&gt;Now back on your client computer, launch WeeChat. Let's get WeeChat connected
to the relay by adding a IRC server as usual ... except that the IRC server
address is the IP or domain name of your relay and uses the 8000 port. To
specify which server this is actually connecting to, you specify the server
name in the connection password as a prefix. For example, to connect to the
&lt;code&gt;libera&lt;/code&gt; server we added earlier, we'd prefix the password with &lt;code&gt;libera:&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Because you generated your own certificate, you can either set the
&lt;code&gt;tls_fingerprint&lt;/code&gt; manually or disable &lt;code&gt;tls_verify&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Then just connect as usual :)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/server add libera YOUR_RELAY_IP_OR_DOMAIN/8000
/set irc.server.libera.password &amp;quot;libera:MY_PASSWORD&amp;quot;
/set irc.server.libera.tls_verify off
/connect libera
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you have an Android phone, an excellent client is
&lt;a href="https://f-droid.org/packages/com.ubergeek42.WeechatAndroid/"&gt;Weechat-Android&lt;/a&gt;
available on F-Droid. It speaks the &lt;code&gt;weechat&lt;/code&gt; relay protocol, so just connect
to &lt;code&gt;YOUR_RELAY_IP_OR_DOMAIN&lt;/code&gt; on port &lt;code&gt;9000&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you want to connect from a browser on any other device, you can use &lt;a href="https://glowing-bear.org/"&gt;Glowing
Bear&lt;/a&gt; (if you have a self signed certificate, either
self host or use the &lt;a href="http://glowing-bear.org/"&gt;insecure&lt;/a&gt; version if you really
don't care, it's a public chatroom anyway).&lt;/p&gt;
        </content>
    </entry>
    <entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">PID file path discrepancy for the clamd service in Gentoo Linux</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/05/07/pid-file-path-discrepancy-for-the-clamd-service-in-gentoo-linux/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6703</id>
		<updated>2024-05-07T18:10:22Z</updated>
		<published>2024-05-07T18:10:21Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Gentoo Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="anti-virus" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="antivirus" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="ClamAV" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="OpenRC" />
		<summary type="html">Back in December I noticed that the OpenRC init script for clamd in Gentoo Linux reported the clamd service status as &amp;#8216;crashed&amp;#8217;, when in fact it was still running (I raised Gentoo Linux Bug Report 921088 to report this). The issue arises because the init script (/etc/init.d/clamd) installed by the clamav ebuild specifies the PID [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/05/07/pid-file-path-discrepancy-for-the-clamd-service-in-gentoo-linux/#comments" ns0:count="1" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2024/05/07/pid-file-path-discrepancy-for-the-clamd-service-in-gentoo-linux/feed/atom/" ns0:count="1" />
			<total>1</total>
			</entry>
		<entry>
        <title>Open source architecture, engineering, and construction chatroom</title>
        <link href="https://thinkmoult.com/open-source-architecture-engineering-construction-chatroom.html" />
        <id>https://thinkmoult.com/open-source-architecture-engineering-construction-chatroom.html</id>
        <updated>2024-05-04</updated>
        <summary>Find, network and chat with other architects online in the Open Source Architecture Matrix chatroom and IRC channel.</summary>
        <content type="html">

&lt;p&gt;The architecture, engineering, and construction industry does not have a large
online chatroom culture, unlike the traditional open source software
communities. Whereas thousands of open source enthusiasts would connect
traditionally to chatroom protocols like IRC to discuss technical topics about
software 24/7, these terms are largely foreign to the AEC crowd. &lt;/p&gt;
&lt;p&gt;Nowadays, more people are familiar with chatrooms like Slack, Discord, or
Microsoft Teams. The culture across these chatroom platforms are very
different, and it would be a shame to have a future where the culture of IRC
chatrooms didn't exist or weren't available for the AEC industry.&lt;/p&gt;
&lt;h2&gt;What is IRC?&lt;/h2&gt;
&lt;p&gt;IRC is an online chatroom system. Just like there are many email providers out
there, there are many chatroom providers, providing rooms (called channels)
where you can chat about various topics. It is usually community moderated and
managed. It is heavily used by open source enthusiasts, with popular providers
being Freenode, and now, &lt;a href="https://libera.chat/"&gt;Libera.Chat&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It is very old and very simple - these are strengths, not weaknesses for those
who enjoy the "KISS" principle or love no-frills, text-heavy interfaces. Don't
expect emojis, image attachments, video calls, games, or other gimmicks.&lt;/p&gt;
&lt;p&gt;That said, IRC is not for everyone. It's downright scary to many, especially
those brought up in graphical environments in the AEC industry.&lt;/p&gt;
&lt;h2&gt;Growing a small community&lt;/h2&gt;
&lt;p&gt;I used to lurk in the hopes of meeting another architect in the &lt;code&gt;#architect&lt;/code&gt;
IRC channel hosted by Freenode. Occasionally someone would come but never stay,
and the original channel founder left and hasn't been back for a year or so.
In October 2013, I registered &lt;code&gt;##architect&lt;/code&gt; (the double hash prefix due to
Freenode's channel rules) and lurked yet again. I wrote a blog post, and
hoped other architects might notice and pop in.&lt;/p&gt;
&lt;p&gt;A few trickled in but this never really grew. In 2019, the Open Source
Architecture community was launched (OSArch), and along with it a forum. The
channel was renamed to &lt;code&gt;#osarch&lt;/code&gt; and the patronage grew to about 20 people or
so.&lt;/p&gt;
&lt;p&gt;Growth of an organic community is a bit difficult to measure. It's not really
about the number of people, but about the quality of contribution. There are a
number of channels which exhibit behaviours like people joining and leaving as
if it were a free helpdesk, or only asking for help but never helping in
return.&lt;/p&gt;
&lt;p&gt;In 2021, the Freenode IRC server experienced &lt;a href="https://en.wikipedia.org/wiki/Freenode#Ownership_change_and_conflict"&gt;a community
schism&lt;/a&gt;.
We re-evaluated which chatroom system we would support, and ended up migrating
from the IRC system to another open source chatroom system called Matrix. In
contrast, Matrix is a lot more complex than IRC, but also a lot more friendly.
It offers all the modern features of emojis, images, and more that people might
expect.&lt;/p&gt;
&lt;p&gt;This was a great decision. One of the biggest advantages of Matrix is that it
retains your message history. In IRC, if you left the chatroom then joined
again, you would not be able to scroll up and see your older messages. The
beauty of open source protocols is that they can generally be connected to one
another. For example, we also migrated from Freenode to Libera.Chat and
supported both Matrix and IRC concurrently. This allowed users to choose what
they preferred - a modern, rich interface, or a simple, no-frills interface.&lt;/p&gt;
&lt;p&gt;In August 2023, the main community-hosted bridge joining IRC and Matrix was
shutdown. This was unfortunate and meant until we were able to provide our own
bridge, users had to choose between IRC or Matrix. Matrix won :) It wasn't
until mid-2024 that a new bridge was setup.&lt;/p&gt;
&lt;p&gt;The user count grew to well over 200 users. But more importantly, I can speak
from experience that the culture that has emerged is one very reminiscent of
traditional IRC chatrooms - helpful, community-driven conversation, (not
helpdesk support or heavily corporate-moderated), and full of life 24/7.&lt;/p&gt;
&lt;h2&gt;How do I join and begin chatting?&lt;/h2&gt;
&lt;p&gt;The easiest way to join is to launch the chatroom at
&lt;a href="https://osarch.org/chat"&gt;OSArch/Chat&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I recommend installing &lt;a href="https://element.io/"&gt;Element&lt;/a&gt; on your phone or computer
to chat using Matrix. If you want to use IRC instead, I like using
&lt;a href="https://weechat.org/"&gt;Weechat&lt;/a&gt;.&lt;/p&gt;
        </content>
    </entry>
    <entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Upgrading the Portage Profile to 23.0 in Gentoo Linux (OpenRC) and merging /usr</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/05/03/upgrading-the-portage-profile-to-23-0-in-gentoo-linux-openrc-and-merging-usr/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6695</id>
		<updated>2024-05-03T15:32:22Z</updated>
		<published>2024-05-03T12:05:54Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Gentoo Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Portage" />
		<summary type="html">This week I finally had some spare time to upgrade the Gentoo Linux Portage Profile from 17.1 to 23.0 (see Gentoo Linux News item of 22 March 2024 titled &amp;#8216;Profile upgrade to version 23.0 available&amp;#8216;) in my two Gentoo Linux installations: one Stable (amd64), the other Testing (~amd64). Both installations use OpenRC and therefore they [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/05/03/upgrading-the-portage-profile-to-23-0-in-gentoo-linux-openrc-and-merging-usr/#comments" ns0:count="1" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2024/05/03/upgrading-the-portage-profile-to-23-0-in-gentoo-linux-openrc-and-merging-usr/feed/atom/" ns0:count="1" />
			<total>1</total>
			</entry>
		<entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Installing TrueType font files in Lubuntu 22.04</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/04/23/installing-truetype-font-files-in-lubuntu-22-04/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6691</id>
		<updated>2024-04-23T11:15:38Z</updated>
		<published>2024-04-23T11:15:38Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Graphics" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Lubuntu Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="graphics" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="GUI" />
		<summary type="html">Yesterday I looked through some old CDROMs with a view to disposing of them. I came across one from 2001 from a company called Focus Multimedia Limited, titled &amp;#8216;4,000 fonts &amp;#8211; A comprehensive collection of stylish and professional fonts&amp;#8217; for Windows 95 / 98 / Me / NT / 2000 / XP. It is still [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/04/23/installing-truetype-font-files-in-lubuntu-22-04/#comments" ns0:count="0" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2024/04/23/installing-truetype-font-files-in-lubuntu-22-04/feed/atom/" ns0:count="0" />
			<total>0</total>
			</entry>
		<entry>
        <title>Which IFC class should I use?</title>
        <link href="https://bonsaibim.org/search-ifc-class.html" />
        <id>https://bonsaibim.org/search-ifc-class.html</id>
        <updated>2024-04-06</updated>
        <summary>Physical objects in an IFC file must be categorised to a class of object, which has implications on what properties are expected to be found on the object. This tool lets you type what type of object you have, and it will try and find the right IFC class for you.</summary>
    </entry>
    <entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Migrating the ebuild repository locations in my Gentoo Linux installations to the current defaults</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/01/08/migrating-the-ebuild-repository-locations-in-my-gentoo-linux-installations-to-the-current-defaults/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6685</id>
		<updated>2024-01-08T21:06:24Z</updated>
		<published>2024-01-08T19:35:40Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Gentoo Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" />
		<summary type="html">I installed Gentoo Linux on my two laptops in 2010 and 2015 respectively, long before the distribution&amp;#8217;s developers changed the default locations of the repositories for ebuilds and packages in an installation. In 2023 I modified the two installations to use an eselect module instead of the superseded Layman overlay manager (see my earlier post [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2024/01/08/migrating-the-ebuild-repository-locations-in-my-gentoo-linux-installations-to-the-current-defaults/#comments" ns0:count="0" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2024/01/08/migrating-the-ebuild-repository-locations-in-my-gentoo-linux-installations-to-the-current-defaults/feed/atom/" ns0:count="0" />
			<total>0</total>
			</entry>
		<entry>
        <title>Technical demonstrations of Native IFC authoring with free software - buildingSMART UK+I</title>
        <link href="https://www.youtube.com/watch?v=Ooh05WF__80" />
        <id>https://www.youtube.com/watch?v=Ooh05WF__80</id>
        <updated>2023-12-08</updated>
        <summary>Practical demonstrations of native IFC authoring already used on live projects with the free software BlenderBIM Add-on presented at a buildingSMART UK+I meetup in 2023.</summary>
    </entry>
    <entry>
        <title>IFC show and tell</title>
        <link href="https://www.youtube.com/watch?v=h2Rv9iu7yDk" />
        <id>https://www.youtube.com/watch?v=h2Rv9iu7yDk</id>
        <updated>2023-11-09</updated>
        <summary>A minor update to "Introduction to OpenBIM, Native IFC, and Open Source AEC" presented to BIMForum US.</summary>
    </entry>
    <entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Investigating an OpenVPN connection problem in Gentoo Linux and Lubuntu 22.04 but not in Android 13</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2023/10/03/investigating-an-openvpn-connection-problem-in-gentoo-linux-and-lubuntu-22-04-but-not-in-android-13/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6669</id>
		<updated>2023-10-04T13:39:56Z</updated>
		<published>2023-10-03T15:24:31Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Android" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Desktops &amp; Window Managers" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Gentoo Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Internet" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Lubuntu Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Networks" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Wired" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Wireless" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="GUI" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="KDE" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="laptop" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Lubuntu" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="networks" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="OpenSSL" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="OpenVPN" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="TLS" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="VPN" />
		<summary type="html">Back in 2020 I successfully used OpenVPN to access a remote server from my laptop and from my smartphone. Fast forward to 2023 and I needed to use OpenVPN again to access the same remote server. I could again access the remote server when connecting from my smartphone, now running Android 13, using the OpenVPN [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2023/10/03/investigating-an-openvpn-connection-problem-in-gentoo-linux-and-lubuntu-22-04-but-not-in-android-13/#comments" ns0:count="0" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2023/10/03/investigating-an-openvpn-connection-problem-in-gentoo-linux-and-lubuntu-22-04-but-not-in-android-13/feed/atom/" ns0:count="0" />
			<total>0</total>
			</entry>
		<entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Layman overlay manager in Gentoo Linux superseded by eselect module</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2023/07/04/layman-overlay-manager-in-gentoo-linux-superseded-by-eselect-module/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6662</id>
		<updated>2023-07-04T12:10:56Z</updated>
		<published>2023-07-04T12:10:56Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Gentoo Linux" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="Linux" />
		<summary type="html">Last week, when upgrading the world packages on my machines running Gentoo Linux, I noticed that the package for the Layman overlay manager app-portage/layman is masked for removal: root # eix -I layman [?] app-portage/layman Available versions: [M]2.4.3^t [M]**9999*l^t {cvs darcs g-sorcery +git gpg mercurial sqlite squashfs subversion sync-plugin-portage test PYTHON_TARGETS="pypy3 python3_10 python3_11"} Installed versions: [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2023/07/04/layman-overlay-manager-in-gentoo-linux-superseded-by-eselect-module/#comments" ns0:count="1" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2023/07/04/layman-overlay-manager-in-gentoo-linux-superseded-by-eselect-module/feed/atom/" ns0:count="1" />
			<total>1</total>
			</entry>
		<entry>
        <title>NetHack damage calculator</title>
        <link href="https://thinkmoult.com/nethack-damage-calculator.html" />
        <id>https://thinkmoult.com/nethack-damage-calculator.html</id>
        <updated>2023-06-21</updated>
        <summary>This calculator for the game NetHack helps compare damage outputs from weapons, spells, and wands. It's shown in both graph and table form.</summary>
        <content type="html">
&lt;style&gt;
html { padding: 10px; }
body { max-width: 600px; margin-left: auto; margin-right: auto; }
hr { border: 0px; border-top: 1px solid #eee; }
fieldset { border: 1px solid #eee; margin: 10px; }
legend { font-weight: bold; }
table { border: 1px solid #eee; margin: 10px; border-collapse: collapse; }
thead tr { border-bottom: 1px solid #eee; }
th, td { padding: 5px; }
input[type="number"] { width: 50px; }
input, select { border: 1px solid #eee; padding: 5px; }
label { text-transform: capitalize; }
&lt;/style&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.0.2/chart.min.js"&gt;&lt;/script&gt;

&lt;p&gt;
    So, what causes the most amount of whomp in &lt;a href="https://thinkmoult.com/nethack-illustrated-guide-mazes-of-menace.html"&gt;NetHack&lt;/a&gt;?
&lt;/p&gt;
&lt;form&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Hero&lt;/legend&gt;
        &lt;label for="role"&gt;Role&lt;/label&gt;
        &lt;select id="role"&gt;
            &lt;option value="Archeologist"&gt;Archeologist&lt;/option&gt;
            &lt;option value="Barbarian"&gt;Barbarian&lt;/option&gt;
            &lt;option value="Caveman"&gt;Caveman&lt;/option&gt;
            &lt;option value="Healer"&gt;Healer&lt;/option&gt;
            &lt;option value="Knight"&gt;Knight&lt;/option&gt;
            &lt;option value="Monk"&gt;Monk&lt;/option&gt;
            &lt;option value="Priest"&gt;Priest&lt;/option&gt;
            &lt;option value="Ranger"&gt;Ranger&lt;/option&gt;
            &lt;option value="Rogue"&gt;Rogue&lt;/option&gt;
            &lt;option value="Samurai"&gt;Samurai&lt;/option&gt;
            &lt;option value="Tourist"&gt;Tourist&lt;/option&gt;
            &lt;option value="Valkyrie"&gt;Valkyrie&lt;/option&gt;
            &lt;option value="Wizard"&gt;Wizard&lt;/option&gt;
        &lt;/select&gt;
        &lt;label for="race"&gt;Race&lt;/label&gt;
        &lt;select id="race"&gt;
            &lt;option value="Human"&gt;Human&lt;/option&gt;
            &lt;option value="Elf"&gt;Elf&lt;/option&gt;
            &lt;option value="Dwarf"&gt;Dwarf&lt;/option&gt;
            &lt;option value="Gnome"&gt;Gnome&lt;/option&gt;
            &lt;option value="Orc"&gt;Orc&lt;/option&gt;
        &lt;/select&gt;
        &lt;hr /&gt;
        &lt;label for="xl"&gt;XL&lt;/label&gt;
        &lt;input id="xl" type="number" value="10" /&gt;
        &lt;label for="strength"&gt;Str&lt;/label&gt;
        &lt;select id="strength"&gt;
            &lt;option value="-2,-1"&gt;3-5 (-2 hit, -1 dam)&lt;/option&gt;
            &lt;option value="-1,0"&gt;6-7 (-1 hit, 0 dam)&lt;/option&gt;
            &lt;option value="0,0"&gt;7-15 (0 hit, 0 dam)&lt;/option&gt;
            &lt;option value="0,1"&gt;16 (0 hit, +1 dam)&lt;/option&gt;
            &lt;option value="1,1"&gt;17 (+1 hit, +1 dam)&lt;/option&gt;
            &lt;option value="1,2" selected&gt;18 (+1 hit, +2 dam)&lt;/option&gt;
            &lt;option value="1,3"&gt;18/01-18/50 (+1 hit, +3 dam)&lt;/option&gt;
            &lt;option value="2,3"&gt;18/51-18/75 (+2 hit, +3 dam)&lt;/option&gt;
            &lt;option value="2,4"&gt;18/76-18/90 (+2 hit, +4 dam)&lt;/option&gt;
            &lt;option value="2,5"&gt;18/91-18/99 (+2 hit, +5 dam)&lt;/option&gt;
            &lt;option value="3,6"&gt;18/**-25 (+3 hit, +6 dam)&lt;/option&gt;
        &lt;/select&gt;
        &lt;label for="dex"&gt;Dex&lt;/label&gt;
        &lt;input id="dex" type="number" value="10" /&gt;
        &lt;label for="int"&gt;Int&lt;/label&gt;
        &lt;input id="int" type="number" value="15" /&gt;
        &lt;label for="luck"&gt;Luck&lt;/label&gt;
        &lt;select id="luck"&gt;
            &lt;option value="-10"&gt;Extremely unlucky (-10)&lt;/option&gt;
            &lt;option value="-7"&gt;Very unlucky (-7)&lt;/option&gt;
            &lt;option value="-2"&gt;Unlucky (2)&lt;/option&gt;
            &lt;option value="0" selected&gt;Zero&lt;/option&gt;
            &lt;option value="2"&gt;Lucky (2)&lt;/option&gt;
            &lt;option value="7"&gt;Very lucky (7)&lt;/option&gt;
            &lt;option value="10"&gt;Extremely lucky (10)&lt;/option&gt;
        &lt;/select&gt;
        &lt;hr /&gt;
        &lt;label for="strength-ring-enchantment"&gt;Strength ring enchantment&lt;/label&gt;
        &lt;input id="strength-ring-enchantment" type="number" value="0" /&gt;
        &lt;label for="accuracy-ring-enchantment"&gt;Accuracy ring enchantment&lt;/label&gt;
        &lt;input id="accuracy-ring-enchantment" type="number" value="0" /&gt;
        &lt;hr /&gt;
        &lt;label for="wand-charges"&gt;Wand charges&lt;/label&gt;
        &lt;input id="wand-charges" type="number" value="4" /&gt;
        &lt;label for="is-riding"&gt;Riding&lt;/label&gt;
        &lt;input id="is-riding" type="checkbox" value="true" /&gt;
        &lt;label for="has-magic-mirror"&gt;Magic mirror&lt;/label&gt;
        &lt;input id="has-magic-mirror" type="checkbox" value="true" /&gt;
        &lt;label for="has-body-armor"&gt;Body armor&lt;/label&gt;
        &lt;input id="has-body-armor" type="checkbox" value="true" /&gt;
    &lt;/fieldset&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Skills&lt;/legend&gt;
        &lt;input type="button" id="reset-skills" value="Set all unskilled" /&gt;
        &lt;input type="button" id="max-skills" value="Max all skills" /&gt;
        &lt;hr /&gt;
        &lt;div id="skills"&gt;
        &lt;/div&gt;
    &lt;/fieldset&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Weapon modifications&lt;/legend&gt;
        &lt;label for="enchantment"&gt;Enchantment&lt;/label&gt;
        &lt;input id="enchantment" type="number" value="0" /&gt;
        &lt;label for="is-blessed"&gt;Blessed&lt;/label&gt;
        &lt;input id="is-blessed" type="checkbox" value="true" /&gt;
        &lt;label for="is-poisoned"&gt;poisoned&lt;/label&gt;
        &lt;input id="is-poisoned" type="checkbox" value="true" /&gt;
        &lt;label for="erosion"&gt;Erosion&lt;/label&gt;
        &lt;select id="erosion"&gt;
            &lt;option value="undamaged"&gt;undamaged&lt;/option&gt;
            &lt;option value="damaged"&gt;damaged&lt;/option&gt;
            &lt;option value="very damaged"&gt;very damaged&lt;/option&gt;
            &lt;option value="thoroughly damaged"&gt;thoroughly damaged&lt;/option&gt;
        &lt;/select&gt;
    &lt;/fieldset&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Versus monster&lt;/legend&gt;
        &lt;label for="size"&gt;Size&lt;/label&gt;
        &lt;select id="size"&gt;
            &lt;option value="small"&gt;tiny, small, medium (62% - mostly early to mid game)&lt;/option&gt;
            &lt;option value="large"&gt;large, huge, gigantic (38% - late game incl. major demons)&lt;/option&gt;
        &lt;/select&gt;
        &lt;label for="type"&gt;Type&lt;/label&gt;
        &lt;select id="type"&gt;
            &lt;option value="other"&gt;any regular monster&lt;/option&gt;
            &lt;option value="shade"&gt;shade&lt;/option&gt;
            &lt;option value="undead"&gt;undead / vampire (incl. shapeshifted forms)&lt;/option&gt;
            &lt;option value="demon"&gt;demon&lt;/option&gt;
            &lt;option value="dragon"&gt;dragon&lt;/option&gt;
            &lt;option value="troll"&gt;troll&lt;/option&gt;
            &lt;option value="giant"&gt;giant&lt;/option&gt;
            &lt;option value="ogre"&gt;ogre&lt;/option&gt;
            &lt;option value="orcish"&gt;orcish&lt;/option&gt;
            &lt;option value="werecreature"&gt;werecreature&lt;/option&gt;
            &lt;option value="wooden"&gt;wooden&lt;/option&gt;
            &lt;option value="cross-aligned"&gt;cross-aligned&lt;/option&gt;
        &lt;/select&gt;
        &lt;label for="ac"&gt;AC&lt;/label&gt;
        &lt;input id="ac" type="number" value="7" /&gt;
        &lt;hr /&gt;
        &lt;label for="is-silver-hating"&gt;Hates silver&lt;/label&gt;
        &lt;input id="is-silver-hating" type="checkbox" value="true" /&gt;
        &lt;label for="is-fire-resistant"&gt;Fire resistant&lt;/label&gt;
        &lt;input id="is-fire-resistant" type="checkbox" value="true" /&gt;
        &lt;label for="is-cold-resistant"&gt;Cold resistant&lt;/label&gt;
        &lt;input id="is-cold-resistant" type="checkbox" value="true" /&gt;
        &lt;label for="is-magic-resistant"&gt;Magic resistant&lt;/label&gt;
        &lt;input id="is-magic-resistant" type="checkbox" value="true" /&gt;
        &lt;hr /&gt;
        &lt;label for="is-fleeing"&gt;Is fleeing&lt;/label&gt;
        &lt;input id="is-fleeing" type="checkbox" value="true" /&gt;
    &lt;/fieldset&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Filtering&lt;/legend&gt;
        &lt;label for="meelee-weapons"&gt;Meelee weapons&lt;/label&gt;
        &lt;input id="meelee-weapons" type="checkbox" value="true" checked /&gt;
        &lt;label for="ranged-weapons"&gt;Ranged weapons&lt;/label&gt;
        &lt;input id="ranged-weapons" type="checkbox" value="true" checked /&gt;
        &lt;label for="artifact-weapons"&gt;Artifact weapons&lt;/label&gt;
        &lt;input id="artifact-weapons" type="checkbox" value="true" checked /&gt;
        &lt;hr /&gt;
        &lt;label for="two-handed-weapons"&gt;Two-handed weapons&lt;/label&gt;
        &lt;input id="two-handed-weapons" type="checkbox" value="true" checked /&gt;
        &lt;label for="twoweapon-combos"&gt;Twoweapon combos&lt;/label&gt;
        &lt;input id="twoweapon-combos" type="checkbox" value="true" checked /&gt;
        &lt;hr /&gt;
        &lt;label for="wands"&gt;Wands&lt;/label&gt;
        &lt;input id="wands" type="checkbox" value="true" checked /&gt;
        &lt;label for="broken-wands"&gt;Broken wands&lt;/label&gt;
        &lt;input id="broken-wands" type="checkbox" value="true" /&gt;
        &lt;label for="spells"&gt;Spells&lt;/label&gt;
        &lt;input id="spells" type="checkbox" value="true" checked /&gt;
        &lt;hr /&gt;
        &lt;label for="top-10"&gt;Top 10&lt;/label&gt;
        &lt;input id="top-10" type="checkbox" value="true" checked /&gt;
        &lt;label for="to-hit"&gt;Consider To-Hit&lt;/label&gt;
        &lt;input id="to-hit" type="checkbox" value="true" checked /&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;
&lt;canvas id="canvas"&gt;&lt;/canvas&gt;
&lt;table id="damage-table"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Type&lt;/th&gt;&lt;th&gt;Hit&lt;/th&gt;&lt;th&gt;Min&lt;/th&gt;&lt;th&gt;Avg&lt;/th&gt;&lt;th&gt;Max&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;
    &lt;small&gt;
        Instakill opportunities (cockatrice, Vorpal Blade, wand of death, etc) are not considered. Side effects like item destruction, magical effects, instrinsics, are also not considered. Splash damage is not considered (e.g. we only consider the center square of a fireball, or a single monster for Cleaver, etc). Artifacts are set to Basic skill level as a minimum. Monster MR is not considered. You are assumed to be not burdened, engulfed, stunned, confused, or paralysed. Where to-hit is a range, the average is used for simplicity.
    &lt;/small&gt;
&lt;/p&gt;
&lt;script type="text/javascript"&gt;
let skills = ["dagger", "knife", "axe", "pick-axe", "short sword", "broadsword", "long sword", "two-handed sword", "saber", "club", "mace", "morning star", "flail", "hammer", "quarterstaff", "polearms", "spear", "trident", "lance", "bow", "sling", "crossbow", "dart", "shuriken", "boomerang", "whip", "unicorn horn", "two weapon combat", "attack"]
let roleSkills = {
    Archeologist: {"Basic": ["dagger", "knife", "short sword", "dart", "two weapon combat", "attack"], "Skilled": ["club", "quarterstaff", "sling", "unicorn horn"], "Expert": ["pick-axe", "saber", "boomerang", "whip"]},
    Barbarian: {"Basic": ["dagger", "flail", "quarterstaff", "bow", "two weapon combat", "attack"], "Skilled": ["pick-axe", "broadsword", "long sword", "saber", "club", "mace", "morning star", "spear", "trident"], "Expert": ["axe", "short sword", "two-handed sword", "hammer"]},
    Caveman: {"Basic": ["dagger", "pick-axe", "morning star", "unicorn horn", "attack"], "Skilled": ["knife", "axe", "flail", "hammer", "polearms", "trident", "bow"], "Expert": ["club", "mace", "quarterstaff", "spear", "sling", "boomerang"]},
    Healer: {"Basic": ["saber", "mace", "polearms", "spear", "trident"], "Skilled": ["dagger", "short sword", "club", "sling", "shuriken"], "Expert": ["knife", "quarterstaff", "dart", "unicorn horn"]},
    Knight: {"Basic": ["dagger", "knife", "pick-axe", "club", "flail", "hammer", "trident", "bow"], "Skilled": ["axe", "short sword", "broadsword", "two-handed sword", "saber", "mace", "morning star", "polearms", "spear", "crossbow", "two weapon combat", "attack"], "Expert": ["long sword", "lance"]},
    Monk: {"Basic": ["quarterstaff", "spear", "crossbow", "shuriken", "attack"], "Skilled": [], "Expert": []},
    Priest: {"Basic": ["lance", "bow", "sling", "crossbow", "dart", "shuriken", "boomerang"], "Skilled": ["polearms", "spear", "trident", "unicorn horn"], "Expert": ["club", "mace", "morning star", "flail", "hammer", "quarterstaff"]},
    Ranger: {"Basic": ["pick-axe", "short sword", "morning star", "hammer", "quarterstaff", "trident", "whip"], "Skilled": ["knife", "axe", "flail", "polearms", "shuriken"], "Expert": ["dagger", "spear", "bow", "sling", "crossbow", "dart", "boomerang"]},
    Rogue: {"Basic": ["two-handed sword", "morning star", "flail", "hammer", "polearms", "spear"], "Skilled": ["broadsword", "long sword", "saber", "club", "mace", "shuriken"], "Expert": ["dagger", "knife", "short sword", "crossbow", "dart", "two weapon combat"]},
    Samurai: {"Basic": ["dagger", "saber", "quarterstaff", "attack"], "Skilled": ["knife", "broadsword", "flail", "polearms", "spear", "lance"], "Expert": ["short sword", "long sword", "two-handed sword", "bow", "shuriken", "two weapon combat"]},
    Tourist: {"Basic": ["axe", "pick-axe", "broadsword", "long sword", "two-handed sword", "mace", "morning star", "flail", "hammer", "quarterstaff", "polearms", "spear", "trident", "lance", "bow", "sling", "crossbow", "shuriken", "boomerang", "whip"], "Skilled": ["knife", "saber", "unicorn horn", "two weapon combat"], "Expert": ["dagger", "short sword", "dart"]},
    Valkyrie: {"Basic": ["saber", "quarterstaff", "trident", "sling", "attack"], "Skilled": ["pick-axe", "short sword", "broadsword", "polearms", "spear", "lance", "two weapon combat"], "Expert": ["dagger", "axe", "long sword", "two-handed sword", "hammer"]},
    Wizard: {"Basic": ["short sword", "mace", "spear", "trident", "shuriken"], "Skilled": ["knife", "axe", "club", "polearms", "sling"], "Expert": ["dagger", "quarterstaff", "dart", "attack"]},
};

let weapons = [
    { name: "orcish dagger", type: "dagger", sdam: "1d3", ldam: "1d3", hit: 2 },
    { name: "dagger", type: "dagger", sdam: "1d4", ldam: "1d3", hit: 2 },
    { name: "silver dagger", type: "dagger", sdam: "1d4", ldam: "1d3", isSilver: true, hit: 2 },
    { name: "athame", type: "dagger", sdam: "1d4", ldam: "1d3", hit: 2 },
    { name: "elven dagger", type: "dagger", sdam: "1d5", ldam: "1d3", hit: 2 },
    { name: "worm tooth", type: "knife", sdam: "1d2", ldam: "1d2", hit: 0 },
    { name: "knife", type: "knife", sdam: "1d3", ldam: "1d2", hit: 0 },
    { name: "stiletto", type: "knife", sdam: "1d3", ldam: "1d2", hit: 0 },
    { name: "scalpel", type: "knife", sdam: "1d3", ldam: "1d3", hit: 2 },
    { name: "crysknife", type: "knife", sdam: "1d10", ldam: "1d10", hit: 3 },
    { name: "axe", type: "axe", sdam: "1d6", ldam: "1d4", hit: 0 },
    { name: "battle-axe", type: "axe", sdam: "1d8", sbon: "1d4", ldam: "1d6", lbon: "2d4", isTwoHanded: true, hit: 0 },
    { name: "pick-axe", type: "pick-axe", sdam: "1d6", ldam: "1d3", hit: 0 },
    { name: "dwarvish mattock", type: "pick-axe", sdam: "1d12", ldam: "1d8", lbon: "2d6", isTwoHanded: true, hit: -1 },
    { name: "orcish short sword", type: "short sword", sdam: "1d5", ldam: "1d8", hit: 0 },
    { name: "short sword", type: "short sword", sdam: "1d6", ldam: "1d8", hit: 0 },
    { name: "dwarvish short sword", type: "short sword", sdam: "1d7", ldam: "1d8", hit: 0 },
    { name: "elven short sword", type: "short sword", sdam: "1d8", ldam: "1d8", hit: 0 },
    { name: "broadsword", type: "broadsword", sdam: "1d4", sbon: "1d4", ldam: "1d6", lbon: "1d1", hit: 0 },
    { name: "runesword", type: "broadsword", sdam: "1d4", sbon: "1d4", ldam: "1d6", lbon: "1d1", hit: 0 },
    { name: "elven broadsword", type: "broadsword", sdam: "1d6", sbon: "1d4", ldam: "1d6", lbon: "1d1", hit: 0 },
    { name: "long sword", type: "long sword", sdam: "1d8", ldam: "1d12", hit: 0 },
    { name: "katana", type: "long sword", sdam: "1d10", ldam: "1d12", hit: 1 },
    { name: "two-handed sword", type: "two-handed sword", sdam: "1d12", ldam: "1d6", lbon: "2d6", isTwoHanded: true, hit: 0 },
    { name: "tsurugi", type: "two-handed sword", sdam: "1d16", ldam: "1d8", lbon: "2d6", isTwoHanded: true, hit: 2 },
    { name: "scimitar", type: "saber", sdam: "1d8", ldam: "1d8", hit: 0 },
    { name: "silver saber", type: "saber", sdam: "1d8", ldam: "1d8", isSilver: true, hit: 0 },
    { name: "club", type: "club", sdam: "1d6", ldam: "1d3", hit: 0 },
    { name: "aklys", type: "club", sdam: "1d6", ldam: "1d3", hit: 0 },
    { name: "mace", type: "mace", sdam: "1d6", sbon: "1d1", ldam: "1d6", hit: 0 },
    { name: "morning star", type: "morning star", sdam: "1d4", sbon: "1d4", ldam: "1d6", lbon: "1d1", hit: 0 },
    { name: "flail", type: "flail", sdam: "1d6", sbon: "1d1", ldam: "1d4", lbon: "1d4", hit: 0 },
    { name: "grappling hook", type: "flail", sdam: "1d2", ldam: "1d6", hit: 0 },
    { name: "war hammer", type: "hammer", sdam: "1d4", sbon: "1d1", ldam: "1d4", hit: 0 },
    { name: "quarterstaff", type: "quarterstaff", sdam: "1d6", ldam: "1d6", isTwoHanded: true, hit: 0 },
    { name: "partisan", type: "polearms", sdam: "1d6", ldam: "1d6", lbon: "1d1", isTwoHanded: true, hit: 0 },
    { name: "fauchard", type: "polearms", sdam: "1d6", ldam: "1d8", isTwoHanded: true, hit: 0 },
    { name: "glaive", type: "polearms", sdam: "1d6", ldam: "1d10", isTwoHanded: true, hit: 0 },
    { name: "bec-de-corbin", type: "polearms", sdam: "1d8", ldam: "1d6", isTwoHanded: true, hit: 0 },
    { name: "spetum", type: "polearms", sdam: "1d6", sbon: "1d1", ldam: "1d6", lbon: "1d6", isTwoHanded: true, hit: 0 },
    { name: "lucern hammer", type: "polearms", sdam: "1d4", sbon: "1d4", ldam: "1d6", isTwoHanded: true, hit: 0 },
    { name: "guisarme", type: "polearms", sdam: "1d4", sbon: "1d4", ldam: "1d8", isTwoHanded: true, hit: 0 },
    { name: "ranseur", type: "polearms", sdam: "1d4", sbon: "1d4", ldam: "1d4", lbon: "1d4", isTwoHanded: true, hit: 0 },
    { name: "voulge", type: "polearms", sdam: "1d4", sbon: "1d4", ldam: "1d4", lbon: "1d4", isTwoHanded: true, hit: 0 },
    { name: "bill-guisarme", type: "polearms", sdam: "1d4", sbon: "1d4", ldam: "1d10", isTwoHanded: true, hit: 0 },
    { name: "bardiche", type: "polearms", sdam: "1d4", sbon: "1d4", ldam: "1d4", lbon: "2d4", isTwoHanded: true, hit: 0 },
    { name: "halberd", type: "polearms", sdam: "1d10", ldam: "1d6", lbon: "1d6", isTwoHanded: true, hit: 0 },
    { name: "orcish spear", type: "spear", sdam: "1d5", ldam: "1d8", hit: 0 },
    { name: "silver spear", type: "spear", sdam: "1d6", ldam: "1d8", isSilver: true, hit: 0 },
    { name: "elven spear", type: "spear", sdam: "1d7", ldam: "1d8", hit: 0 },
    { name: "dwarvish spear", type: "spear", sdam: "1d8", ldam: "1d8", hit: 0 },
    { name: "javelin", type: "spear", sdam: "1d6", ldam: "1d6", hit: 0 },
    { name: "trident", type: "trident", sdam: "1d6", ldam: "1d4", sbon: "1d1", lbon: "2d4", hit: 0 },
    { name: "lance", type: "lance", sdam: "1d6", ldam: "1d8", hit: 0 },
    { name: "orcish bow", type: "bow", sdam: "1d2", ldam: "1d2", hit: 0 },
    { name: "orcish arrow", type: "bow", sdam: "1d5", ldam: "1d6", isProjectile: true, hit: 0 },
    { name: "bow", type: "bow", sdam: "1d2", ldam: "1d2", hit: 0 },
    { name: "arrow", type: "bow", sdam: "1d6", ldam: "1d6", isProjectile: true, hit: 0 },
    { name: "elven bow", type: "bow", sdam: "1d2", ldam: "1d2", hit: 0 },
    { name: "elven arrow", type: "bow", sdam: "1d7", ldam: "1d6", isProjectile: true, hit: 0 },
    { name: "yumi", type: "bow", sdam: "1d2", ldam: "1d2", hit: 0 },
    { name: "ya", type: "bow", sdam: "1d7", ldam: "1d7", isProjectile: true, hit: 1 },
    { name: "silver arrow", type: "bow", sdam: "1d6", ldam: "1d6", isProjectile: true, isSilver: true, hit: 0 },
    { name: "sling", type: "sling", sdam: "1d2", ldam: "1d2", hit: 0 },
    { name: "flint stone", type: "sling", sdam: "1d6", ldam: "1d6", isProjectile: true, hit: 0 },
    { name: "crossbow", type: "crossbow", sdam: "1d2", ldam: "1d2", hit: 0 },
    { name: "crossbow bolt", type: "crossbow", sdam: "1d4", sbon: "1d1", ldam: "1d6", lbon: "1d1", isProjectile: true, hit: 0 },
    { name: "dart", type: "dart", sdam: "1d3", ldam: "1d2", isProjectile: true, hit: 0 },
    { name: "shuriken", type: "shuriken", sdam: "1d8", ldam: "1d6", isProjectile: true, hit: 2 },
    { name: "boomerang", type: "boomerang", sdam: "1d9", ldam: "1d9", isProjectile: true, hit: 0 },
    { name: "bullwhip", type: "whip", sdam: "1d2", ldam: "1d1", hit: 0 },
    { name: "rubber hose", type: "whip", sdam: "1d4", ldam: "1d3", hit: 0 },
    { name: "unicorn horn", type: "unicorn horn", sdam: "1d12", ldam: "1d12", isTwoHanded: true, hit: 1 },
];

let artifactWeapons = [
    { name: "Cleaver", type: "axe", sdam: "1d8", sbon: "1d4", ldam: "1d6", lbon: "2d4", abon: "1d6", isTwoHanded: true, hit: 0, ahit: 2 },
    { name: "Demonbane", type: "mace", sdam: "1d6", sbon: "1d1", ldam: "1d6", amon: "demon", hit: 0, ahit: 3 },
    { name: "Dragonbane", type: "broadsword", sdam: "1d4", sbon: "1d4", ldam: "1d6", lbon: "1d1", amon: "dragon", hit: 0, ahit: 3 },
    { name: "Excalibur", type: "long sword", sdam: "1d8", ldam: "1d12", abon: "1d10", hit: 0, ahit: 3 },
    { name: "Fire Brand", type: "long sword", sdam: "1d8", ldam: "1d12", atype: "fire", hit: 0, ahit: 3 },
    { name: "Frost Brand", type: "long sword", sdam: "1d8", ldam: "1d12", atype: "cold", hit: 0, ahit: 3 },
    { name: "Giantslayer", type: "long sword", sdam: "1d8", ldam: "1d12", amon: "giant", hit: 0, ahit: 3 },
    { name: "Grayswandir", type: "saber", sdam: "1d8", ldam: "1d8", isSilver: true, hit: 0, ahit: 3 },
    { name: "Grimtooth", type: "dagger", sdam: "1d3", ldam: "1d3", abon: "1d6", hit: 2, ahit: 1.5 },
    { name: "The Longbow of Diana", type: "bow", sdam: "1d6", ldam: "1d6", isProjectile: true, hit: 0, ahit: 3 },
    { name: "Magicbane", type: "dagger", sdam: "1d4", ldam: "1d3", abon: "1d4", hit: 2, ahit: 4 },
    { name: "Mjollnir", type: "hammer", sdam: "1d4", sbon: "1d1", ldam: "1d4", abon: "1d24", hit: 2, ahit: 4 },
    { name: "Ogresmasher", type: "hammer", sdam: "1d4", sbon: "1d1", ldam: "1d4", amon: "ogre", hit: 2, ahit: 3 },
    { name: "Orcrist", type: "broadsword", sdam: "1d6", sbon: "1d4", ldam: "1d6", lbon: "1d1", amon: "orcish", hit: 2, ahit: 3 },
    { name: "The Sceptre of Might", type: "mace", sdam: "1d6", sbon: "1d1", ldam: "1d6", amon: "cross-aligned", hit: 2, ahit: 3 },
    { name: "Snickersnee", type: "long sword", sdam: "1d10", ldam: "1d12", abon: "1d8", hit: 1, ahit: 1 },
    { name: "The Staff of Aesculapius", type: "quarterstaff", sdam: "1d6", ldam: "1d6", isTwoHanded: true, hit: 0, ahit: 0 },
    { name: "Sting", type: "dagger", sdam: "1d5", ldam: "1d3", amon: "orcish", hit: 2, ahit: 3 },
    { name: "Stormbringer", type: "broadsword", sdam: "1d4", sbon: "1d4", ldam: "1d6", lbon: "1d1", abon: "1d2", hit: 0, ahit: 3 },
    { name: "Sunsword", type: "long sword", sdam: "1d8", ldam: "1d12", amon: "undead", hit: 0, ahit: 3 },
    { name: "Trollsbane", type: "morning star", sdam: "1d4", sbon: "1d4", ldam: "1d6", lbon: "1d1", amon: "troll", hit: 0, ahit: 3 },
    { name: "The Tsurugi of Muramasa", type: "two-handed sword", sdam: "1d16", ldam: "1d8", lbon: "2d6", abon: "1d8", isTwoHanded: true, hit: 2, ahit: 2 },
    { name: "Vorpal Blade", type: "long sword", sdam: "1d8", ldam: "1d12", abon: "1d1", hit: 0, ahit: 3 },
    { name: "Werebane", type: "saber", sdam: "1d8", ldam: "1d8", isSilver: true, amon: "werecreature", hit: 0, ahit: 3 },
];

let projectiles = ["dagger", "knife", "spear"];

let launchers = ["bow", "crossbow", "sling"]

let wands = [
    { name: "striking", base: "2d12" },
    { name: "magic missile", base: "2d6" },
    { name: "fire", base: "6d6", bonus: "7d1" },
    { name: "cold", base: "6d6", bonus: "6d3" },
    { name: "lightning", base: "6d6" },
];

let brokenWands = [
    { name: "cancellation", chargeMultiplier: 4, roll: true },
    { name: "cold", chargeMultiplier: 8 },
    { name: "create monster", chargeMultiplier: 4, roll:true },
    { name: "death", chargeMultiplier: 16 },
    { name: "digging", chargeMultiplier: 4, roll:true },
    { name: "fire", chargeMultiplier: 8 },
    { name: "light", chargeMultiplier: 4, roll:true },
    { name: "lightning", chargeMultiplier: 16 },
    { name: "magic missile", chargeMultiplier: 4 },
    { name: "make invisible", chargeMultiplier: 4, roll:true },
    { name: "polymorph", chargeMultiplier: 4, roll:true },
    { name: "sleep", chargeMultiplier: 4, roll:true },
    { name: "slow monster", chargeMultiplier: 4, roll:true },
    { name: "speed monster", chargeMultiplier: 4, roll:true },
    { name: "striking", chargeMultiplier: "+1d6", roll:true },
    { name: "teleportation", chargeMultiplier: 4, roll:true },
    { name: "undead turning", chargeMultiplier: 4, roll:true },
];

let spells = [
    // Note: refer to calculateSpellDamage for actual calculation
    { name: "force bolt", base: "1d12" },
    { name: "drain life", base: "1d8" },
    { name: "magic missile", base: "(xl/2+1)d6" },
    { name: "cone of cold (basic)", base: "(xl/2+1)d6" },
    { name: "cone of cold (skilled)", base: "(xl/2+1)d6" },
    { name: "fireball (basic)", base: "12d6" },
    { name: "fireball (skilled)", base: "12d6" },
];

let notes = {
    spells: {
        "cone of cold (skilled)": "",
    }
}

for (let weapon of weapons) {
    if ( ! weapon.name.includes("(thrown)") &amp;&amp; projectiles.includes(weapon.type)) {
        let thrownWeapon = JSON.parse(JSON.stringify(weapon));
        thrownWeapon.name += " (thrown)"
        thrownWeapon.isProjectile = true;
        weapons.push(thrownWeapon);
    }
}

let monster = {
    size: "small",
    isThickSkinned: false,
    type: "other",
    ac: 7,
    isSilverHating: true,
    isFireResistant: false,
    isColdResistant: false,
    isMagicResistant: false,
    isFleeing: false,
}

let weaponModifiers = {
    enchantment: 0,
    isBlessed: true,
    erosion: "undamaged",
    twoWeapon: false,
}

let hero = {
    role: "Healer",
    race: "Elf",
    xl: 10,
    strengthRingEnchantment: 0,
    accuracyRingEnchantment: 0,
    wandCharges: 4,
    strength: "18",
    dex: 10,
    int: 15,
    luck: 0,
    isRiding: false,
    hasMagicMirror: false,
}

function minDice(roll) {
    return parseFloat(roll.split("d")[0]);
}

function maxDice(roll) {
    return parseFloat(roll.split("d")[0]) * parseFloat(roll.split("d")[1]);
}

function avgDice(roll) {
    return (minDice(roll) + maxDice(roll)) / 2;
}

function calculateWeaponHit(hero, monster, weapon, weaponModifiers) {
    let toHit;
    if (weapon.isProjectile) {
        toHit = -1;
        toHit += hero.accuracyRingEnchantment + monster.ac;
        let dex = hero.dex;
        if (dex &lt;= 3) {
            toHit += -3;
        } else if (dex &lt;= 5) {
            toHit += -2;
        } else if (dex &lt;= 7) {
            toHit += -1;
        } else if (dex &lt;= 14) {
            toHit += 0;
        } else {
            toHit += dex - 14;
        }
        toHit += hero.luck + hero.xl;
        if (monster.size == "small") {
            toHit += -1;
        } else {
            toHit += 1;
        }
        toHit += weaponModifiers.enchantment + weapon.hit;
        if (weapon.ahit) { toHit += weapon.ahit; }
        if (weaponModifiers.isBlessed &amp;&amp; ["undead", "demon"].includes(monster.type)) { toHit += 2; }
        if (weapon.type == "spear" &amp;&amp; ["dragon", "giant"].includes(monster.type)) { toHit += 2; }
        if (hero.race == "Elf" &amp;&amp; monster.type == "orcish") { toHit += 1; }
        if ((hero.race == "Elf" || hero.role == "Samurai") &amp;&amp; weapon.type == "bow") { toHit += 1; }
        if (hero.race == "Elf" &amp;&amp; weapon.type == "elven arrow") { toHit += 1; }
        if (hero.role == "Samurai" &amp;&amp; weapon.type == "ya") { toHit += 1; }
        if (weapon.type == "boomerang") { toHit += 4; }
        if (weapon.isProjectile) { toHit += 2; }
        toHit += {"Unskilled": -4, "Basic": 0, "Skilled": 2, "Expert": 3}[weapon.skill];
    } else {
        toHit = weaponModifiers.enchantment + weapon.hit;
        if (weapon.ahit) { console.log(toHit, weapon.ahit); toHit += weapon.ahit; console.log(toHit); }
        toHit += hero.accuracyRingEnchantment;
        if (hero.role == "Monk" &amp;&amp; hero.hasBodyArmor) {
            toHit -= 20;
        }
        if ( ! weapon.isProjectile) {
            toHit += 1;
        }
        toHit += parseInt(hero.strength.split(",")[0]);
        let dex = hero.dex;
        if (dex &lt;= 3) {
            toHit += -3;
        } else if (dex &lt;= 5) {
            toHit += -2;
        } else if (dex &lt;= 7) {
            toHit += -1;
        } else if (dex &lt;= 14) {
            toHit += 0;
        } else {
            toHit += dex - 14;
        }

        toHit += hero.luck;
        toHit += hero.xl;
        if (hero.xl &lt;= 2) {
            toHit += 1;
        }

        // TODO: riding
        if (weaponModifiers.twoWeapon) {
            toHit += {"Unskilled": -9, "Basic": -7, "Skilled": -5, "Expert": -3}[weapon.skill];
        } else {
            toHit += {"Unskilled": -4, "Basic": 0, "Skilled": 2, "Expert": 3}[weapon.skill];
        }

        if (weaponModifiers.twoWeapon &amp;&amp; hero.isRiding) { toHit += -2; }

        toHit += monster.ac;
        if (monster.isFleeing) { toHit += 2; }
        if (weaponModifiers.isBlessed &amp;&amp; ["undead", "demon"].includes(monster.type)) { toHit += 2; }
        if (weapon.type == "spear" &amp;&amp; ["dragon", "giant"].includes(monster.type)) { toHit += 2; }
        if (hero.race == "Elf" &amp;&amp; monster.type == "orcish") { toHit += 1; }
    }

    if (toHit &gt; 20) {
        return 1;
    } else if (toHit &lt;= 1) {
        return 0;
    } else {
        return (toHit - 1) / 20;
    }
    return 1;
}

function calculateWeaponDamage(dice, hero, monster, weapon, weaponModifiers) {
    let doubleDamageFactor = 1;

    let base = monster.size == "small" ? dice(weapon.sdam) : dice(weapon.ldam);

    base += monster.size == "small" &amp;&amp; weapon.sbon ? dice(weapon.sbon) : 0;
    base += monster.size == "large" &amp;&amp; weapon.lbon ? dice(weapon.lbon) : 0;

    let drainLifeBonus = 0;

    if (weapon.name == "Grayswandir") {
        doubleDamageFactor = 2;
    } else if (weapon.name == "The Staff of Aesculapius") {
        if ( ! ["undead", "demon"].includes(monster.type)) {
            doubleDamageFactor = 2;
            let hp = monster.size == "small" ? 8 : 10; // This is a simplification
            drainLifeBonus = dice("1d" + hp);
        }
    } else if (weapon.name == "Stormbringer") {
        base += dice(weapon.abon);
        if ( ! ["undead", "demon"].includes(monster.type)) {
            let hp = monster.size == "small" ? 8 : 10; // This is a simplification
            drainLifeBonus = dice("1d" + hp);
        }
    } else if (weapon.abon) {
        base += dice(weapon.abon);
    } else if (weapon.amon == monster.type) {
        doubleDamageFactor = 2;
    } else if (weapon.atype == "fire" &amp;&amp; monster.isColdResistant) {
        doubleDamageFactor = 2;
    } else if (weapon.atype == "cold" &amp;&amp; monster.isFireResistant) {
        doubleDamageFactor = 2;
    }

    let subtotalA = (base + weaponModifiers.enchantment) * doubleDamageFactor;

    subtotalA += drainLifeBonus;
    subtotalA = monster.isThickSkinned &amp;&amp; weapon.isSoft ? 0 : subtotalA;
    subtotalA = monster.type == "shade" &amp;&amp; ! weapon.isSilver ? 0 : subtotalA;

    if (weapon.name == "heavy iron ball") {
        subtotalA = dice("1d25");
    }

    let blessedBonus = weaponModifiers.isBlessed &amp;&amp; (monster.type == "undead" || monster.type == "demon") ? dice("1d4") : 0
    let axeBonus = weapon.type == "axe" &amp;&amp; monster.type == "wooden" ? dice("1d4") : 0
    let silverBonus = weapon.isSilver &amp;&amp; monster.isSilverHating ? dice("1d20") : 0

    let subtotalB = subtotalA + blessedBonus + axeBonus + silverBonus;

    let erosionPenalty = {"undamaged": 0, "damaged": -1, "very damaged": -2, "thoroughly damaged": -3}[weaponModifiers.erosion] * doubleDamageFactor;
    if (subtotalB &gt;= 1) {
        subtotalB += erosionPenalty;
        if (subtotalB &lt; 1) {
            subtotalB = 1;
        }
    }


    let rogueBackstabBonus = hero.role == "Rogue" &amp;&amp; monster.isFleeing ? dice("1d" + hero.xl) * doubleDamageFactor : 0;
    let joustBonus = hero.isRiding &amp;&amp; weapon.name == "lance" ? dice("2d10") : 0;
    let samuraiBonus = hero.role == "Samurai" &amp;&amp; weapon.name == "ya" ? 1 : 0;
    let elfBonus = hero.race == "Elf" &amp;&amp; weapon.name == "elven arrow" ? 1 : 0;

    let totalDamage = subtotalB + rogueBackstabBonus + joustBonus + samuraiBonus + elfBonus;
    totalDamage = totalDamage &lt; 0 ? 0 : totalDamage;

    strengthBonus = launchers.includes(weapon.type) ? 0 : parseInt(hero.strength.split(",")[1]);

    // TODO: riding
    let skillBonus;
    if (weaponModifiers.twoWeapon) {
        skillBonus = {"Unskilled": -3, "Basic": -1, "Skilled": 0, "Expert": 1};
    } else {
        skillBonus = {"Unskilled": -2, "Basic": 0, "Skilled": 1, "Expert": 2};
    }
    skillBonus = skillBonus[weapon.skill];

    let isPoisonable = ["dart", "bow", "shuriken", "crossbow"].includes(weapon.type);
    let poisonBonus = weapon.isProjectile &amp;&amp; isPoisonable &amp;&amp; weaponModifiers.isPoisoned ? dice("1d6") : 0;

    let increaseDamageBonus = hero.strengthRingEnchantment + strengthBonus + skillBonus + poisonBonus;

    let finalDamage = totalDamage + increaseDamageBonus;
    finalDamage = increaseDamageBonus &gt; 0 &amp;&amp; finalDamage &lt; 1 ? 1 : finalDamage;
    finalDamage = finalDamage &lt; 0 ? 0 : finalDamage;

    let multishot = 1;

    if (weapon.isProjectile) {
        let mayHaveSkillBonus = true;
        if (["Skilled", "Expert"].includes(weapon.skill)) {
            if (hero.role == "Wizard" || hero.role == "Priest") {
                mayHaveSkillBonus = false;
            } else if (hero.role == "Healer" &amp;&amp; weapon.type != "knife") {
                mayHaveSkillBonus = false;
            } else if (hero.role == "Tourist" &amp;&amp; weapon.type != "dart") {
                mayHaveSkillBonus = false;
            } else {
                multishot += 1;
            }
        }
        multishot += weapon.skill == "Expert" ? 1 : 0;
        if (mayHaveSkillBonus) {
            if (hero.race == "Elf" &amp;&amp; weapon.name == "elven arrow") {
                multishot += 1;
            } else if (hero.race == "Orc" &amp;&amp; weapon.name == "orcish arrow") {
                multishot += 1;
            } else if (hero.race == "Gnome" &amp;&amp; weapon.name == "crossbow bolt") {
                multishot += 1;
            }
        }
        if (hero.role == "Caveman" &amp;&amp; weapon.type == "spear") {
            multishot += 1;
        } else if (hero.role == "Caveman" &amp;&amp; weapon.type == "sling") {
            multishot += 1;
        } else if (hero.role == "Samurai" &amp;&amp; weapon.name == "ya") {
            multishot += 1;
        } else if (hero.role == "Monk" &amp;&amp; weapon.name == "shuriken (thrown)") {
            multishot += 1;
        } else if (hero.role == "Rogue" &amp;&amp; weapon.type == "dagger") {
            multishot += 1;
        } else if (hero.role == "Ranger" &amp;&amp; weapon.type != "dagger") {
            multishot += 1;
        }

        if (weapon.name == "crossbow bolt") {
            if (hero.race == "Gnome") {
                if (["-2,-1", "-1,0", "0,0"].includes(hero.strength)) {
                    multishot = dice("1d" + multishot)
                }
            } else {
                if (["-2,-1", "-1,0", "0,0", "0,1", "1,1"].includes(hero.strength)) {
                    multishot = dice("1d" + multishot)
                }
            }
        }
    }

    return dice("1d" + multishot) * finalDamage;
}

function calculateWandHit(monster, wand) {
    if (wand.name == "striking") {
        if (monster.ac &lt;= -9) {
            return 0;
        } else if (monster.ac &gt;= 11) {
            return 1;
        }
        return (9 + monster.ac) / 20;
    }

    if (monster.ac &gt;= 11) {
        return 1;
    } else if (monster.ac &gt;= 3) {
        return 0.945 + (monster.ac / 200);
    } else if (monster.ac &gt;= 1) {
        return 0.795 + ((11 * monster.ac) / 200);
    } else if (monster.ac &gt;= -1) {
        return 0.8 + ((10 * monster.ac) / 200);
    } else if (monster.ac &gt;= -14) {
        return 0.775 + ((5 * monster.ac) / 200);
    }
    return -6 / monster.ac;
}

function calculateWandDamage(dice, monster, wand) {
    if (wand.name == "fire" &amp;&amp; monster.isFireResistant) {
        return 0;
    } else if (wand.name == "cold" &amp;&amp; monster.isColdResistant) {
        return 0;
    } else if (["striking", "magic missile"].includes(wand.name) &amp;&amp; monster.isMagicResistant) {
        return 0;
    }
    let base = dice(wand.base);
    if (wand.name == "fire" &amp;&amp; monster.isColdResistant) {
        return base + dice(wand.bonus);
    } else if (wand.name == "cold" &amp;&amp; monster.isFireResistant) {
        return base + dice(wand.bonus);
    }
    return base;
}

function calculateBrokenWandDamage(dice, hero, monster, wand) {
    if (wand.name == "fire" &amp;&amp; monster.isFireResistant) {
        return 0;
    } else if (wand.name == "cold" &amp;&amp; monster.isColdResistant) {
        return 0;
    } else if (["striking", "magic missile"].includes(wand.name) &amp;&amp; monster.isMagicResistant) {
        return 0;
    }

    if (wand.name == "striking") {
        return dice((hero.wandCharges + 1) + "d6");
    } else if (wand.roll) {
        return dice("1d" + (hero.wandCharges * wand.chargeMultiplier));
    }
    return hero.wandCharges * wand.chargeMultiplier;
}


function calculateSpellHit(hero, monster, spell) {
    if (spell.name == "force bolt") {
        let target = 10 + monster.ac;
        if (target &gt; 20) {
            return 1;
        } else if (target &lt; 2) {
            return 0;
        }
        return (target - 1) / 20;
    }
    let toHit = {"Unskilled": -4, "Basic": 0, "Skilled": 2, "Expert": 3}[spell.skill];
    let dex = hero.dex;
    if (dex &lt;= 3) {
        toHit += -3;
    } else if (dex &lt;= 5) {
        toHit += -2;
    } else if (dex &lt;= 7) {
        toHit += -1;
    } else if (dex &lt;= 14) {
        toHit += 0;
    } else {
        toHit += dex - 14;
    }

    if (monster.ac &gt;= 0) {
        toHit += monster.ac;
    } else {
        toHit += (-1 + monster.ac) / 2;
    }

    if (toHit &gt; (4-1)) {
        return 1;
    } else if (toHit &lt; (4-20)) {
        return 0;
    }
    return (toHit - 4 + 20) / 20;
}

function calculateSpellDamage(dice, hero, monster, spell) {
    if (monster.isFireResistant &amp;&amp; spell.name.includes("fire")) {
        return 0;
    } else if (monster.isColdResistant &amp;&amp; spell.name.includes("cold")) {
        return 0;
    } else if (monster.isMagicResistant &amp;&amp; spell.name.includes("magic")) {
        return 0;
    }

    let bonus = 0;
    if (hero.int &lt;= 0) {
        bonus = -3;
    } else if (hero.int &lt;= 13 || hero.xl &lt; 5) {
        bonus = 0;
    } else if (hero.int &lt;= 18) {
        bonus = 1;
    } else if (hero.int &lt;= 24 || hero.xl &lt; 14) {
        bonus = 2;
    } else if (hero.int &gt;= 25) {
        bonus = 3;
    }

    let hasMagicMirror = hero.role == "Knight" &amp;&amp; hero.hasMagicMirror;

    let nd = (Math.floor(hero.xl / 2) + 1)

    if (spell.name == "force bolt") {
        return dice(spell.base) + bonus;
    } else if (spell.name == "drain life") {
        let hp = monster.size == "small" ? 8 : 10; // This is a simplification
        let dmg = dice("1d" + hp);
        if (hasMagicMirror) { dmg *= 2; }
        return dmg + bonus;
    } else if (spell.name == "magic missile") {
        let dmg = dice(nd + "d6") + bonus;
        return hasMagicMirror ? dmg * 2 : dmg;
    } else if (spell.name == "cone of cold (basic)") {
        let dmg = dice(nd + "d6") + bonus;
        if (monster.isFireResistant) { dmg += dice(nd + "d3"); }
        return hasMagicMirror ? dmg * 2 : dmg;
    } else if (spell.name == "fireball (basic)") {
        let dmg = dice("12d6");
        if (monster.isColdResistant) { dmg *= 2; }
        return dmg;
        // let dmg = dice(nd + "d6") + bonus;
        // if (monster.isColdResistant) { dmg += 7; }
        return hasMagicMirror ? dmg * 2 : dmg;
    } else if (spell.name == "cone of cold (skilled)") {
        let dmg = nd + bonus;
        if (monster.isFireResistant) { dmg *= 2; }
        return (dice("1d8") + 1) * dmg;
    } else if (spell.name == "fireball (skilled)") {
        let dmg = nd + bonus;
        if (monster.isColdResistant) { dmg *= 2; }
        return (dice("1d8") + 1) * dmg;
    }
}

function recalculate() {
    let shouldConsiderTohit = document.getElementById("to-hit").checked;

    hero.role = document.getElementById("role").value;
    hero.race = document.getElementById("race").value;
    hero.strength = document.getElementById("strength").value;
    hero.dex = document.getElementById("dex").valueAsNumber;
    hero.int = document.getElementById("int").valueAsNumber;
    hero.luck = parseInt(document.getElementById("luck").value);
    hero.xl = document.getElementById("xl").valueAsNumber;
    hero.strengthRingEnchantment = document.getElementById("strength-ring-enchantment").valueAsNumber;
    hero.accuracyRingEnchantment = document.getElementById("accuracy-ring-enchantment").valueAsNumber;
    hero.wandCharges = document.getElementById("wand-charges").valueAsNumber;
    hero.isRiding = document.getElementById("is-riding").checked;
    if (hero.role != "Knight") {
        document.getElementById("has-magic-mirror").checked = false;
    }
    hero.hasMagicMirror = document.getElementById("has-magic-mirror").checked;
    hero.hasBodyArmor = document.getElementById("has-body-armor").checked;

    weaponModifiers.enchantment = document.getElementById("enchantment").valueAsNumber;
    weaponModifiers.isBlessed = document.getElementById("is-blessed").checked;
    weaponModifiers.isPoisoned = document.getElementById("is-poisoned").checked;
    weaponModifiers.erosion = document.getElementById("erosion").value;
    weaponModifiers.twoWeapon = false;

    monster.size = document.getElementById("size").value;
    monster.type = document.getElementById("type").value;
    monster.ac = document.getElementById("ac").valueAsNumber;
    if (["demon", "werecreature"].includes(monster.type)) {
        document.getElementById("is-silver-hating").checked = true;
    }
    monster.isSilverHating = document.getElementById("is-silver-hating").checked;
    monster.isFireResistant = document.getElementById("is-fire-resistant").checked;
    monster.isColdResistant = document.getElementById("is-cold-resistant").checked;
    monster.isMagicResistant = document.getElementById("is-magic-resistant").checked;
    monster.isFleeing = document.getElementById("is-fleeing").checked;

    let includeMeeleeWeapons = document.getElementById("meelee-weapons").checked;
    let includeRangedWeapons = document.getElementById("ranged-weapons").checked;
    let includeArtifactWeapons = document.getElementById("artifact-weapons").checked;
    let includeTwoHandedWeapons = document.getElementById("two-handed-weapons").checked;
    if ( ! ["Archeologist", "Barbarian", "Knight", "Tourist", "Valkyrie", "Rogue", "Samurai"].includes(hero.role)) {
        document.getElementById("twoweapon-combos").checked = false;
    }
    let includeTwoWeaponCombos = document.getElementById("twoweapon-combos").checked;
    let includeWands = document.getElementById("wands").checked;
    let includeBrokenWands = document.getElementById("broken-wands").checked;
    let includeSpells = document.getElementById("spells").checked;

    let results = [];

    let twoWeaponCombos = [];

    for (let weapon of weapons) {
        if ( ! includeMeeleeWeapons &amp;&amp; ! weapon.isProjectile) {
            continue;
        } else if ( ! includeRangedWeapons &amp;&amp; weapon.isProjectile) {
            continue;
        } else if ( ! includeTwoHandedWeapons &amp;&amp; weapon.isTwoHanded) {
            continue;
        }

        let skillSelect = document.querySelector("select[name='" + weapon.type + "']")

        weapon.skill = skillSelect ? skillSelect.value : "Unskilled";
        let hitRate = calculateWeaponHit(hero, monster, weapon, weaponModifiers);
        let hitFactor = shouldConsiderTohit ? hitRate : 1;
        results.push({
            name: weapon.name,
            type: weapon.type,
            hit: hitRate,
            min: hitFactor * calculateWeaponDamage(minDice, hero, monster, weapon, weaponModifiers),
            max: hitFactor * calculateWeaponDamage(maxDice, hero, monster, weapon, weaponModifiers),
            avg: hitFactor * calculateWeaponDamage(avgDice, hero, monster, weapon, weaponModifiers),
        })

        if (includeTwoWeaponCombos &amp;&amp; ! weapon.isTwoHanded &amp;&amp; ! weapon.isProjectile) {
            let twoWeaponSkill = document.querySelector("select[name='two weapon combat']").value;
            let skills = ["Unskilled", "Basic", "Skilled", "Expert"];
            if (skills.indexOf(twoWeaponSkill) &lt; skills.indexOf(weapon.skill)) {
                weapon.skill = twoWeaponSkill;
            }

            let hitRate = calculateWeaponHit(hero, monster, weapon, weaponModifiers);
            let hitFactor = shouldConsiderTohit ? hitRate : 1;

            let min = hitFactor * calculateWeaponDamage(minDice, hero, monster, weapon, weaponModifiers);
            let max = hitFactor * calculateWeaponDamage(maxDice, hero, monster, weapon, weaponModifiers);
            let avg = hitFactor * calculateWeaponDamage(avgDice, hero, monster, weapon, weaponModifiers);

            for (let weapon2 of weapons) {
                if (weapon2.isProjectile || weapon2.isTwoHanded) {
                    continue;
                } else if (twoWeaponCombos.includes(weapon2.name + " / " + weapon.name)) {
                    continue;
                }

                let skillSelect = document.querySelector("select[name='" + weapon2.type + "']")
                weapon2.skill = skillSelect ? skillSelect.value : "Unskilled";
                if (skills.indexOf(twoWeaponSkill) &lt; skills.indexOf(weapon2.skill)) {
                    weapon2.skill = twoWeaponSkill;
                }

                let hitRate2 = calculateWeaponHit(hero, monster, weapon2, weaponModifiers);
                let hitFactor2 = shouldConsiderTohit ? hitRate2 : 1;

                let min2 = hitFactor2 * calculateWeaponDamage(minDice, hero, monster, weapon2, weaponModifiers);
                let max2 = hitFactor2 * calculateWeaponDamage(maxDice, hero, monster, weapon2, weaponModifiers);
                let avg2 = hitFactor2 * calculateWeaponDamage(avgDice, hero, monster, weapon2, weaponModifiers);

                twoWeaponCombos.push(weapon.name + " / " + weapon2.name);

                results.push({
                    name: weapon.name + " / " + weapon2.name,
                    type: weapon.type != weapon2.type ? weapon.type + " / " + weapon2.type : weapon.type,
                    hit: (hitRate + hitRate2) / 2,
                    min: min + min2,
                    max: max + max2,
                    avg: avg + avg2,
                })
            }

            if (includeArtifactWeapons) {
                for (let weapon2 of artifactWeapons) {
                    if (weapon2.isProjectile || weapon2.isTwoHanded) {
                        continue;
                    } else if (twoWeaponCombos.includes(weapon2.name + " / " + weapon.name)) {
                        continue;
                    }

                    let skillSelect = document.querySelector("select[name='" + weapon2.type + "']")
                    weapon2.skill = skillSelect ? skillSelect.value : "Unskilled";
                    if (skills.indexOf(twoWeaponSkill) &lt; skills.indexOf(weapon2.skill)) {
                        weapon2.skill = twoWeaponSkill;
                    }

                    let hitRate2 = calculateWeaponHit(hero, monster, weapon2, weaponModifiers);
                    let hitFactor2 = shouldConsiderTohit ? hitRate2 : 1;

                    let min2 = hitFactor2 * calculateWeaponDamage(minDice, hero, monster, weapon2, weaponModifiers);
                    let max2 = hitFactor2 * calculateWeaponDamage(maxDice, hero, monster, weapon2, weaponModifiers);
                    let avg2 = hitFactor2 * calculateWeaponDamage(avgDice, hero, monster, weapon2, weaponModifiers);

                    twoWeaponCombos.push(weapon.name + " / " + weapon2.name);

                    results.push({
                        name: weapon.name + " / " + weapon2.name,
                        type: weapon.type != weapon2.type ? weapon.type + " / " + weapon2.type : weapon.type,
                        hit: (hitRate + hitRate2) / 2,
                        min: min + min2,
                        max: max + max2,
                        avg: avg + avg2,
                    })
                }
            }

        }
    }

    if (includeArtifactWeapons) {
        for (let weapon of artifactWeapons) {
            if ( ! includeMeeleeWeapons &amp;&amp; ! weapon.isProjectile) {
                continue;
            } else if ( ! includeRangedWeapons &amp;&amp; weapon.isProjectile) {
                continue;
            } else if ( ! includeTwoHandedWeapons &amp;&amp; weapon.isTwoHanded) {
                continue;
            }

            let skillSelect = document.querySelector("select[name='" + weapon.type + "']")
            weapon.skill = skillSelect ? skillSelect.value : "Basic";

            let hitRate = calculateWeaponHit(hero, monster, weapon, weaponModifiers);
            let hitFactor = shouldConsiderTohit ? hitRate : 1;
            // console.log(hitRate);

            results.push({
                name: weapon.name,
                type: "artifact " + weapon.type,
                hit: hitRate,
                min: hitFactor * calculateWeaponDamage(minDice, hero, monster, weapon, weaponModifiers),
                max: hitFactor * calculateWeaponDamage(maxDice, hero, monster, weapon, weaponModifiers),
                avg: hitFactor * calculateWeaponDamage(avgDice, hero, monster, weapon, weaponModifiers),
            })
        }
    }

    if (includeWands) {
        for (let wand of wands) {
            let hitRate = calculateWandHit(monster, wand);
            let hitFactor = shouldConsiderTohit ? hitRate : 1;
            results.push({
                name: wand.name,
                type: "wand",
                hit: hitRate,
                min: hitFactor * calculateWandDamage(minDice, monster, wand),
                max: hitFactor * calculateWandDamage(maxDice, monster, wand),
                avg: hitFactor * calculateWandDamage(avgDice, monster, wand),
            })
        }
    }

    if (includeBrokenWands) {
        for (let wand of brokenWands) {
            results.push({
                name: wand.name,
                type: "broken wand",
                hit: 1,
                min: calculateBrokenWandDamage(minDice, hero, monster, wand),
                max: calculateBrokenWandDamage(maxDice, hero, monster, wand),
                avg: calculateBrokenWandDamage(avgDice, hero, monster, wand),
            })
        }
    }

    if (includeSpells) {
        for (let spell of spells) {
            if (spell.name.includes("skilled") &amp;&amp; ! ["Knight", "Wizard"].includes(hero.role)) {
                continue;
            }
            let skillSelect = document.querySelector("select[name='attack']")
            spell.skill = skillSelect ? skillSelect.value : "Unskilled";
            let hitRate = calculateSpellHit(hero, monster, spell);
            let hitFactor = shouldConsiderTohit ? hitRate : 1;
            results.push({
                name: spell.name,
                type: "spell",
                hit: hitRate,
                min: hitFactor * calculateSpellDamage(minDice, hero, monster, spell),
                max: hitFactor * calculateSpellDamage(maxDice, hero, monster, spell),
                avg: hitFactor * calculateSpellDamage(avgDice, hero, monster, spell),
            })
        }
    }

    displayResults(results);
}

function displayResults(results) {
    let damageTable = document.getElementById("damage-table");
    let tbody = damageTable.querySelector("tbody");
    let shouldShowTop10 = document.getElementById("top-10").checked;

    while (tbody.firstChild) {
        tbody.removeChild(tbody.firstChild);
    }

    let i = 0;

    let labels = [];
    let minData = [];
    let maxData = [];

    //results = results.sort((a, b) =&gt; b.avg - a.avg);
    results = results.sort((a, b) =&gt; {
        if (b.avg === a.avg) {
            // Sort by 'bar' in ascending order if 'avg' is the same
            return b.max - a.max;
        }
        return b.avg - a.avg; // Sort by 'avg' in descending order
    });
    for (let result of results) {
        let tr = document.createElement("tr");
        ["name", "type", "hit", "min", "avg", "max"].forEach(value =&gt; {
            let td = document.createElement("td");
            let content = result[value];
            if (value == "hit") {
                content = Math.round(content * 100) + "%";
            } else if (["min", "avg", "max"].includes(value)) {
                content = content.toFixed(1);
            }
            td.textContent = content;
            tr.appendChild(td);
        });
        tbody.appendChild(tr);

        if (result.max != 0) {
            let label = result.name.replace("(thrown)", "(t)")
            if (result.type == "wand") {
                label += " (w)"
            } else if (result.type == "broken wand") {
                label += " (bw)"
            }
            if (i % 2 == 0) {
                labels.push(label);
            } else {
                labels.push(["", "", label]);
            }

            if (result.min == result.avg) {
                minData.push([result.min - 0.5, result.avg]);
            } else {
                minData.push([result.min, result.avg]);
            }

            if (result.max == result.avg) {
                maxData.push([result.avg, result.max + 0.5]);
            } else {
                maxData.push([result.avg, result.max]);
            }
        }

        i++;
        if (i &gt; 10 &amp;&amp; shouldShowTop10) {
            break;
        }
    }

    window.chart.data.labels = labels;
    window.chart.data.datasets[0].data = minData;
    window.chart.data.datasets[1].data = maxData;

    window.chart.options.scales.x.display = shouldShowTop10 ? true : false;
    window.chart.update();
}

function displaySkills() {
    let role = document.getElementById("role").value;
    let weaponSkills = roleSkills[role];

    let div = document.getElementById("skills");

    while (div.firstChild) {
        div.removeChild(div.firstChild);
    }

    ["Basic", "Skilled", "Expert"].forEach(skillLimit =&gt; {
        weaponSkills[skillLimit].forEach(weaponType =&gt; {
            let span = document.createElement("span");
            let label = document.createElement("label");
            label.textContent = " " + weaponType + " ";
            label.setAttribute("for", weaponType);
            span.appendChild(label);
            div.appendChild(span);

            let select = document.createElement("select");
            select.setAttribute("name", weaponType);
            let isAtLimit = false;
            ["Unskilled", "Basic", "Skilled", "Expert"].forEach(skillOption =&gt; {
                if ( ! isAtLimit) {
                    let option = document.createElement("option");
                    option.textContent = skillOption;
                    select.appendChild(option);
                    if (skillOption == skillLimit) {
                        option.setAttribute("selected", true);
                        isAtLimit = true;
                    }
                }
            });
            select.addEventListener("change", recalculate);
            span.appendChild(select);
        })
        let hr = document.createElement("hr");
        div.appendChild(hr);
    });
}

function setup() {
    var ctx = document.getElementById("canvas").getContext("2d");
    window.chart = new Chart(ctx, config);
    displaySkills();
    recalculate();
}


function resetSkills() {
    for (let select of document.getElementById("skills").getElementsByTagName("select")) {
        select.value = "Unskilled";
    }
    recalculate();
}


function maxSkills() {
    for (let select of document.getElementById("skills").getElementsByTagName("select")) {
        select.value = select.options[select.options.length - 1].value 
    }
    recalculate();
}

window.addEventListener('load', setup);
document.getElementById("role").addEventListener("change", displaySkills);
["role", "race", "xl", "strength-ring-enchantment", "accuracy-ring-enchantment", "wand-charges", "strength", "dex", "int", "luck", "is-riding", "has-magic-mirror", "has-body-armor", "enchantment", "is-blessed", "is-poisoned", "erosion", "size", "type", "ac", "is-silver-hating", "is-fire-resistant", "is-cold-resistant", "is-magic-resistant", "is-fleeing", "meelee-weapons", "ranged-weapons", "artifact-weapons", "two-handed-weapons", "twoweapon-combos", "wands", "broken-wands", "spells", "top-10", "to-hit"].forEach(element =&gt; {
    document.getElementById(element).addEventListener('change', recalculate);
});
document.getElementById("reset-skills").addEventListener("click", resetSkills);
document.getElementById("max-skills").addEventListener("click", maxSkills);


let config = {
    type: "bar",
    data: {
        labels: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"],
        datasets: [
            {
                label: "min",
                backgroundColor: "rgba(240, 140, 121, 1.0)",
                borderColor: "rgba(140, 140, 140, 0.0)",
                borderWidth: 0,
                data: [
                    [0,5], [0,5], [0,5], [0,5], [0,5], [0,5], [0,5], [0,5], [0,5], [0,5],
                ],
                fill: "-1",
                radius: 0,
            },
            {
                label: "max",
                backgroundColor: "rgba(121, 200, 121, 0.8)",
                borderColor: "rgba(140, 140, 140, 0.0)",
                borderWidth: 0,
                data: [
                    [5,10], [5,10], [5,10], [5,10], [5,10], [5,10], [5,10], [5,10], [5,10], [5,10]
                ],
                fill: "-1",
                line: false,
                radius: 0,
            },
        ]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                display: false,
            },
        },
        scales: {
            x: {
                display: false,
                stacked: true,
                ticks: {
                    autoSkip: false,
                    maxRotation: 0,
                },
            },
            y: {
                stacked: false,
            }
        },
    }
};
&lt;/script&gt;

        </content>
    </entry>
    <entry>
		<author>
			<name>Fitzcarraldo</name>
							<uri>https://fitzcarraldoblog.wordpress.com</uri>
						</author>

		<title type="html">Disabling the DebugLoggerUI service app in Android</title>
		<link rel="alternate" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2023/03/05/disabling-the-debugloggerui-service-app-in-android/" />

		<id>http://fitzcarraldoblog.wordpress.com/?p=6657</id>
		<updated>2023-03-05T15:02:52Z</updated>
		<published>2023-03-05T15:01:45Z</published>
		<category scheme="https://fitzcarraldoblog.wordpress.com" term="Android" /><category scheme="https://fitzcarraldoblog.wordpress.com" term="ADB" />
		<summary type="html">The following notification appeared every time I switched on my Blackview Tab 10 tablet (Android 11): DebugLoggerUI DebugLoggerUI service is running I cannot remember if this notification started appearing after I upgraded the tablet&amp;#8217;s firmware last year to remove a bug in the original firmware (I had contacted Blackview and they supplied me with the [&amp;#8230;]</summary>

		
					<link rel="replies" type="text/html" href="https://fitzcarraldoblog.wordpress.com/2023/03/05/disabling-the-debugloggerui-service-app-in-android/#comments" ns0:count="4" />
			<link rel="replies" type="application/atom+xml" href="https://fitzcarraldoblog.wordpress.com/2023/03/05/disabling-the-debugloggerui-service-app-in-android/feed/atom/" ns0:count="4" />
			<total>4</total>
			</entry>
	<entry>
        <title>NetHack: an illustrated guide to the Mazes of Menace</title>
        <link href="https://thinkmoult.com/nethack-illustrated-guide-mazes-of-menace.html" />
        <id>https://thinkmoult.com/nethack-illustrated-guide-mazes-of-menace.html</id>
        <updated>2022-12-28</updated>
        <summary>A visual guide to NetHack, describing the stages of the game illustrated with AI generated imagery.</summary>
        <content type="html">

&lt;p&gt;NetHack is, without a doubt, the &lt;a href="https://www.thegreatestgameyouwilleverplay.com/"&gt;greatest game you will ever
play&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Inspired by the creative adventures from Dungeons and Dragons, NetHack is a
&lt;a href="https://en.wikipedia.org/wiki/Roguelike"&gt;Roguelike&lt;/a&gt; game first released in
1987, and still &lt;a href="https://github.com/NetHack/NetHack"&gt;under active development&lt;/a&gt;
35 years later. Most people are older than the games they play. For NetHack,
it's the other way around.&lt;/p&gt;
&lt;p&gt;NetHack is a high-stakes, carefully executed, heist game. You have been heralded
since birth by your god to recover the stolen Amulet of Yendor. The reward:
eternal life as a demigod. The consequence of failure: death.&lt;/p&gt;
&lt;p&gt;You begin as one of over 10 diverse races and roles. Play as the stereotypical
fantasy tropes: a hardy dwarven valkyrie, borne amongst the icy Northlands. Or
perhaps an elvish wizard, weak in strength but learned in the mystic arts. Or a
ranger, trained in bow and arrow deep within the forests. For a twist, play as
bumbling tourist, snapping photos with your expensive camera and oblivious to
the carnage that surrounds you. Or maybe one of the secretive samurai, or
Shaolin monks, training to become a martial arts grandmaster.&lt;/p&gt;
&lt;p&gt;You are piously aligned with one of three possible dieties: the gods of Law,
Neutrality, or Chaos. Moloch, our antagonist, has stolen the most powerful
artifact of the gods: The Amulet of Yendor. The Amulet has been hidden in the
furthest depths of Gehennom. Your journey begins at the entrance of the Dungeons
of Doom, an ancient ruins delving deep into the earth.&lt;/p&gt;
&lt;p&gt;&lt;img alt="An entry into the Dungeons of Doom" src="https://thinkmoult.com/assets/0-0-entrance.png"&gt;&lt;/p&gt;
&lt;p&gt;What makes NetHack stand the test of time is the sheer depth and replayability.
Set in an open world, the world is procedurally generated each time you enter,
so no two adventures are the same. The locations, distances, objects,
descriptions, all change so you will have to relearn how the world works. There
is no set path: you may interact with your objects and surroundings in
surprising ways that may result in creative solutions to sticky problems. The
stories, characters, destinations are drawn from a diverse collection or lore
and cultures, combined into a unique experience, rich with references.&lt;/p&gt;
&lt;p&gt;Choose a permutation of role, race, and religion, and enter into the unknown.&lt;/p&gt;
&lt;p&gt;&lt;img alt="An elven ranger standing at the entrance of the dungeons" src="https://thinkmoult.com/assets/0-elvenranger.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="A saddled knight just outside the entrance of the dungeons" src="https://thinkmoult.com/assets/0-knight.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="An orc barbarian standing at the entrance of the dungeons" src="https://thinkmoult.com/assets/0-orcbarb.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="A wizard entering the dungeons" src="https://thinkmoult.com/assets/0-wizard.png"&gt;&lt;/p&gt;
&lt;p&gt;The game is divided into four stages: early, middle, late, and end game,
presenting you with 4, 6, 8, and 10 milestones respectively.&lt;/p&gt;
&lt;h2&gt;Early game&lt;/h2&gt;
&lt;p&gt;The theme of the early game is survival. You are not welcome. Everything is
foreign. Which foods are safe to eat, what potions may be quaffed, what
incantations may be evoked, are all unknown. The local fauna have a spectrum of
different abilities, with one common purpose: to kill you.&lt;/p&gt;
&lt;p&gt;Caution is the word of the day. Discretion is the better part of valor. You are
new here, and every decision you make with the little resources you have will
determine whether you live to see the four landmarks that will prepare you for
your journey.&lt;/p&gt;
&lt;h3&gt;The Gnomish Mines&lt;/h3&gt;
&lt;p&gt;A branching tunnel out of the dungeons leads to the Gnomish mines. A dimly lit
series of caverns have been slowly excavated by the local gnome population. As
you venture deeper you will discover the grand underground metropolis of
Minetown.&lt;/p&gt;
&lt;p&gt;Stocked with shops, temples, and residences, you will find brief refuge and
basic supplies.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The streets and shops of minetown, built into the caves of the Gnomish Mines" src="https://thinkmoult.com/assets/1-1-minetown1.png"&gt;&lt;/p&gt;
&lt;p&gt;But perhaps the true jewel of Minetown is far deeper beyond the mines. Hidden at
Mine's End deep underground the town is a luckstone, a nondescript gray stone
that brings fortune upon its carrier. Should you find it, it is a token you will
likely carry until the very end.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Deep underground, the luckstone lays hidden somewhere within Mine's End" src="https://thinkmoult.com/assets/1-1-minetown2.png"&gt;&lt;/p&gt;
&lt;h3&gt;Delphi&lt;/h3&gt;
&lt;p&gt;Outside the order of the Gnomish residence, you will delve deeper into the
Dungeons of Doom. One of these dungeons are not like the others. It is inhabited
by nagas and snakelike creatures. At its center, an oasis amongst the perils of
the dungeon, is Delphi.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The center of Delphi, a peaceful pause amidst the dungeons" src="https://thinkmoult.com/assets/1-2-oracle1.png"&gt;&lt;/p&gt;
&lt;p&gt;Rays of light, trees, and peaceful fountains surround the Oracle, an ancient and
wise being as old as the Internet itself. The Oracle speaks in riddles, and will
guide you on your quest for the Amulet of Yendor.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Oracle lives within Delphi and dispenses cryptic wisdom" src="https://thinkmoult.com/assets/1-2-oracle2.png"&gt;&lt;/p&gt;
&lt;h3&gt;Sokoban&lt;/h3&gt;
&lt;p&gt;As you descend further, a side tunnel leads into a ruined tower built into the
cliffs of the dungeons. This is the tower of Sokoban, a Japanese relic with a
menagerie of dangerous creatures guarding a valuable relic at the uppermost
level.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A crumbling tower out the sides of the dungeons guards a valuable relic" src="https://thinkmoult.com/assets/1-3-sokoban1.png"&gt;&lt;/p&gt;
&lt;p&gt;However the passages up the tunnel have long since crumbled away and you now
face a impasse at every floor. Sokoban conceals a careful mechanism of balanced
boulders to cross the chasms. Should you complete this ancient ritual, you may
bridge your way across the tower.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Carefully balanced boulders may be used to cross the chasms of Sokoban" src="https://thinkmoult.com/assets/1-3-sokoban2.png"&gt;&lt;/p&gt;
&lt;p&gt;At the uppermost level, you will find your prize. It is not known what that
prize may be, but it is an object embued with an enchantment to prepare you for
the next stage of the game.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The top of Sokoban has an enchanted prize" src="https://thinkmoult.com/assets/1-3-sokoban3.png"&gt;&lt;/p&gt;
&lt;h3&gt;The Big Room&lt;/h3&gt;
&lt;p&gt;The Big Room, an homage to Carlsbad Caverns' largest cave chamber in North
America by volume, is the threshold between the early game and mid game.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Big Room may take many forms" src="https://thinkmoult.com/assets/1-4-bigroom1.png"&gt;&lt;/p&gt;
&lt;p&gt;The twisted and narrow passageways of the dungeon give way to a huge
cavernous space. An assortment of monsters have made this their territory, and
dwelling too long may find yourself surrounded by creatures.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A huge cavern with glowing crystals" src="https://thinkmoult.com/assets/1-4-bigroom2.png"&gt;&lt;/p&gt;
&lt;p&gt;Here you will be put to the test of the early stage: can you truly survive in
the dungeons of doom? Are you fit to explore further?&lt;/p&gt;
&lt;p&gt;&lt;img alt="A huge cavern with a bioluminescent central column" src="https://thinkmoult.com/assets/1-4-bigroom3.png"&gt;&lt;/p&gt;
&lt;h2&gt;Mid game&lt;/h2&gt;
&lt;p&gt;The aim of the mid game is to gather resources. The heist may be performed with
a variety of equipment, and it is your job to identify what's available and
combine them with the spoils of the early game to make sure you are suitably
equipped for the perils that lay ahead.&lt;/p&gt;
&lt;h3&gt;Rogue&lt;/h3&gt;
&lt;p&gt;As you step into the dungeon, you enter an older, more primitive world. This is
&lt;a href="https://nethackwiki.com/wiki/Rogue_(game)"&gt;Rogue&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The dungeon has no colour, as was the world in 1980" src="https://thinkmoult.com/assets/2-1-rogue1.png"&gt;&lt;/p&gt;
&lt;p&gt;NetHack was first released in 1987. But NetHack didn't start in 1987, it was a
successor to the open-source game Hack in 1984, developed and distributed on
Usenet (hence the name NetHack).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Dungeons were simpler back then, with gridded layouts" src="https://thinkmoult.com/assets/2-1-rogue2.png"&gt;&lt;/p&gt;
&lt;p&gt;Hack was itself a clone of the closed source game Rogue, released in 1980 that
would soon inspire an entire genre of gaming, which would then inspire many
modern games to come.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Take a pause, and break the fourth wall into the history of gaming itself" src="https://thinkmoult.com/assets/2-1-rogue3.png"&gt;&lt;/p&gt;
&lt;p&gt;The dungeons here replicate the original Rogue, without colour, using the same
symbols and rules that the original game would play, as a modern tribute to the
origins of the dungeons that you now crawl.&lt;/p&gt;
&lt;p&gt;&lt;img alt="An older, more primitive world" src="https://thinkmoult.com/assets/2-1-rogue4.png"&gt;&lt;/p&gt;
&lt;h3&gt;Quest&lt;/h3&gt;
&lt;p&gt;Beyond Rogue, you will receive a telepathic message from your ancient leader.
Who this leader is will depend on your role, a knight may be approached by King
Arthur himself, whereas a healer may be summoned by Hippocrates.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Your quest leader will open a portal to your homeland" src="https://thinkmoult.com/assets/2-2-quest-01.png"&gt;&lt;/p&gt;
&lt;p&gt;Your homeland and your peers are plagued with a problem. Like your leader, the
problem differs from role to role and it is your responsibility to discover what
evil has befallen.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The portal may be located anywhere in the dungeon, and lead to different places" src="https://thinkmoult.com/assets/2-2-quest-02.png"&gt;&lt;/p&gt;
&lt;p&gt;The Quest is a great journey upon which all seekers of the Amulet must embark.
The two adventures have become entwined, and it is said that the nemesis has an
ancient artifact within their possession, critical to the success of your
mission. This is a small silver bell, its powers yet to be revealed.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The portal leads to another adventure, its fate entwined with your own" src="https://thinkmoult.com/assets/2-2-quest-03.png"&gt;&lt;/p&gt;
&lt;p&gt;Your homeland itself varies from role to role, where the portal takes you, we
cannot say.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You must be ready before undertaking the quest" src="https://thinkmoult.com/assets/2-2-quest-04.png"&gt;&lt;/p&gt;
&lt;p&gt;Valkyries are brought back to the bitter cold, snow, and icy mountains. The
Shrine of Destiny is found there, where your leader, the Norn, awaits you.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Shrine of Destiny is found in the snowy mountains" src="https://thinkmoult.com/assets/2-2-quest-11.png"&gt;&lt;/p&gt;
&lt;p&gt;Lord Surtur has taken the Orb of Fate and is unleashing Ragnarok. In places, the
snow and ice have been melted into steaming pools of water. Fumaroles and pools
of bubbling lava surround your homeland.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Something is very wrong, lava is erupting" src="https://thinkmoult.com/assets/2-2-quest-12.png"&gt;&lt;/p&gt;
&lt;p&gt;A ranger will find themselves in an ancient forest grove. A herd of centaurs are
led by Orion, your leader.&lt;/p&gt;
&lt;p&gt;&lt;img alt="An ancient forest grove populated by centaurs" src="https://thinkmoult.com/assets/2-2-quest-21.png"&gt;&lt;/p&gt;
&lt;p&gt;In the caves of wumpus under the camp, Scorpius has stolen the Longbow of Diana.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You must journey beneath the camp to find Scorpius" src="https://thinkmoult.com/assets/2-2-quest-22.png"&gt;&lt;/p&gt;
&lt;p&gt;A monk will return to the Monastery of Chan-Sune and will meet your former
teacher, the Grand Master.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Monastery of Chan-Sune" src="https://thinkmoult.com/assets/2-2-quest-31.png"&gt;&lt;/p&gt;
&lt;p&gt;Despite the peaceful appearances, Earth Elementals are rising and slaying the
students. You will travel to the Monastery of the Earth-Lord to fight their
leader.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Eyes of the Overworld bring astral visions to the wearer in the Monstary
of the Earth-Lord" src="https://thinkmoult.com/assets/2-2-quest-32.png"&gt;&lt;/p&gt;
&lt;h3&gt;Fort Ludios&lt;/h3&gt;
&lt;p&gt;Deeper in the dungeon past your Quest, you may or may not stumble upon a secret
stash of gold, jewels, and treasures.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A cache of treasures may be found hidden in the dungeons" src="https://thinkmoult.com/assets/2-3-fort1a.png"&gt;&lt;/p&gt;
&lt;p&gt;The location of this treasure is unknown. It is one of many hidden vaults
containing riches interspersed throughout the dungeons and guarded by
otherworldly soldiers.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The vault is hidden and guarded" src="https://thinkmoult.com/assets/2-3-fort1b.png"&gt;&lt;/p&gt;
&lt;p&gt;But this vault is not like the others, for it contains a magic portal to Fort
Ludios itself.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Within the vault are not just treasures, but a portal to another realm" src="https://thinkmoult.com/assets/2-3-fort1c.png"&gt;&lt;/p&gt;
&lt;p&gt;Fort Ludios, a fabled land of riches is ruled by King Croesus. It is the Fort
Knox of the dungeons, housing gold beyond measure.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Within the vault are not just treasures, but a portal to another realm" src="https://thinkmoult.com/assets/2-3-fort2.png"&gt;&lt;/p&gt;
&lt;p&gt;Guarded by dragons and the armies of Croesus himself, it offers enough gold to
pay for all the spoils in the dungeon, but be warned that your mission to
recover the Amulet of Yendor is not earned through money.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Enough money to hang yourself, but money is not the only thing you need" src="https://thinkmoult.com/assets/2-3-fort3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Medusa's Island&lt;/h3&gt;
&lt;p&gt;As you descend further, the magical nature of the dungeons reveal that you are
not merely going deeper into the world, you are traveling through realms and
time. You find yourself at the edge of a swamp, the home of the gorgon Medusa.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You must cross water to reach Medusa, infested with snakes and monsters" src="https://thinkmoult.com/assets/2-4-medusa1.png"&gt;&lt;/p&gt;
&lt;p&gt;Perseus has failed, and it is now your turn. Somewhere across the swamp is her
island, where stone crumbles to sand. You must face her and prevail, or be
turned to stone.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Caution to all who enter Medusa's Island" src="https://thinkmoult.com/assets/2-4-medusa2.png"&gt;&lt;/p&gt;
&lt;h3&gt;The Castle&lt;/h3&gt;
&lt;p&gt;Medusa is the guardian of the foolish mortals who seek the Amulet below. Below
Medusa, the dungeons are no longer dungeons, the stone itself warps and twists
until you find yourself at an ancient citadel, representing the last bastion of
mortal resistance against the netherworld.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The castle, a bastion against the netherworld" src="https://thinkmoult.com/assets/2-5-castle1.png"&gt;&lt;/p&gt;
&lt;p&gt;The castle is barred. The drawbridge is up. The entrance blocked by a moat of
vicious sea creatures. The castle will not open, and you shall not enter.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A secret melody may twist the ancient tumblers and gears" src="https://thinkmoult.com/assets/2-5-castle2.png"&gt;&lt;/p&gt;
&lt;p&gt;Within the castle are armies and supplies to last the centuries. But hidden
within are also dragons, hiding in the shadows for the unwary assailant.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Beware, for here be dragons" src="https://thinkmoult.com/assets/2-5-castle3.png"&gt;&lt;/p&gt;
&lt;p&gt;In the very core of the castle, you will find that the castle is not only
guarding the mortal world outside and the dungeons beyond. The castle was built
around ancient trapdoors that lead past the mortal realms and into the
supernatural. Dragons bar the way, such that the dead do not rise and enter the
land of the living.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The dragons guard an ancient trapdoor" src="https://thinkmoult.com/assets/2-5-castle4.png"&gt;&lt;/p&gt;
&lt;h3&gt;The Valley of the Dead&lt;/h3&gt;
&lt;p&gt;As you fall through the trapdoor, you leave the mortal realm. This is the space
between worlds: the Valley of the Dead, and you must cross it.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A barren landscape leading to the afterlife" src="https://thinkmoult.com/assets/2-6-valley1.png"&gt;&lt;/p&gt;
&lt;p&gt;You are surrounded by tombs. You may read the epitaphs, should they help you in
your mission for the Amulet of Yendor. Prepare to enter the late game.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You walk through a quiet graveyard" src="https://thinkmoult.com/assets/2-6-valley2.png"&gt;&lt;/p&gt;
&lt;h2&gt;Late game&lt;/h2&gt;
&lt;p&gt;You're alive, and you have resources. The late game is now about deliberate
planning and preparation.&lt;/p&gt;
&lt;p&gt;You will need to ensure that you have everything you need to steal the Amulet of
Yendor. You will have to prepare for the unknown, and have enough tricks up your
sleeve to bypass the many obstacles guarding the amulet, and enough ways to
escape when the situations grow out of control. You will need remedies for
illness, food, methods to detect enchantments, maps, and raw strength.&lt;/p&gt;
&lt;h3&gt;Asmodeus' Lair&lt;/h3&gt;
&lt;p&gt;At the end of the Valley is the entrance of Gehennom. Beware, unspeakable evil
and cruelty lies ahead.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The tunnel into Gehennom" src="https://thinkmoult.com/assets/3-1-asmodeus1.png"&gt;&lt;/p&gt;
&lt;p&gt;Gehennom is filled with fire, smoke, and evil creatures and demons. But perhaps
most characteristic is that Gehennom itself is warped into a maze, where you
either find the way through, or perish.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The corridors of Gehennom twist and turn into a maze" src="https://thinkmoult.com/assets/3-1-asmodeus2.png"&gt;&lt;/p&gt;
&lt;p&gt;As you descend, the labrynth changes, some wider, some thinner. Demons guard the
passages, forcing you to fight or flee.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The labrynth is never the same" src="https://thinkmoult.com/assets/3-1-asmodeus3.png"&gt;&lt;/p&gt;
&lt;p&gt;Nestled within the maze is the Lair of Asmodeus. A suave yet unsettling demon
prince who may offer you a price for passage. Asmodeus knows you seek the
amulet, and such a mission does not pass lightly through his lair.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Asmodeus himself will greet you as you enter Gehennom" src="https://thinkmoult.com/assets/3-1-asmodeus4.png"&gt;&lt;/p&gt;
&lt;h3&gt;Juiblex's Lair&lt;/h3&gt;
&lt;p&gt;Deeper still in Gehennom, you will find yourself in a swamp. Crueler and fouler
than the waters of Medusa's island, this is the swamp of Juiblex, the demon
lord.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The swamp of Juiblex is covered is slime and formless monsters" src="https://thinkmoult.com/assets/3-2-juiblex1.png"&gt;&lt;/p&gt;
&lt;p&gt;Beware where you tread, for Juiblex himself has no form, and may arise from
anywhere in the swamp.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A misstep into the swamp may provoke Juiblex" src="https://thinkmoult.com/assets/3-2-juiblex2.png"&gt;&lt;/p&gt;
&lt;p&gt;You must make your way through to the other end of the swamp, where you may
continue your journey. The air is diseased, and should you fail, you will be
engulfed and join the swamp itself.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Try not to get engulfed" src="https://thinkmoult.com/assets/3-2-juiblex3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Baalzebub's Lair&lt;/h3&gt;
&lt;p&gt;Devoted to decay, destruction, demoralization, hysteria and panic, you shall
encounter Baalzebub, demon prince of the flies.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Swarms of flies surround Baalzebub's lair" src="https://thinkmoult.com/assets/3-3-baalzebub1.png"&gt;&lt;/p&gt;
&lt;p&gt;Baalzebub may also propose a bribe, but the price will be high.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Deep within Baalzebub's lair, you will find the way ahead" src="https://thinkmoult.com/assets/3-3-baalzebub2.png"&gt;&lt;/p&gt;
&lt;p&gt;Baalzebub lives within the rotting carcass of a huge fly, hidden within, is the
passage through Gehennom.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Deep within his lair, you will find the way ahead" src="https://thinkmoult.com/assets/3-3-baalzebub3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Orcus-Town&lt;/h3&gt;
&lt;p&gt;As you leave the maze, you find yourself standing at the edge of a sprawling
city: Orcus-Town.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A vast cursed city deep within Gehennom" src="https://thinkmoult.com/assets/3-4-orcus1.png"&gt;&lt;/p&gt;
&lt;p&gt;Orcus-Town is a dark place, with abandoned homes and descecrated temples.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The walls of the dwellings and crumbling" src="https://thinkmoult.com/assets/3-4-orcus2.png"&gt;&lt;/p&gt;
&lt;p&gt;Orcus, the demon prince, rules over the town and may be found deep within.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Deep within Orcus-Town, you will find Orcus" src="https://thinkmoult.com/assets/3-4-orcus3.png"&gt;&lt;/p&gt;
&lt;p&gt;You may also find shady dealers and cursed wares. But be warned, some of these
objects may not be as they seem ...&lt;/p&gt;
&lt;p&gt;&lt;img alt="Extortionate prices and suspicious goods are commonplace in Orcus-Town" src="https://thinkmoult.com/assets/3-4-orcus4.png"&gt;&lt;/p&gt;
&lt;h3&gt;Vlad's Tower&lt;/h3&gt;
&lt;p&gt;Rising from the rocks, fire, and smoke of Gehennom is Vlad's Tower. Vlad, a
vampire, one of the most wretched, heinous, and depraved characters has taken up
residence in the midst of hell.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A tower, rising from the grounds of Gehennom" src="https://thinkmoult.com/assets/3-5-vlad1.png"&gt;&lt;/p&gt;
&lt;p&gt;Vlad, a covetous character, has many goods stored in his tower. At the top, you
will face Vlad himself on his throne.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A charred, ashen tower impervious to the flames of Gehennom" src="https://thinkmoult.com/assets/3-5-vlad2.png"&gt;&lt;/p&gt;
&lt;p&gt;One of the treasures Vlad holds is the Candelabrum of Invocation, a unique
candelabrum said to provide enough light to walk you through the elemental
planes.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Vlad holds the sacred Candelabrum of Invocation, which you must find" src="https://thinkmoult.com/assets/3-5-vlad3.png"&gt;&lt;/p&gt;
&lt;h3&gt;The Wizard's Tower&lt;/h3&gt;
&lt;p&gt;You find two small refuges from the heat of Gehennom, a lake amidst the flame
and smoke. Rising from both lakes is another tower. This time constructed rather
than hewn from the rock.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A lake houses a powerful and mighty wizard, the Wizard of Yendor" src="https://thinkmoult.com/assets/3-6-tower1.png"&gt;&lt;/p&gt;
&lt;p&gt;One of these towers is abandoned, whereas the other is the home of the legendary
Wizard of Yendor himself. Weary of lesser mortals, spurning all human company,
the Wizard lives in the depths of the Earth, taking with him the dreadful Book
of the Dead. You must find the true residence of the Wizard, and cross the lake.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Two such towers exist, one is abandoned, and the other is the true tower" src="https://thinkmoult.com/assets/3-6-tower2.png"&gt;&lt;/p&gt;
&lt;h3&gt;The Wizard of Yendor&lt;/h3&gt;
&lt;p&gt;You must ascend the tower, fighting the various creatures that lurk within.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The base of the tower, with chambers filled with evil creatures" src="https://thinkmoult.com/assets/3-7-yendor1.png"&gt;&lt;/p&gt;
&lt;p&gt;Midway up the tower, you will find a contingent of evil creatures, pets of the
Wizard of Yendor.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A huge arena of evil creatures await you" src="https://thinkmoult.com/assets/3-7-yendor2.png"&gt;&lt;/p&gt;
&lt;p&gt;At the top, surrounded by a circle of water, you will find the wizard meditating
within. You must duel him, but the wizard cannot truly die. You may vanquish his
body, but he will always return.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The wizard waits within the central spine of the top floor of the tower" src="https://thinkmoult.com/assets/3-7-yendor3.png"&gt;&lt;/p&gt;
&lt;h3&gt;The Vibrating Square&lt;/h3&gt;
&lt;p&gt;You are ready. The Wizard of Yendor is no more, and it is time for the heist to
begin. The Amulet of Yendor resides within the lowermost depths of Gehennom, in
Moloch's Sanctum.&lt;/p&gt;
&lt;p&gt;&lt;img alt="An ancient magical glyph embedded into the ground" src="https://thinkmoult.com/assets/3-8-vibsq1.png"&gt;&lt;/p&gt;
&lt;p&gt;However access to the Sanctum is hidden through an ancient enchantment. The
Oracle will guide you to the entrance: a mystical square, hidden at the end of
Gehennom.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You will find the square at the lowermost depth of Gehennom" src="https://thinkmoult.com/assets/3-8-vibsq2.png"&gt;&lt;/p&gt;
&lt;p&gt;The Vibrating Square is hidden. The location may be anywhere and it may look
like anything. You may only discover it through standing directly above it. When
you do, the ground will vibrate and the square shall reveal itself.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The square is hidden and may only be revealed by standing above" src="https://thinkmoult.com/assets/3-8-vibsq3.png"&gt;&lt;/p&gt;
&lt;p&gt;The Vibrating Square is protected with an enchantment. To enter through the
square, you must perform an invocation, as revealed by the Oracle.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You must perform the invocation to proceed" src="https://thinkmoult.com/assets/3-8-vibsq4.png"&gt;&lt;/p&gt;
&lt;h2&gt;End game&lt;/h2&gt;
&lt;p&gt;Now is the time. You must retrieve the Amulet of Yendor, or die in the attempt.&lt;/p&gt;
&lt;h3&gt;Invocation&lt;/h3&gt;
&lt;p&gt;You now have prepared the three critical items required to enter Moloch's
sanctum: the bell, book, and candle job.&lt;/p&gt;
&lt;p&gt;The first is the Silver Bell, from your Quest Nemesis in the mid game. Ringing
it will produce a pure sound to announce thee to the sanctum below.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Silver Bell, from your Quest nemesis" src="https://thinkmoult.com/assets/4-1-invocation1.png"&gt;&lt;/p&gt;
&lt;p&gt;The second is the Candelabrum of Invocation, from Vlad. The light from which
will show you the way through the depths past Gehennom itself to the Sanctum of
the evil god Moloch.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Candelabrum of Invocation, coveted by Vlad" src="https://thinkmoult.com/assets/4-1-invocation2.png"&gt;&lt;/p&gt;
&lt;p&gt;The third is the Book of the Dead, from the Wizard of Yendor. The terrible runes
when read, will cause the earth to tremble mightily and crumble away, to descend
to the Sanctum.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Book of the Dead, guarded by the Wizard of Yendor" src="https://thinkmoult.com/assets/4-1-invocation3.png"&gt;&lt;/p&gt;
&lt;p&gt;You ring the bell.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A pure sound is heard" src="https://thinkmoult.com/assets/4-1-invocation4.png"&gt;&lt;/p&gt;
&lt;p&gt;You light the candelabrum.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You see past the depths of Gehennom" src="https://thinkmoult.com/assets/4-1-invocation5.png"&gt;&lt;/p&gt;
&lt;p&gt;You recite the book.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The ground crumbles away and you are surrounded by water and towers of flame" src="https://thinkmoult.com/assets/4-1-invocation6.png"&gt;&lt;/p&gt;
&lt;h3&gt;Sanctum&lt;/h3&gt;
&lt;p&gt;There is no more return. You enter Moloch's Sanctum.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Moloch's Sanctum is a place of pure evil" src="https://thinkmoult.com/assets/4-2-sanctum1.png"&gt;&lt;/p&gt;
&lt;p&gt;This is a place of pure evil, beyond law, neutrality, and chaos. Within is the
Temple to Moloch surrounded by flame, where the high priest of Moloch holds the
fabled Amulet of Yendor itself.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A temple to Moloch holds the Amulet of Yendor" src="https://thinkmoult.com/assets/4-2-sanctum2.png"&gt;&lt;/p&gt;
&lt;p&gt;Fight, and win. Get the amulet!&lt;/p&gt;
&lt;h3&gt;Rise&lt;/h3&gt;
&lt;p&gt;As with any heist, getting the Amulet is not enough. You must now leave the
Dungeons of Doom.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You must leave the sanctum with the amulet" src="https://thinkmoult.com/assets/4-3-rise1.png"&gt;&lt;/p&gt;
&lt;p&gt;You must rise through the fiery mazes of Gehennom. The magic of the Amulet will
inhibit your progress, plunging you further down back into the Sanctum even as
you try to climb up.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Even as you rise, the amulet holds you back" src="https://thinkmoult.com/assets/4-3-rise2.png"&gt;&lt;/p&gt;
&lt;p&gt;You find yourself back at the entrance of the Dungeons of Doom, but you do not
see the sky and earth as you entered it. The Amulet's power is calling your god
to you. You rise, and go beyond the planes of life.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The entrance of the Dungeons of Doom is warped, and no longer lead to the
land of the living" src="https://thinkmoult.com/assets/4-3-rise3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Plane of Earth&lt;/h3&gt;
&lt;p&gt;The Amulet transports you to the first of the four elemental planes: The Plane
of Earth.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Plane of Earth is a small network of caves" src="https://thinkmoult.com/assets/4-4-earth1.png"&gt;&lt;/p&gt;
&lt;p&gt;You are is a small underground chamber. You must dig your way through to other
small cavernous pockets within the earth.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You must dig between the caverns" src="https://thinkmoult.com/assets/4-4-earth2.png"&gt;&lt;/p&gt;
&lt;p&gt;Even as you dig, rubble transforms into raw elemental beings, who are not happy
to find a stranger in their plane. But you must dig, for you must find the
portal through to the next elemental plane.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Hidden in the earth is a portal to the next elemental plane" src="https://thinkmoult.com/assets/4-4-earth3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Plane of Air&lt;/h3&gt;
&lt;p&gt;The Plane of Air finds you falling endlessly through empty space. There is no
ground, just clouds, storm, lighting, and thunder.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Clouds, storm, lighting, and thunder form the Plane of Air" src="https://thinkmoult.com/assets/4-5-air1.png"&gt;&lt;/p&gt;
&lt;p&gt;Walking through the clouds is perilous and filled with air elementals, who
surround you as a hurricane does.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Air elementals hide within the clouds waiting to ambush you" src="https://thinkmoult.com/assets/4-5-air2.png"&gt;&lt;/p&gt;
&lt;p&gt;Hidden within the clouds, an invisible portal will bring you to the next
elemental plane.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Hidden in the clouds is a portal to the next elemental plane" src="https://thinkmoult.com/assets/4-5-air3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Plane of Fire&lt;/h3&gt;
&lt;p&gt;Surrounded by flame and lava with flames falling from the sky, you find yourself
in the Plane of Fire.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The ground burns in the Plane of Fire" src="https://thinkmoult.com/assets/4-6-fire1.png"&gt;&lt;/p&gt;
&lt;p&gt;Fire elementals emerge from the ground, scorching their way through to you and
leaving a trail of noxious fumes.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Towers of flame erupt" src="https://thinkmoult.com/assets/4-6-fire2.png"&gt;&lt;/p&gt;
&lt;p&gt;One of these towers of flame is not like the others. One of these is a portal to
the next elemental plane.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Hidden in the flame is a portal to the next elemental plane" src="https://thinkmoult.com/assets/4-6-fire3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Plane of Water&lt;/h3&gt;
&lt;p&gt;You float within a huge air bubble. The Plane of Water is pure water, save for
supernatural air bubbles that hint at the treacherous currents that pull you
across the plane.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You are encased in a large air bubble floating around infinite water" src="https://thinkmoult.com/assets/4-7-water1.png"&gt;&lt;/p&gt;
&lt;p&gt;The bubbles coalesce and split continuously, and you must hop from bubble to
bubble plagued by Water Elementals.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Quickly jump from bubble to bubble, lest you drown" src="https://thinkmoult.com/assets/4-7-water2.png"&gt;&lt;/p&gt;
&lt;p&gt;One of these bubbles houses an invisible portal, to the final plane.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Hidden in a bubble is a portal to the next elemental plane" src="https://thinkmoult.com/assets/4-7-water3.png"&gt;&lt;/p&gt;
&lt;h3&gt;The Astral Plane&lt;/h3&gt;
&lt;p&gt;Beyond the Elemental Planes is the Astral Plane, the plane beyond the physical
elements, and the final frontier where beyond lies the gods themselves.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Astral plane is the final frontier from the physical to the realm of the
gods" src="https://thinkmoult.com/assets/4-8-astral1.png"&gt;&lt;/p&gt;
&lt;p&gt;The astral plane is the home of the angels, the highest priests who serve the
gods themselves, and yourself. The incarnations of the adventurer you might have
been.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Three chambers await you, one to the left, one straight ahead, and one to the
right" src="https://thinkmoult.com/assets/4-8-astral2.png"&gt;&lt;/p&gt;
&lt;p&gt;None of them are happy to see you. The Amulet of Yendor possesses powers that
mere mortals can scarcely comprehend. You are not worthy of it.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Which will you take?" src="https://thinkmoult.com/assets/4-8-astral3.png"&gt;&lt;/p&gt;
&lt;h3&gt;The High Altars&lt;/h3&gt;
&lt;p&gt;The three chambers hold the antithesis of Moloch's Temple in the Sanctum. One
is the Temple of Law, the other is the Temple of Neutrality, and the final is
the Temple of Chaos.&lt;/p&gt;
&lt;p&gt;Your pious alignment will guide you to the right temple, but guarding the three
temples are the Riders: horsemen of the apocalypse.&lt;/p&gt;
&lt;p&gt;The Temple of Law is guarded by Famine, whose very touch causes starvation and
crops to wither.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The lawful altar is bathed in white light from above" src="https://thinkmoult.com/assets/4-9-altar1.png"&gt;&lt;/p&gt;
&lt;p&gt;The Temple of Neutrality is guarded by Pestilence, whose touch causes sickness,
disease, and terminal illness.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The neutral altar is a grey void through which you may inspect" src="https://thinkmoult.com/assets/4-9-altar2.png"&gt;&lt;/p&gt;
&lt;p&gt;The Temple of Chaos is guarded by Death, whose embrace brings death to you.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The chaotic altar is a black puncture through the astral fabric" src="https://thinkmoult.com/assets/4-9-altar3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Ascend&lt;/h3&gt;
&lt;p&gt;The fourth horseman is &lt;strong&gt;You&lt;/strong&gt;. You are &lt;strong&gt;War&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Your battle is victorious. You stand having travelled through the depths of the
Earth and beyond, with your victims claimed by Death. You produce the Amulet of
Yendor and call upon your god with your offering.&lt;/p&gt;
&lt;p&gt;&lt;img alt="You are bathed in radiance ..." src="https://thinkmoult.com/assets/4-9-offer.png"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An invisible choir sings, and you are bathed in radiance...
"Mortal, thou hast done well!"
"In return for thy service, I grant thee the gift of Immortality!"
You ascend to the status of Demigod...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;p&gt;I hope you've enjoyed reading my creative interpretation and illustrated guide
to NetHack. All images were generated through the DALL-E AI and attempt to
reflect what ASCII and plaintext descriptions allude to as best as possible. You
can right click and view any image to see the higher resolution. I've done some
minor image editing to improve the generated images on occasion.&lt;/p&gt;
&lt;p&gt;Images purposely omit all characters and monsters, instead focusing on the
environs to preserve some imagination.&lt;/p&gt;
&lt;p&gt;Naturally, this is full of spoilers. But if you're reading down here either your
mousewheel is broken or you know that already.&lt;/p&gt;
&lt;p&gt;If you haven't played NetHack before, here's some screenshots of what playing
might look like from my first ascension. This uses a curses interface which
makes NetHack relatively modern (though it may not seem like it, if you've never
played a command line game before). Others may use different interfaces and
colours.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The Castle" src="https://thinkmoult.com/assets/nethack1.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="A maze in Gehennom" src="https://thinkmoult.com/assets/nethack2.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Minetown in the Gnomish Mines" src="https://thinkmoult.com/assets/nethack3.png"&gt;&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>My current hardware</title>
        <link href="https://thinkmoult.com/current-hardware.html" />
        <id>https://thinkmoult.com/current-hardware.html</id>
        <updated>2022-11-22</updated>
        <summary>A description of the hardware I currently use, purchased preloaded with Linux.</summary>
        <content type="html">

&lt;p&gt;My current hardware setup is a 2022 desktop from &lt;a href="https://www.linuxnow.com.au/"&gt;Linux
Now&lt;/a&gt; in Melbourne.&lt;/p&gt;
&lt;p&gt;Here's the obligatory Larry cowsay:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cowsay `uname -a`
 _________________________________________
/ Linux boxcat 6.6.62-gentoo-dist #1 SMP  \
| PREEMPT_DYNAMIC Sun Nov 17 19:34:53 -00 |
| 2024 x86_64 AMD Ryzen 5 7600X 6-Core    |
\ Processor AuthenticAMD GNU/Linux        /
 -----------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can and should also &lt;a href="https://thinkmoult.com/assets/../installing-gentoo-android-chroot.html"&gt;run Gentoo on your
phone&lt;/a&gt;. Combine your phone with
a Bluetooth keyboard and mouse, and you have a full-on portable workstation.
Your desktop will be much more powerful than your laptop, at half the price.&lt;/p&gt;
&lt;p&gt;Here are the hardware specs.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AMD Ryzen 5 7600X CPU&lt;/li&gt;
&lt;li&gt;AMD B650 Mainboard&lt;/li&gt;
&lt;li&gt;4GB NVIDIA Geforce GTX 1650. Yes, proprietary blob drivers are in use.&lt;/li&gt;
&lt;li&gt;32GB DDR5 4800Mhz (2x16GB) RAM&lt;/li&gt;
&lt;li&gt;1TB WD Blue SN570 M.2 SSD&lt;/li&gt;
&lt;li&gt;23.6in 1920x1080 16:9 LCD Monitor&lt;/li&gt;
&lt;li&gt;Filco Majestouch-2, Tenkeyless keyboard&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Filco Majestouch-2, Tenkeyless keyboard" src="https://thinkmoult.com/assets/20180105_153207.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Software-wise, it is running &lt;a href="http://gentoo.org/"&gt;Gentoo Linux&lt;/a&gt; with
&lt;a href="https://thinkmoult.com/assets/../ratpoison-an-efficient-and-minimalist-wm.html"&gt;Ratpoison&lt;/a&gt;. Backup
server is hosted by &lt;a href="http://rsync.net/"&gt;rsync.net&lt;/a&gt;.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>How do colours work in IFC?</title>
        <link href="https://community.osarch.org/discussion/comment/13744/#Comment_13744" />
        <id>https://community.osarch.org/discussion/comment/13744/#Comment_13744</id>
        <updated>2022-11-18</updated>
        <summary>A detailed explanation of how colours work in IFC. Colours seem deceptively simple, but are often confused with physical materials. Colours may be used for simple shading, rendering, and light simulation.</summary>
    </entry>
    <entry>
        <title>Native OpenBIM and the rise of Open Source in AEC</title>
        <link href="https://aecmag.com/collaboration/native-openbim-and-the-rise-of-open-source-in-aec/" />
        <id>https://aecmag.com/collaboration/native-openbim-and-the-rise-of-open-source-in-aec/</id>
        <updated>2022-07-11</updated>
        <summary>A description of the limitations behind translated OpenBIM, and how native OpenBIM with free software is changing the industry.</summary>
    </entry>
    <entry>
        <title>Understanding textures and shaders in IFC, X3D, and glTF</title>
        <link href="https://community.osarch.org/discussion/877/understanding-how-textures-and-shaders-work-in-ifc" />
        <id>https://community.osarch.org/discussion/877/understanding-how-textures-and-shaders-work-in-ifc</id>
        <updated>2022-01-31</updated>
        <summary>I analyse how IFC4 has implemented shaders and textures based on X3D, and propose a series of backward compatible changes for IFC4X3 to modernise and simplify shader definitions in line with X3D4 and glTF.</summary>
    </entry>
    <entry>
        <title>Introduction to OpenBIM, Native IFC, and Open Source AEC</title>
        <link href="https://www.youtube.com/watch?v=h2Rv9iu7yDk" />
        <id>https://www.youtube.com/watch?v=h2Rv9iu7yDk</id>
        <updated>2021-07-24</updated>
        <summary>This introduction to OpenBIM, Native IFC, and Open Source AEC was given as a keynote speech at the CAAD Futures conference in 2021. CAAD Futures is a biannual international conference on computational architecture founded in 1985. This introduction to Native IFC covers all the basic concepts, code, libraries, and tools to get started building your own Open Source AEC tools.</summary>
    </entry>
    <entry>
        <title>Free / libre &amp; Open Source software in AEC, and how it impacts OpenBIM - buildingSMART Summit 2020</title>
        <link href="https://www.youtube.com/watch?v=DK4zmfkp_pw" />
        <id>https://www.youtube.com/watch?v=DK4zmfkp_pw</id>
        <updated>2020-10-28</updated>
        <summary>Open source and OpenBIM complement each other, helping empower the users and processes of the Architecture, Engineering, and Construction industry. This presentation talks about the history of free software in the AEC industry, and the work done by the OSArch.org community to bring OpenBIM into our digitally enabled future. This talk was presented at the buildingSMART Summit 2020 under the technology section.</summary>
    </entry>
    <entry>
        <title>Effective altruism and living a net-positive life</title>
        <link href="https://thinkmoult.com/effective-altruism-living-net-positive-life.html" />
        <id>https://thinkmoult.com/effective-altruism-living-net-positive-life.html</id>
        <updated>2019-08-02</updated>
        <summary>I describe how average individuals can impact the world in a positive way in all aspects of their living, all under a budget of 200 dollars a month. The net-positive lifestyle uses concepts of biocapacity, ecological accounting, and effective altruism.</summary>
        <content type="html">

&lt;p&gt;If you have an annual income of 32,400 USD or more per year, you belong to an
exclusive club of &lt;a href="https://www.investopedia.com/articles/personal-finance/050615/are-you-top-one-percent-world.asp"&gt;the richest 1% in the
world&lt;/a&gt;.
This might sound absurd to those new to the concept of global income inequality,
but is perhaps a bit more palatable when we realise that &lt;a href="https://ourworldindata.org/extreme-poverty"&gt;a third of the world
lives on 10 dollars a day&lt;/a&gt; (that's
3,650 USD a year).&lt;/p&gt;
&lt;p&gt;A common response to hearing this is that it can be explained through cheaper
goods in poor countries, exchange rates, or that poor people can produce a lot
of their goods and don't need as much currency. However, it is possible to
account for purchasing power parity and the economic value of self-produced
goods. Fact check after fact check confirms this - if you are reading this
article from a first-world country, you are likely in the 1%. If you are still
incredulous that people can survive on so little money, the answer is that
&lt;em&gt;they don't&lt;/em&gt;. The global poor experience malnutrition, limited water, little or
no electricity, lack  healthcare, and end up &lt;a href="https://ourworldindata.org/life-expectancy"&gt;dying up to 30 years
earlier than the rich&lt;/a&gt; as a result.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The poor die up to 30 years earlier than the rich" src="https://thinkmoult.com/assets/ourworldindata_no-100-charts-banner-life-expectancy-vs-gdp-scatter.png"&gt;&lt;/p&gt;
&lt;p&gt;What responsibilities should the 1% have? We know that there are global issues
facing the 99% less fortunate. However, as we surround ourselves with those
equally rich or richer than us, we feel overwhelmingly average.&lt;/p&gt;
&lt;p&gt;As mere individuals, the scale and complexity of these problems are hard to
comprehend. Often, we choose to simply ignore them, chasing the smaller
personal goals we have set in our individual rat races, like buying a house or
raising kids. We hope that there is someone else, someone smarter, richer, and
more influential, who will solve the problems for us. Is there a practical way
to both live our lives and do good in the world?&lt;/p&gt;
&lt;p&gt;In my search for answers, I have come across concepts which I have distilled
into my own practical solution described in this article. I hope it may help
spark debate, and for others to improve on what I have discovered so far.&lt;/p&gt;
&lt;h2&gt;Global problems: which should we address?&lt;/h2&gt;
&lt;p&gt;Global poverty, climate change, the superbug, and AI misuse are a small sample
of the biggest issues facing humanity. But there's not much use in solving
global poverty if the Earth stops being able to sustain life. In the long-term,
in addition to tackling human-specific problems, there is a more fundamental
issue that all other initiatives need to comply with.&lt;/p&gt;
&lt;p&gt;Simply put, the Earth produces a fixed amount of resources annually that we can
work with, called &lt;em&gt;biocapacity&lt;/em&gt;. In the same way that overdrawing funds from
the bank results in a financial crisis, we need to ensure that we don't
overdraw the Earth's capacity to sustain life while solving problems. To do this, we need to determine our environmental budget.&lt;/p&gt;
&lt;p&gt;In Sydney, Australia, I am surrounded by convenience. I have
electricity, water, and waste management. I am surrounded by shops, restaurants,
roads, parks, and schools. I am also surrounded by lots of other people, each
enjoying the same convenience as me. What I &lt;em&gt;don't see&lt;/em&gt; is the infrastructure
required to provide this convenience, and which fraction of that infrastructure
is solely dedicated towards my lifestyle.&lt;/p&gt;
&lt;p&gt;The &lt;a href="http://data.footprintnetwork.org/"&gt;Global Footprint Network&lt;/a&gt; figures that
the average person in Australia requires 6.6 global hectares of productive
resources (in 2016). The unit of a global hectare is a little difficult to
explain, but I can loosely approximate it as a regular hectare. This means that
somewhere out there, there are 9-10 FIFA football fields of infrastructure,
producing the water, food, clothes, construction material for my house,
electronics for my computer, and so on, dedicated &lt;em&gt;just for me&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The world map of ecological footprint per capita in gha (2016), graphic from footprintnetwork.org" src="https://thinkmoult.com/assets/ecological-footprint-per-capita-in-gha.png"&gt;&lt;/p&gt;
&lt;p&gt;The good news is that Australia is a big country. Australia as a country can
naturally regenerate 12.3 global hectares worth of resources per person per
year. This means that Australia can let all of its residents happily live at
this level of consumption, and each person in Australia has 5.7gha of surplus
left to share with the kangaroos, koalas, and thousands of other species that
also live in Australia. It sounds a little selfish to take half the area just
for humans, but it's certainly better than nothing.&lt;/p&gt;
&lt;p&gt;However, not every country is as large or lucky as Australia, and not every
country is as sparsely populated as Australia. Globally, we overdraw the Earth's
resources, with humans consuming the equivalent to 1.7 Earths biocapacity.
Earth may currently have enough stock to allow for this, but not all stock is
equal, and efforts required to tap into this stock are at the expense of others
species.&lt;/p&gt;
&lt;p&gt;The extrapolation of this form of excessive consumption is mass extinction.
Ethically, it's probably a good idea to avoid this. Unfortunately, the
extinction process has already started.
&lt;a href="http://wwf.panda.org/our_work/biodiversity/biodiversity/"&gt;WWF&lt;/a&gt; estimates
extinction rates that are 1,000 to 10,000 times higher than the background
extinction rate (i.e. the rate if humans weren't around).&lt;/p&gt;
&lt;p&gt;Regardless of any large issue we choose to tackle, our strategy needs to also be
such that &lt;em&gt;our ecological footprint does not exceed the biocapacity available&lt;/em&gt;. Can we balance our ecological budget and do good at the same time?&lt;/p&gt;
&lt;h2&gt;Net-positive living is the solution to biocapacity overdrafting&lt;/h2&gt;
&lt;p&gt;Architects are no strangers to minimising ecological footprint, otherwise known
as sustainable design. When architects design buildings, the good ones usually
consider strategies to minimise unnecessary resources, be it electricity, water,
or construction material. Some architects go further and try to design buildings
that &lt;em&gt;produce&lt;/em&gt; ecological resources. This is a concept called net-positive, or
regenerative architecture.&lt;/p&gt;
&lt;p&gt;Net-positive buildings are designed as a species within an ecosystem. These
buildings, like all species, consume resources, but most importantly, &lt;em&gt;produce&lt;/em&gt;
resources that benefit other species. This is similar to how biological species
work in natural ecosystems. These relationships are important, as the more
interdependent species are, the more resilient an ecosystem is against the risk
of collapse.&lt;/p&gt;
&lt;p&gt;The good news is that we have managed to design net-positive buildings with a
ledger of their biological impacts over their lifespan. Where they take from the
environment, a strategy is in place to give back more than they took. There are
buildings that &lt;a href="https://ecodatacenter.uk/climate-positive/"&gt;sequester more carbon than they
output&lt;/a&gt;, or &lt;a href="https://vancouverconvention.cdn.prismic.io/vancouverconvention%2F799cc6be-2b09-403b-b1bf-f5424103a1c6_vancouver+convention+centre_sustainability+fact+sheet.pdf"&gt;improve water
quality&lt;/a&gt;,
or &lt;a href="https://zaytunafarm.com/about-us/"&gt;improve soil fertility&lt;/a&gt;, or &lt;a href="https://www.earthshipglobal.com/some-of-our-previous-projects"&gt;reduce
ecological
dead-ends&lt;/a&gt;, or
&lt;a href="https://regenesisgroup.com/project/the-willow-school/"&gt;provide habitat&lt;/a&gt;. &lt;em&gt;So
if we can design buildings to be net-positive,
can we design our lifestyles to be net-positive too?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In the case of humans, we consume a lot. Minimising our consumption (and
limiting population growth) are valid and extremely effective strategies.
However, in this article I want to talk about what we &lt;em&gt;produce&lt;/em&gt;, which is a
trickier problem. Things we produce have an abnormally large negative
contribution to the ecosystem. As an example, our production of plastic is a
bit of an ecological dead-end, as it doesn't create useful nutrients that new
life can spring from. In fact, our plastic tends to almost universally harm
other species.&lt;/p&gt;
&lt;p&gt;As you're probably aware, it is quite hard to avoid plastic. Indeed, plastic is
just one of many problems that are built into our lifestyles and urban
infrastructure. The very act of commuting to work produces air pollution and
burns carbon. Eating a meal contributes towards unethical farming practices and
drinking water adds just that bit more to the unsustainable extraction of
freshwater.&lt;/p&gt;
&lt;p&gt;There are "extreme" lifestyle changes that have been demonstrated to mitigate
these issues. Such examples are &lt;a href="http://www.learnpermaculture.com/"&gt;urban
permaculture&lt;/a&gt;,
&lt;a href="https://en.wikipedia.org/wiki/Veganism"&gt;veganism&lt;/a&gt;, the &lt;a href="https://zerowastehome.com/2017/01/24/tedx-talk-zero-waste-is-not-recycling-more-but-less/"&gt;zero-waste
movement&lt;/a&gt;, and &lt;a href="https://stallman.org/articles/children.html"&gt;not having children&lt;/a&gt;.
They require a level of discipline and dedication that may be simply unlikely
for lots of people. It also requires a lot of research about things we aren't
trained in or access to things we don't have. For instance, if I live in a 1
bedroom apartment with no garden, my options for planting trees to offset my
carbon footprint are limited. Or perhaps we want to help with the issue of
water scarcity, but we have no idea what we can even do.&lt;/p&gt;
&lt;p&gt;To start with, I've identified the following major categories of human
consumption and production. There are probably more, but it's a start:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Carbon footprint&lt;/li&gt;
&lt;li&gt;Ethical food consumption&lt;/li&gt;
&lt;li&gt;Sustainable water usage&lt;/li&gt;
&lt;li&gt;Biodiversity and loss of ecosystems&lt;/li&gt;
&lt;li&gt;Waste management&lt;/li&gt;
&lt;li&gt;Air pollution and quality&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I'm not an expert on any of these topics. They're all big issues, but try as I might to avoid plastic, take the train, or buy free-range eggs, what impact can I really have?&lt;/p&gt;
&lt;p&gt;What if we could pay others who are trained and actively involved to solve the
problems for us? It might sound like a cop-out, but if the alternative is doing
nothing, what could we achieve with purely our wallets? How do we find these
people? How do we guarantee that they can make a difference?   &lt;em&gt;If we
make &lt;strong&gt;32,400&lt;/strong&gt; USD a year as the richest &lt;strong&gt;1%&lt;/strong&gt; of the world, is &lt;strong&gt;1,620&lt;/strong&gt; dollars a year,
&lt;strong&gt;135&lt;/strong&gt; dollars a month, or &lt;strong&gt;5%&lt;/strong&gt; of our salary enough to live a net-positive life?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;It might sound crazy, but it might just be possible. Let me explain how.&lt;/p&gt;
&lt;h2&gt;Effective altruism allows specialists to do what they do best&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.ted.com/talks/peter_singer_the_why_and_how_of_effective_altruism"&gt;Effective
altruism&lt;/a&gt;
is the concept that not all altruistic efforts are equal. The example given by
Peter Singer in his TED talk is that if you were interested in helping blind
people, one option is to sponsor a guide dog. The total cost of training a
guide dog and its client comes out to above 40,000USD. However, there are blind
people in developing countries which can have treatments that only amount to
25USD per treatment, thanks to the preventability of the affliction, and the
magic of exchange rates. Therefore, a utilitarian approach would suggest that a
charity dealing with the latter would be 1,000 times more cost-effective than
raising guide dogs.&lt;/p&gt;
&lt;p&gt;As a stellar example, the &lt;a href="https://www.againstmalaria.com/"&gt;Against Malaria Foundation&lt;/a&gt;
recommended by &lt;a href="https://www.givewell.org/charities/top-charities"&gt;GiveWell&lt;/a&gt; has
a return of &lt;a href="https://www.thelifeyoucansave.org/impact-calculator"&gt;protecting 90 people from malaria for 3-4 years for every 100USD
donated&lt;/a&gt;. If you
donated 5% of your 32,400USD yearly income, you would protect 1,450 people from malaria
every year. In contrast, if you quit your job and became a doctor, you would
only &lt;a href="https://80000hours.org/2012/09/how-many-lives-does-a-doctor-save-part-3-replacement-84/"&gt;save about 20 lives over a 43-year
career&lt;/a&gt;.
This doesn't mean that doctors aren't good to the world, on the contrary:
doctors are what makes health improvement even possible. It also doesn't mean
that doctors should quit their jobs: that would be the wrong conclusion. What
it does demonstrate is that a focused financial redirection can have a large
impact, even if you aren't employed in the industry.&lt;/p&gt;
&lt;p&gt;By identifying effective initiatives that others are taking to solve global problems, can we support them financially to "offset" the negative aspects of our own lives? To answer this, we will need three things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;An account of our own ecological footprint&lt;/li&gt;
&lt;li&gt;An initiative which makes the world a better place with measurable impacts&lt;/li&gt;
&lt;li&gt;A dollar value to offset our actions&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I will give examples from my own life below, using the categories of human consumption and production identified above.&lt;/p&gt;
&lt;h2&gt;Example ecological footprint calculations&lt;/h2&gt;
&lt;h3&gt;Carbon footprint&lt;/h3&gt;
&lt;p&gt;The concept of a carbon footprint has been heavily researched. This makes it
easy to calculate my personal carbon footprint, easy to identify initiatives
that help store carbon, and easy to place a dollar value.&lt;/p&gt;
&lt;p&gt;We tend to emit carbon directly through our transport, and indirectly through
our lifestyles. These are easily calculated using online carbon calculators
such as this one from &lt;a href="https://climatecare.org/calculator/"&gt;ClimateCare.org&lt;/a&gt;
and this one from
&lt;a href="https://www.carbonfootprint.com/calculator.aspx"&gt;CarbonFootprint.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Carbon from electricity usage is included in my electricity bill. I actually
pay more for green energy (note: renewables still have a carbon footprint, just
less so!), but in the figures below I have pretended that I do not purchase
green energy.&lt;/p&gt;
&lt;p&gt;Car travel can be derived by looking at my car maintenance logbook and the
odometer readings. Based on data from 43 vehicles, 1,329 fuel-ups and 351,879
miles of driving, the &lt;a href="http://www.fuelly.com/car/honda/jazz/2006"&gt;2006 Honda Jazz gets a combined average MPG of
33.63&lt;/a&gt; with a 0.50 MPG margin of
error. Feel free to look up your car.&lt;/p&gt;
&lt;p&gt;Train and bus travel is easy to calculate by measuring a map. You can do this
for free using Google Maps online, although if you are capable I would
encourage doing this exercise with open-source software such as
&lt;a href="https://www.qgis.org/"&gt;QGIS&lt;/a&gt; and
&lt;a href="https://www.openstreetmap.org/"&gt;OpenStreetMaps&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here are my personal results for the first six months of 2019:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Jan 2019&lt;/strong&gt;: 7.59 tCO2eq&lt;ul&gt;
&lt;li&gt;236kWh of electricity: 0.21 tCO2eq&lt;/li&gt;
&lt;li&gt;730km of car travel: 0.13 tCO2eq&lt;/li&gt;
&lt;li&gt;716km of train travel: 0.03 tCO2eq&lt;/li&gt;
&lt;li&gt;3km of bus travel: negligible&lt;/li&gt;
&lt;li&gt;1500-2000USD of secondary emissions: 7.21 tCO2eq&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Feb 2019&lt;/strong&gt;: 8.74 tCO2eq&lt;ul&gt;
&lt;li&gt;207kWh of electricity: 0.18 tCO2eq&lt;/li&gt;
&lt;li&gt;659km of car travel: 0.12 tCO2eq&lt;/li&gt;
&lt;li&gt;845km of train travel: 0.04 tCO2eq&lt;/li&gt;
&lt;li&gt;15km of bus travel: negligible&lt;/li&gt;
&lt;li&gt;1500-2000USD of secondary emissions: 8.40 tCO2eq&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;March 2019&lt;/strong&gt;: 7.43 tCO2eq&lt;ul&gt;
&lt;li&gt;229kWh of electricity: 0.20 tCO2eq&lt;/li&gt;
&lt;li&gt;730km of car travel: 0.13 tCO2eq&lt;/li&gt;
&lt;li&gt;803km of train travel: 0.04 tCO2eq&lt;/li&gt;
&lt;li&gt;1500-2000USD of secondary emissions: 7.06 tCO2eq&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;April 2019&lt;/strong&gt;: 9.14 tCO2eq&lt;ul&gt;
&lt;li&gt;Flight from Sydney (SYD) to Kuala Lumpur (KUL) via Singapore (SIN) (return): 1.85 tCO2eq&lt;/li&gt;
&lt;li&gt;222kWh of electricity: 0.19 tCO2eq&lt;/li&gt;
&lt;li&gt;706km of car travel: 0.13 tCO2eq&lt;/li&gt;
&lt;li&gt;281km of train travel: 0.01 tCO2eq&lt;/li&gt;
&lt;li&gt;5km of bus travel: negligible&lt;/li&gt;
&lt;li&gt;1500-2000USD of secondary emissions: 6.96 tCO2eq&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;May 2019&lt;/strong&gt;: 9.62 tCO2eq&lt;ul&gt;
&lt;li&gt;(Forecasted) 229kWh of electricity: 0.20 tCO2eq&lt;/li&gt;
&lt;li&gt;730km of car travel: 0.13 tCO2eq&lt;/li&gt;
&lt;li&gt;779km of train travel: 0.03 tCO2eq&lt;/li&gt;
&lt;li&gt;1500-2000USD of secondary emissions: 9.26 tCO2eq&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;June 2019&lt;/strong&gt;: 7.8 tCO2eq&lt;ul&gt;
&lt;li&gt;(Forecasted) 222kWh of electricity: 0.19 tCO2eq&lt;/li&gt;
&lt;li&gt;706km of car travel: 0.13 tCO2eq&lt;/li&gt;
&lt;li&gt;834km of train travel: 0.04 tCO2eq&lt;/li&gt;
&lt;li&gt;1500-2000USD of secondary emissions: 7.44 tCO2eq&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This gives an average of ~8.4 tonnes of CO2 per month. I personally find it
interesting how much higher secondary emissions are compared to primary
emissions.&lt;/p&gt;
&lt;p&gt;Charity evaluators have heavily researched carbon initiatives. One of the most
cost-effective charities in the field is the &lt;a href="https://www.coolearth.org/"&gt;Cool
Earth&lt;/a&gt; initiative. If the &lt;a href="https://www.givingwhatwecan.org/report/cool-earth/#3-overall-evaluation"&gt;Cool Earth charity is
able to reduce CO2 emissions by 0.38 USD per
tCO2eq&lt;/a&gt;,
it will cost me only 39USD per year (or 3 dollars 20 cents per month) to become
net-zero in terms of carbon. Even if I conservatively took the upper bound of
the research estimate at 0.71 USD per tCO2eq, it only comes out to be roughly
6USD a month. This is very affordable.&lt;/p&gt;
&lt;p&gt;I'm in Australia, so if I donate 20AUD a month (the cost of a dinner at a nice
restaurant), this is equivalent to reducing all my CO2 emissions 2-4 times. This
should be enough to cover any inaccuracies in my estimations, and still have an
additional net-positive impact.&lt;/p&gt;
&lt;p&gt;For interested readers, there is some &lt;a href="https://forum.effectivealtruism.org/posts/RnmZ62kuuC8XzeTBq/why-we-have-over-rated-cool-earth"&gt;criticism of Cool
Earth&lt;/a&gt;,
as well as suggestions to look at other approaches such as initiatives around
contraception.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Result: ~14USD per month&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Ethical food consumption&lt;/h3&gt;
&lt;p&gt;Our food systems have an animal cruelty problem. We've covered the carbon
aspect of our eating, and later we'll cover the water use and loss of
biodiversity, but we need to do something about our actual treatment of
animals.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://data.oecd.org/agroutput/meat-consumption.htm"&gt;average Australian in 2017 eats 8.6kg of sheep, 21.1kg of beef, 21.3kg of
pork, and 44kg of poultry every
year&lt;/a&gt;. Let's round that
up to 100kg of meat carcass per year. Note that our actual consumption weight
would be slightly less, as carcass includes disposable parts such as bones,
food prep, and spoilage.&lt;/p&gt;
&lt;p&gt;Charities that deal with animal cruelty are researched to a lesser quality
compared to human charities or environmental charities. Simply put, it's harder
to measure the quality of life changes with farming practices, and even harder
to confidently attribute these changes to the actions of a charity.&lt;/p&gt;
&lt;p&gt;That said, &lt;a href="https://animalcharityevaluators.org/"&gt;Animal Charity Evaluators&lt;/a&gt;,
the animal-focused equivalent of GiveWell mentioned above recommends the &lt;a href="https://albertschweitzerfoundation.org/"&gt;Albert
Schweitzer Foundation&lt;/a&gt;. Here's the
&lt;a href="https://animalcharityevaluators.org/charity-review/albert-schweitzer-foundation/#overview"&gt;claim from the
website&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;From an average $1,000 donation, ASF would spend about $530 on corporate
outreach campaigns. They would spend about $270 on individual outreach, $160
on legal advocacy, and $40 on media outreach. Our rough estimate is that
these activities combined would spare -110,000 to 220,000 animals from life
in industrial agriculture.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The negative values are because it is quite hard to actually guarantee that the
charity itself is doing good instead of harm. The detailed review additionally
warns that &lt;a href="https://animalcharityevaluators.org/research/methodology/our-use-of-cost-effectiveness-estimates/#4.1"&gt;these cost-effectiveness estimates should not be taken as an
overall opinion of the
charity&lt;/a&gt;,
as they are very broad approximations. In fact, they encourage a low degree of
confidence in these numbers. If you wanted to truly select an animal cruelty
charity to support, it is recommended to read the full qualitative analysis. If
you did want to focus on quantitative analysis, there are &lt;a href="http://ethical.diet/"&gt;ethical food
calculators&lt;/a&gt; online.&lt;/p&gt;
&lt;p&gt;That said, using the numbers as a ballpark is better than nothing. If we
simplistically take the midpoint of the 90% Subjective Confidence Interval, it
results in about 55 animals spared per dollar. It doesn't specify exactly what
type of animal it is (but the report suggests that it is &lt;em&gt;not&lt;/em&gt; fish), so we can
be conservative and imagine that they are the smallest common animal out there:
chickens.&lt;/p&gt;
&lt;p&gt;If we further continued our overestimated ballpark that we ate 100kg of meat
per year, this is equivalent to 800 &lt;a href="https://www.chicken.org.au/chicken-cuts/"&gt;125g
drumsticks&lt;/a&gt;, or affecting the lives
of 400 chickens. Obviously, we eat more parts of a chicken than just the
drumsticks, and we also eat other types of meat, but chicken
drumsticks seem to be the lightest quantum of meat we can use to conservatively
maximise our animal count. Even with this inflated number of animals, it still
only costs 8USD a year to offset our actions. We could happily multiply that by
a factor of 10 as a penalty for the ultra rough calculations we're doing, and
the resultant of 80USD per year is still within our budget.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Result: ~7USD per month&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Sustainable water usage&lt;/h3&gt;
&lt;p&gt;Water, like carbon, is relatively easy to calculate. Apart from looking at your
water bill which has your direct water consumption, there are some indirect
water usages through our lifestyles, such as eating meat. I found a water
calculator from
&lt;a href="https://waterfootprint.org/en/resources/interactive-tools/personal-water-footprint-calculator/"&gt;WaterFootprint.org&lt;/a&gt;
and &lt;a href="https://www.watercalculator.org/"&gt;WaterCalculator.org&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;My water usage is not metered separately from my landlord, so my water bill is
not an accurate representation of my direct consumption. However, I have
conservatively outlined the following lavish lifestyle:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2x10 minute showers per day with a standard showerhead&lt;/li&gt;
&lt;li&gt;1.5 laundry loads per week&lt;/li&gt;
&lt;li&gt;1x10 minute dishwashing session&lt;/li&gt;
&lt;li&gt;1x5 minute garden watering per week&lt;/li&gt;
&lt;li&gt;No car washing&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This comes out to 12kL per month. To put this into perspective, &lt;a href="https://www.unicef.org/emerg/files/UNHCR_handbook.pdf"&gt;10 litres a
day&lt;/a&gt; is seen as a
threshold where people become water refugees. The &lt;a href="https://spherestandards.org/handbook/editions/"&gt;Sphere Handbook (page
107)&lt;/a&gt; says that the basic water
requirements to be used for planning refugee camps ranges from 7.5-15 litres
per day. Therefore, my water consumption can serve 26 to 53 refugees.&lt;/p&gt;
&lt;p&gt;A &lt;a href="https://www.theguardian.com/world/2019/jun/12/indian-villages-lie-empty-as-drought-forces-thousands-to-flee"&gt;Guardian article about the drought in Indian
villages&lt;/a&gt;
describes residents who are too poor to buy water due to water scarcity. Those
who can afford water need to pay 4USD per 1,000 litres. If 4USD per person
sounds affordable to prevent a water refugee crisis, it means that we can
certainly make a big impact.&lt;/p&gt;
&lt;p&gt;But let's take a look at our indirect water consumption. Here's a conservative
estimate of what I eat:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;125g of meat per meal&lt;/li&gt;
&lt;li&gt;4.5kg of cereal products per week&lt;/li&gt;
&lt;li&gt;2kg of meat per week&lt;/li&gt;
&lt;li&gt;2kg of dairy per week&lt;/li&gt;
&lt;li&gt;8 eggs per week&lt;/li&gt;
&lt;li&gt;1kg of vegetables per week&lt;/li&gt;
&lt;li&gt;1kg of fruits per week&lt;/li&gt;
&lt;li&gt;1kg of starchy roots per week&lt;/li&gt;
&lt;li&gt;1 cup of coffee per day&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This indirect water use totals 117kL per month. This is 10 times more than my
direct water consumption and is largely "invisible" to me. The largest culprit
is meat-eating, resulting in 54% of my water, followed by cereal products with
25%.&lt;/p&gt;
&lt;p&gt;Both my direct and indirect water usage combined comes out to 129kL per month.&lt;/p&gt;
&lt;p&gt;When it comes to addressing this 129kL per month, it's not about extracting
more water for other people who don't have access to water. Humans are already
quite capable of water extraction -- the problem is in &lt;em&gt;sustainable&lt;/em&gt; water
extraction. Instead, we should ensure that the &lt;a href="https://www.wri.org/publication/natural-infrastructure"&gt;world's natural
infrastructure&lt;/a&gt; remains
operational to produce freshwater. Examples of natural infrastructure are
our rivers, lakes, and wetlands.&lt;/p&gt;
&lt;p&gt;Living in Sydney, the water I produce is first processed through treatment
plants before being discharged into the ocean. This helps ensure that the
waterways stay clean. Unfortunately, not all countries are as lucky as Sydney,
and some discharge polluted water directly into the ocean.&lt;/p&gt;
&lt;p&gt;The water I consume directly, however, comes primarily from the Warragamba Dam,
which mostly acts as a reservoir, instead of a hydroelectric dam. Dams have
large issues with damaging natural systems, and it would do a large amount of
good to replace dams worldwide, or let &lt;a href="https://news.nationalgeographic.com/news/2014/03/140322-colorado-river-delta-pulse-flow-morelos-dam-minute-319-water/"&gt;dams release pulses of
water&lt;/a&gt;.
However, initiatives that target dams and rivers are few and difficult to pin
down evidence of efficiency.&lt;/p&gt;
&lt;p&gt;Most of my water consumption is indirect and is captured through agricultural
practices. Australian agriculture is affected by &lt;a href="https://www.theguardian.com/environment/ng-interactive/2018/apr/05/murray-darling-when-the-river-runs-dry"&gt;mismanagement of the
Murray-Darling
basin&lt;/a&gt;,
where a catchment larger than Egypt has been slowly deteriorating. Wrapped up
in political events, the bottom line shows that despite efforts, the rivers are
dying and &lt;a href="https://www.theguardian.com/australia-news/2019/jan/24/murray-darling-fish-kill-extreme-weather-and-low-river-flow-led-to-drop-in-oxygen-levels"&gt;up to a million fish are
dead&lt;/a&gt;.
Yet again, it is hard to find any targeted initiative that has evidence of
efficiency.&lt;/p&gt;
&lt;p&gt;The remaining infrastructure to consider is wetlands. Wetlands serve many
functions, only one of which is water purification. An arbitrarily discovered
EPA study suggests one particular &lt;a href="https://www3.epa.gov/npdes/pubs/free_water_surface_wetlands.pdf"&gt;wetland processes 378.5kL per day for a
1.3ha site&lt;/a&gt;.
This provides a ballpark figure of processing 291kL per day per hectare.
Therefore, I would need to support 1 hectare of wetlands for 6 days to cover my
yearly water usage of 1548kL.&lt;/p&gt;
&lt;p&gt;Wetlands are protected globally through the &lt;a href="https://www.ramsar.org/"&gt;Ramsar
Convention&lt;/a&gt;. Ramsar identifies wetlands of importance,
and participating countries ban harmful industry actions in the area and
conservation groups are set up to protect and monitor it. One particularly
large Ramsar site nearby is the &lt;a href="https://www.environment.nsw.gov.au/topics/water/wetlands/internationally-significant-wetlands/hunter-estuary-wetlands"&gt;Hunter Estuary
Wetlands&lt;/a&gt;. It meets 3 out of the &lt;a href="https://www.ramsar.org/sites/default/files/documents/library/ramsarsites_criteria_eng.pdf"&gt;9 Ramsar criteria&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://rsis.ramsar.org/ris/287"&gt;Hunter estuary wetlands have a total area of
3,388ha&lt;/a&gt; and incurs &lt;a href="https://control.visionscape.com.au/SiteFiles/wetlandsorgau/Annual_Report_Print_Ready.pdf"&gt;yearly expenses (2013)
of
320,000AUD&lt;/a&gt;.
Given that they are &lt;a href="https://www.newcastleherald.com.au/story/5373607/hunter-wetlands-centre-seeking-support-amid-financial-struggle/"&gt;financially
struggling&lt;/a&gt;,
it suggests that they have cut costs since and also that the marginal utility
gain from additional donations would be higher. However, with this area and
yearly expense, it suggests it costs on average 94AUD to maintain each hectare
for a year.&lt;/p&gt;
&lt;p&gt;Given that I only need to maintain a hectare for 6 days to process my volume of
water, it only costs me 1.6AUD per year. Of course, this is an extremely crude
calculation with numerous assumptions (e.g. same water processing rate as EPA
benchmark, or than the full area of wetlands is protected or functioning
equally, or that there is a linear relationship with business expenses and
wetland function). As a result, I'd be happy to be wrong by a factor of 100,
and decide that I should dedicate 160AUD per year, or 108USD.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Result: ~9USD per month&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Biodiversity and loss of ecosystems&lt;/h3&gt;
&lt;p&gt;It is difficult to determine exactly how much biodiversity is lost per person.
Clearly, the footprint of my house excludes all wildlife but the urban flora
and fauna. However, there are many indirect losses, such as from the farmland
required to produce our food.&lt;/p&gt;
&lt;p&gt;An easier approach is to look at our total ecological footprint. Earlier in
this article, I stated that the average Australian had 6.6 global hectares of
infrastructure per capita. This is one of the highest in the world. If we
loosely approximate these to be regular hectares, I would need to somehow
protect at least 6.6 hectares of ecosystem out there.&lt;/p&gt;
&lt;p&gt;These hectares of ecosystems aren't just limited to Australian ecology. Thanks
to global trade, they cross many typologies, such
as forests, grasslands, deserts, mountains, and marine environments. As such, I
turned to the &lt;a href="https://www.worldwildlife.org/"&gt;WWF&lt;/a&gt;, which has initiatives
targeting many parts of the world.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://www.charitynavigator.org/index.cfm?bay=search.summary&amp;amp;orgid=4770"&gt;WWF seems to dedicate a large portion of its funds to program
expenses&lt;/a&gt;,
despite a 750,000USD salary for its CEO. Its latest yearly expenses were 247
million dollars. But what exactly did it achieve with such spending?&lt;/p&gt;
&lt;p&gt;To answer this, I turned to the &lt;a href="https://www.worldwildlife.org/habitats"&gt;WWF habitats
page&lt;/a&gt;, which talks about their
initiatives in different ecosystems. Although independent analysis rather than
claims from the WWF itself would be preferred, it's a starting point.&lt;/p&gt;
&lt;p&gt;On the page on wetlands, they make this claim:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;About 75% of the sites added to the [Ramsar] list since 1999 were included as a
result of WWF&#8217;s work.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Downloading the &lt;a href="https://rsis.ramsar.org/ris-search/"&gt;Ramsar database&lt;/a&gt; allows
us to filter sites added in the 2000 or later, of which there are 1,359 sites.
75% of this is 1019 sites. If we sort it in terms of site area and take the
middle 1,019 sites, we estimate that the WWF has protected a total of
17,546,560ha of wetland. This is about 10% of the total added area of all sites
(176,141,282ha), so clearly there are some large outliers in the top 12.5%,
which suggests that this number is an underestimate.&lt;/p&gt;
&lt;p&gt;For marine environments, the &lt;a href="http://wwf.panda.org/our_work/oceans/solutions/protection/protected_areas/"&gt;Marine Protected
Areas&lt;/a&gt;
is the equivalent of the Ramsar sites. Its main proponent is the &lt;a href="https://marine-conservation.org/"&gt;Marine
Conservation Institute&lt;/a&gt;, but WWF does play a
role and has helped add MPAs to the map since the inception near the year 2000.
However, I have not been able to find such a bold claim similar to the Ramsar
statement of adding 75% of new sites.&lt;/p&gt;
&lt;p&gt;The MPA aims to cover 30% of the ocean, but &lt;a href="http://mpatlas.org/"&gt;currently only covers
4.8%&lt;/a&gt;. However, the ocean is mindbogglingly large, with an
area of 36,100,000,000ha, so this 4.8% comes out to about 1,732,800,000ha.
Conservatively if WWF's contribution was 1% of this area, the WWF protects
17,328,000ha.&lt;/p&gt;
&lt;p&gt;For forests, &lt;a href="https://www.worldwildlife.org/stories/protecting-the-amazon-for-life"&gt;WWF started the ARPA project in
2002&lt;/a&gt;. It
is the world's largest conservation project targeting the Brazilian Amazon region.
By 2017, it has protected &lt;a href="https://www.worldwildlife.org/publications/arpa-for-life-amazon-region-protected-area-phase-iii-report-2017"&gt;58,274,784ha&lt;/a&gt;. Admittedly,
it was also thanks to the help of other organisations, even if WWF did start the
initiative and make large contributions. There were four main contributors: the
Government of Brazil, WWF, the Linden Trust for Conservation, and the Gordon and
Betty Moore Foundation, but let's say the WWF contributed merely 10%, meaning
that the WWF had protected 5,827,478ha.&lt;/p&gt;
&lt;p&gt;Just through these three large initiatives alone, over 19 years (with each year spending 247 million dollars), the WWF has a
cost effectiveness of 115USD per hectare protected per year. For the average
Australian ecological footprint of 6.6ha (loosely approximated from global
hectares), it costs just 64USD per month to offset my loss in biodiversity.&lt;/p&gt;
&lt;p&gt;Given that there are other unaccounted initiatives that target the polar
regions, desertification, mountains, grasslands, and indirect protection that
surely exists from WWF's work, it would be a reasonable conclusion to say that a
monthly 64USD (90AUD) is enough to both offset and be net-positive.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Result: ~64USD per month&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Waste management&lt;/h3&gt;
&lt;p&gt;The issue with waste is that they are usually ecological dead ends. Waste that
isn't composted, or recycled turns into landfill that very little new life can
spring from.&lt;/p&gt;
&lt;p&gt;Measuring my direct waste was easy. I weighed my unrecycled trash every time I
threw it out. I end up throwing out about 52kg of waste per year. Clearly, I
run a very lean lifestyle compared to the &lt;a href="https://data.oecd.org/waste/municipal-waste.htm"&gt;average per capita municipal waste
of 560kg&lt;/a&gt;. However, it is very
hard to measure my indirect waste, especially as the waste industry can be
quite opaque. The Bureau of Statistics suggests &lt;a href="https://www.abs.gov.au/ausstats/abs@.nsf/mf/4655.0"&gt;Australians produce 2,215kg of
waste per capita per year&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The solution to the waste problem, apart from consuming less, is to change our
manufacturing methods to consider the entire lifecycle of the product. There is
a concept known as
&lt;a href="https://en.wikipedia.org/wiki/Cradle-to-cradle_design"&gt;Cradle-to-Cradle&lt;/a&gt;,
where products are designed to be waste free, as part of a natural cycle of
nutrients. If humans produced products this way, our waste wouldn't be waste.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://www.c2ccertified.org/"&gt;Cradle to Cradle Products Innovation
Institute&lt;/a&gt; was started by the creators of the
cradle to cradle movement, and offer product certification and resources to
allow manufacturers to change their ways.&lt;/p&gt;
&lt;p&gt;This is a relatively new initiative, but they do make some claims on their &lt;a href="https://www.c2ccertified.org/"&gt;donation page&lt;/a&gt;, such as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Shaw Industries makes 80% of its 4.5 Billion in sales with Cradle to Cradle Certified&#8482; products.
Aveda was the first beauty company to manufacture its products with 100% wind power in its manufacturing facility in Minnesota.
IceStone has moved, since 2003, 10 million pounds of glass out of the waste stream as part of their product  design and manufacturing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Let's consider the first claim, as &lt;a href="https://shawfloors.com/shaw-sustainability/shaw-sustainability-report-2017"&gt;Shaw Industries&lt;/a&gt; is one of the largest carpet manufacturers out there. Shaw Industries has an incredible &lt;a href="https://shawinc.com/Newsroom#Sustainability-Reports"&gt;sustainability track record&lt;/a&gt;, and have produced Cradle to Cradle products since 2010, which is when the Cradle to Cradle Institute started. In 2010, ~50% of their sales were in Cradle to Cradle products, and in 2019, they are at ~90%. This increase of 40% of sales across 9 years represents ~10 billion dollars in sales. If the average sale of a product was at a pricey 100USD per square metre and each square metre weighed ~2kg, this equates to 202,400,000kg of Cradle to Cradle products. If the average &lt;a href="https://www.charitynavigator.org/index.cfm?bay=search.profile&amp;amp;ein=271832830"&gt;yearly expenses of the institute&lt;/a&gt; are 2,312,135USD, this results in a cost effectiveness of 10 cents per kilogram.&lt;/p&gt;
&lt;p&gt;To cover the average Australian waste of 2,215kg, it results in 221USD per
year, or 19USD per month. This is likely enough to be net-positive, as we
have assumed that no waste is already diverted from landfill, and only
considered one of the claims - they have certainly made strides elsewhere.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Result: ~19USD per month&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Air pollution and quality&lt;/h3&gt;
&lt;p&gt;Air pollution is a tricky one. Although &lt;a href="https://breathelife2030.org/city-data-page/?city=49"&gt;Sydney's air quality is 20% below the safe level of PM2.5 annual exposure&lt;/a&gt; (i.e. it's very clean), the atmosphere is the dumping ground for a lot of waste so it is hard to attribute air pollution to a particular person. If we merely took that figure at face value, it would suggest that Australia is already "net-positive" in terms of air quality (at least when compared to the WHO baseline). It is also hard to find initiatives that have published measurable results in reducing air pollution.&lt;/p&gt;
&lt;p&gt;Air pollution is primarily due to fuel burning. Initiatives that help most
would be to do with switching to greener fuel sources: for our power stations,
 transport, and cooking. In fact, &lt;a href="https://www.energyaustralia.com.au/home/bills-and-accounts/go-neutral"&gt;EnergyAustralia offers 100% green energy for no cost to consumers&lt;/a&gt;. So switching to that would be extremely cost effective: as it would cost nothing!&lt;/p&gt;
&lt;p&gt;The type of fuel that is burned has a strong correlation with income, as
studied by the WHO. Poor people have to rely on unhealthy fuel sources which
create health problems. The &lt;a href="https://apps.who.int/iris/handle/10665/43421"&gt;WHO estimates 3 billion people who have to burn
wood, dung, and coal inside their
homes&lt;/a&gt;. The more we can raise
people out of poverty, the sooner they can naturally make the switch to better
infrastructure. As an example, the WHO states that the pollution in a hut with
open fire is 100 times more than the Berlin city centre. The switch between 
solid fuel and gas or kerosene improves air quality by 10 times. A little less
optimistically, the purchase of an improved stove design still results in a
decrease in pollution from 50 to 90%. This gives an idea of the magnitude of
cost effectiveness in targeting the global poor.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The link between income and fuel usage - Copyright WHO 2006" src="https://thinkmoult.com/assets/the-energy-ladder-household-energy-and-development-inextricably-linked-who-2006.png"&gt;&lt;/p&gt;
&lt;p&gt;The good news is that tackling global poverty is a well-researched area with
plenty of cost effective choices. With our remaining budget of 22 per month, we can
donate to &lt;a href="https://www.givedirectly.org/"&gt;GiveDirectly&lt;/a&gt;, where you can, well
... simply give that money to the extreme poor. This
is almost equivalent to 1 year of their universal basic income initiative (0.75$ per
day - compared to the global poverty line of 1.25$ per day), where they can
rebuild their lives. The results show that they spend this on assets and
nutrition primarily, with a resultant increase in earning, lifting them out of
the global poor.&lt;/p&gt;
&lt;p&gt;If you wanted to explore other more directly related initiatives to explore
would be those such as
&lt;a href="https://www.unenvironment.org/news-and-stories/story/air-pollution-eating-moss-cleans-hotspots-europe"&gt;CityTrees&lt;/a&gt;,
the &lt;a href="https://www.catf.us/"&gt;Clean Air Task Force&lt;/a&gt;, the &lt;a href="https://www.who.int/airpollution/ambient/policy-governance/en/"&gt;World Health
Organisation&lt;/a&gt;,
the &lt;a href="https://www.ccair.org/clear/"&gt;Coalition for Clean Air&lt;/a&gt;, or one of many
&lt;a href="https://smokelesscookstovefoundation.org/wp-content/uploads/2018/10/SCF-Khandwa-Report-October-1st-2018-1.pdf"&gt;Smokeless cooking
initiatives&lt;/a&gt;
that swap out cooking equipment in poor countries.&lt;/p&gt;
&lt;p&gt;Without any other stronger quantitative foundation, in addition to my own switch
to 100% green energy, I have chosen to target the global poor, rather than more
direct approaches. I would encourage readers to decide what approach suits them
best and to do their own research.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Result: ~22USD per month&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;A budget for a net-positive life&lt;/h2&gt;
&lt;p&gt;Our final monthly budget is as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;14USD donated to Cool Earth&lt;/li&gt;
&lt;li&gt;7USD donated to the Albert Schweitzer Foundation&lt;/li&gt;
&lt;li&gt;9USD donated to the Hunter Estuary Wetlands&lt;/li&gt;
&lt;li&gt;64USD donated to the WWF&lt;/li&gt;
&lt;li&gt;19USD donated to the Cradle to Cradle Products Innovation Institute&lt;/li&gt;
&lt;li&gt;22USD donated to GiveDirectly&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This totals 135USD per month, or 1,620USD per year, which is 5% of a 32,400USD yearly income. It
covers a large range of issues, chosen to reflect the various dimensions of our
non-anthropocentric production and consumption as a species.&lt;/p&gt;
&lt;p&gt;The budget demonstrates that with a small donation it is possible to actually
make a large and measurable impact as an individual. These calculations have
been extremely conservative on purpose, and I have refused to double count
benefits (e.g. work by the WWF would also have impacts on the carbon
footprint, but I did not count it twice). I should warn, however, that I am
not a subject matter expert, and so if you are more experienced in any of the
fields I have mentioned in this article and can help suggest improvements,
please send me an email!&lt;/p&gt;
&lt;p&gt;Net-positive living is just the beginning! There are so many other important
issues to consider in the world, and if you make more than 32,400USD (pre-tax)
per year, perhaps you can donate even more than the small budget I set in this
article. Please feel free to explore &lt;a href="https://www.givingwhatwecan.org/"&gt;Giving What We
Can&lt;/a&gt;, &lt;a href="https://www.givewell.org/"&gt;GiveWell&lt;/a&gt;,
and &lt;a href="https://80000hours.org/"&gt;80,000 hours&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As a final note, I should emphasize that in this article, I have only focused
on the financial. Financial ballparks are not the only approach nor guaranteed
to be the best approach to the world's problems. In fact, there are &lt;a href="https://forum.effectivealtruism.org/posts/zdAst6ezi45cChRi6/list-of-ways-in-which-cost-effectiveness-estimates-can-be"&gt;many ways
where cost-effective estimates are
misleading&lt;/a&gt;.
Personally, I believe that &lt;a href="https://forum.effectivealtruism.org/posts/Yix7BzSQLJ9TYaodG/ethical-offsetting-is-antithetical-to-ea"&gt;ethical offsetting is not
enough&lt;/a&gt;,
and it is absolutely vital to also change our behaviours - to recycle when
possible, to choose renewable sources, and to reduce our materialism. Everybody
will have their own unique and valuable contributions to the world, so I urge
all readers to research, evaluate, and do the best you can, in your own way.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;We can change things&lt;/em&gt;.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>IFC Coordinate Reference Systems and Revit</title>
        <link href="https://thinkmoult.com/ifc-coordinate-reference-systems-and-revit.html" />
        <id>https://thinkmoult.com/ifc-coordinate-reference-systems-and-revit.html</id>
        <updated>2019-05-21</updated>
        <summary>BIM projects have to specify Coordinate Reference Systems and their relationship to surveyed points and project origins in order to reliably geolocate geometry. I describe how this works with IFC, and the current state of compatibility with Revit.</summary>
        <content type="html">

&lt;p&gt;Revit has three reference points for coordinates: the internal origin, a survey point, and a project base point. The project base point may have an angle to true north set. When you export to IFC, an &lt;code&gt;IfcProject&lt;/code&gt; and &lt;code&gt;IfcSite&lt;/code&gt; is created. Both elements have coordinates and data. However, are these coordinates correct? Are they complete? And can we use them reliably in other software? Let's investigate.&lt;/p&gt;
&lt;h2&gt;Coordinate systems defined by &lt;code&gt;IfcProject&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Let's talk about what we want the results to be. According to the IFC specification, &lt;code&gt;IfcProject&lt;/code&gt; provides the following information:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the project coordinate system&lt;/li&gt;
&lt;li&gt;the coordinate space dimension&lt;/li&gt;
&lt;li&gt;the precision used within the geometric representations&lt;/li&gt;
&lt;li&gt;optionally the indication of the true north&lt;/li&gt;
&lt;li&gt;optionally the map conversion between the project coordinate system and the geospatial coordinate reference system.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This information is provided using the &lt;code&gt;RepresentationContexts&lt;/code&gt; relationship of the &lt;code&gt;IfcProject&lt;/code&gt;. This relationship will contain one or more &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt; elements. Each will typically have a &lt;code&gt;CoordinateSpaceDimension&lt;/code&gt; of 3, to show a 3D model, and the &lt;code&gt;Precision&lt;/code&gt; attribute shows the model precision.&lt;/p&gt;
&lt;p&gt;The actual project coordinate system is defined by the &lt;code&gt;HasCoordinateOperation&lt;/code&gt; relationship. This holds an &lt;code&gt;IfcMapConversion&lt;/code&gt; element, which in turn references an &lt;code&gt;IfcProjectedCRS&lt;/code&gt;. Let's go through the attributes of &lt;code&gt;IfcProjectedCRS&lt;/code&gt; first, as knowing the Coordinate Reference System (CRS) of the project is the most critical aspect of geeoreferencing:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Name&lt;/code&gt;: the &lt;code&gt;EPSG&lt;/code&gt; code for the CRS. In Sydney, (i.e. GDA94 / MGA Zone 56) this would be &lt;code&gt;EPSG:28356&lt;/code&gt;. This should be the only value you need to fill out if the EPSG number has a complete definition of the Projected CRS. If the EPSG number is not known, you can enter in &lt;code&gt;WKT&lt;/code&gt; as a value here, and full out the subsequent attributes. Just for the sake of example, let's assume we wanted to describe &lt;code&gt;EPSG:28356&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Description&lt;/code&gt;: this would be the description of the CRS, such as "GDA94 / MGA Zone 56". Note: to reiterate, this, and all subsequent attributes are optional if you have specified an EPSG number with a full definition.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GeodeticDatum&lt;/code&gt;: following our example above, we can specify it to be &lt;code&gt;GDA94&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;VerticalDatum&lt;/code&gt;: in Australia, this would be set to &lt;code&gt;EPSG:5111&lt;/code&gt;, which represents AHD (Australian Height Datum)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MapProjection&lt;/code&gt;: in our example it will be &lt;code&gt;MGA&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MapZone&lt;/code&gt;: this will be zone &lt;code&gt;56&lt;/code&gt;, following our Sydney example.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MapUnit&lt;/code&gt;: the standard states it is in meters, so we will specify an &lt;code&gt;IfcNamedUnit&lt;/code&gt; as such: &lt;code&gt;IFCSIUNIT (*, .LENGTHUNIT., $, .METRE.)&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;It can also nest a &lt;code&gt;HasCoordinateOperation&lt;/code&gt;, but you really shouldn't unless you want insanity to occur&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now that the projected CRS is defined, we need to define whether or not there are any map conversions between our model's local coordinate system and the map coordinate system. Typically for horizontal construction projects, such as roads, rail, and other linear infrastructure, there would be no map conversion, and the local coordiante system will directly use Eastings and Northings of the map coordinate system. However, for vertical construction projects, such as buildings, there will almost always be a map conversion converting from small, local, XYZ coordinates, to map eastings, northings, and height coordinates. Here are the attributes of the &lt;code&gt;IfcMapConversion&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SourceCRS&lt;/code&gt;: refers back to the &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt; of the &lt;code&gt;IfcProject&lt;/code&gt; to establish the inverse relationship&lt;/li&gt;
&lt;li&gt;&lt;code&gt;TargetCRS&lt;/code&gt;: refers to the CRS used in the project. This will hold an &lt;code&gt;IfcCoordinateReferenceSystem&lt;/code&gt;, or its subtype &lt;code&gt;IfcProjectedCRS&lt;/code&gt;. It has a bit of data:&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Eastings&lt;/code&gt;: your &lt;code&gt;IfcProject&lt;/code&gt;'s world &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt;'s &lt;code&gt;0,0,0&lt;/code&gt; origin will correlate to this number. In Sydney, if your building is the Sydney Opera House, this'll be something like &lt;code&gt;334902.775&lt;/code&gt;. If you have specified a &lt;code&gt;MapUnit&lt;/code&gt; in the &lt;code&gt;ProjectedCRS&lt;/code&gt; you should use that unit (e.g. meters). Otherwise, you should use the project units (e.g. millimeters).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Northings&lt;/code&gt;: same as &lt;code&gt;Eastings&lt;/code&gt;, but for the Y axis. For the Sydney Opera House, it'll be something like &lt;code&gt;6252274.139&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OrthogonalHeight&lt;/code&gt;: continuing our example, this'll be the AHD of our world origin. Wikipedia says it is 4m in elevation, so I guess it'll be something like &lt;code&gt;4&lt;/code&gt;. In this case, we keep the same units as &lt;code&gt;Eastings&lt;/code&gt; and &lt;code&gt;Northings&lt;/code&gt;, so that we can apply a uniform scale afterwords.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;XAxisAbscissa&lt;/code&gt;: specifies the local X axis vector along the easting to determine rotation of the local coordinates. If there is no rotation, this will be &lt;code&gt;1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;XAxisOrdinate&lt;/code&gt;: specifies the local X axis vector along the northing to determine rotation of the local coordinates. If there is no rotation, this will be &lt;code&gt;0&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Scale&lt;/code&gt;: This is the average &lt;em&gt;combined scale factor&lt;/em&gt; across the small site such that a local surface distance multiplied by this value equals a map distance. This will typically be something very close to &lt;code&gt;1&lt;/code&gt;, but not quite (such as &lt;code&gt;0.99996&lt;/code&gt;). Your surveyor can calculate the actual value.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This &lt;code&gt;IfcMapConversion&lt;/code&gt; and &lt;code&gt;IfcProjectedCRS&lt;/code&gt; element of the &lt;code&gt;IfcProject&lt;/code&gt;'s &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt; holds all of the georeferencing information that we require. These attributes contains all of the parameters required to perform a "Helmert transformation", which is a fancy way of saying how to offset, rotate, and scale local project coordinates to a globally positioned coordinate system. For your surveyor to provide these transformation parameters properly, they will need multiple surveyed points (a minimum of two), ideally taken at extremes across the site, in both your local coordinates, as well as their equivalents in the target CRS. They will also need to know your desired building orientation (i.e. project north) to calculate the X axis abcissa and ordinate, and a nominated false origin to set the Eastings and Northings. The more points that are surveyed, the more accurate this &lt;code&gt;IfcMapConversion&lt;/code&gt; will become.&lt;/p&gt;
&lt;p&gt;With all of the information defined above, to convert from local coordinates &lt;code&gt;(X, Y, Z)&lt;/code&gt;, to map grid coordinates &lt;code&gt;(X', Y', Z')&lt;/code&gt;, you can use these relationships:&lt;/p&gt;
&lt;p&gt;&lt;img alt="How to convert from project to a target CRS coordinates" src="https://thinkmoult.com/assets/ifcmapconversion-relationship.gif"&gt;&lt;/p&gt;
&lt;p&gt;Credits go to &lt;a href="https://buildingsmart.org.au/resources/"&gt;BuildingSmart Australasia&lt;/a&gt; who has done great work in clarifying these concepts. Note that I have clarified the argument order of the &lt;code&gt;atan2&lt;/code&gt; function is &lt;code&gt;y, x&lt;/code&gt;, which is more common in programming languages.&lt;/p&gt;
&lt;p&gt;After all of this information is recorded, it's interesting to note that the &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt; additionally has a &lt;code&gt;TrueNorth&lt;/code&gt; attribute. Assuming the &lt;code&gt;IfcMapConversion&lt;/code&gt; is already provided, there is actually no need for a &lt;code&gt;TrueNorth&lt;/code&gt; attribute, and so if it is provided, it is merely duplicate data and there for convenience. IFC readers should not parse it and should not apply the same rotation twice. The &lt;code&gt;IfcMapConversion&lt;/code&gt; takes priority over the &lt;code&gt;TrueNorth&lt;/code&gt; attribute.&lt;/p&gt;
&lt;h2&gt;The &lt;code&gt;WorldCoordinateSystem&lt;/code&gt; attribute&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt; of the &lt;code&gt;IfcProject&lt;/code&gt; also has a &lt;code&gt;WorldCoordinateSystem&lt;/code&gt; attribute. Usually, this will be set to &lt;code&gt;(0, 0, 0)&lt;/code&gt;, and represents the origin of the &lt;em&gt;virtual&lt;/em&gt; world. In other words, any element in a project usually inherit the local relative placement of its parent, all the way up to &lt;code&gt;IfcSite&lt;/code&gt;, but somewhere, it needs to end in an absolute coordinate. This &lt;code&gt;WorldCoordinateSystem&lt;/code&gt; is the final absolute coordinate that is not relative to anything else. It can therefore be used to offset everything in your project, should you want to. The &lt;code&gt;IfcMapConversion&lt;/code&gt; we just described, will then be used to convert our virtual world into the real world.&lt;/p&gt;
&lt;h2&gt;Coordinate system inheritance&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;IfcSite&lt;/code&gt; is spatially contained in the &lt;code&gt;IfcProject&lt;/code&gt;. However, the spatial containment is not the determining factor for how coordinates are inherited. Instead, the &lt;code&gt;IfcSite&lt;/code&gt; has an &lt;code&gt;ObjectPlacement&lt;/code&gt; and a &lt;code&gt;Representation&lt;/code&gt; attribute. These are the important attributes to pay attention to.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;ObjectPlacement&lt;/code&gt; attribute positions the &lt;code&gt;IfcSite&lt;/code&gt; element relative to other objects. We will discuss about different placements below, but suffice to say that it merely deals with relative offsets of coordinates.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Representation&lt;/code&gt; attribute, however, contains an &lt;code&gt;IfcRepresentationContext&lt;/code&gt; chosen from the list of contexts defined at the &lt;code&gt;IfcProject&lt;/code&gt; level. It is this particular selection of the &lt;code&gt;IfcRepresentationContext&lt;/code&gt; that allows the &lt;code&gt;IfcSite&lt;/code&gt; to inherit a particular &lt;code&gt;WorldCoordinateSystem&lt;/code&gt; and &lt;code&gt;MapConversion&lt;/code&gt; attribute defined at the &lt;code&gt;IfcProject&lt;/code&gt; level.&lt;/p&gt;
&lt;p&gt;I would like to emphasize that the coordinate transformation is not due to spatial containment or hierarchy, but instead due to the selection of &lt;code&gt;IfcRepresentationContext&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;In theory, any IFC product that has a representation can select its own context. This means that an &lt;code&gt;IfcWall&lt;/code&gt; can have one map conversion, and have an &lt;code&gt;ObjectPlacement&lt;/code&gt; to another IFC element which has a different map conversion. Although technically syntactically correct, it's considered invalid as it is bad practice and seasoned GIS professionals will tell you to never mix different CRSes on one map unless you want to be more artistic than useful.&lt;/p&gt;
&lt;h2&gt;Coordinate systems defined by &lt;code&gt;IfcSite&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;In addition to ordinary coordinates, the &lt;code&gt;IfcSite&lt;/code&gt; provides &lt;code&gt;RefLatitude&lt;/code&gt;, &lt;code&gt;RefLongitutde&lt;/code&gt;, and &lt;code&gt;RefElevation&lt;/code&gt; attributes. As the prefix "Ref" suggests, this is a latitude and longitutde provided only for reference. It is not sufficient for proper geolocation and if there is a discrepancy between the &lt;code&gt;IfcMapConversion&lt;/code&gt; and the data provided in &lt;code&gt;IfcSite&lt;/code&gt;, the &lt;code&gt;IfcMapConversion&lt;/code&gt; takes priority.&lt;/p&gt;
&lt;p&gt;Note that these &lt;code&gt;RefLatitude&lt;/code&gt; and &lt;code&gt;RefLongitude&lt;/code&gt; values are recorded in integers that are separated by a full stop to represent degrees, minutes, seconds, and an optional millionths of a second. West and south locations are negative, and east and north locations are positive.&lt;/p&gt;
&lt;p&gt;In a real project, a project may contain multiple &lt;code&gt;IfcSite&lt;/code&gt; objects. Each &lt;code&gt;IfcSite&lt;/code&gt; has a &lt;code&gt;Representation&lt;/code&gt;, which may include terrain, for example. For most projects, there is a site boundary, such as a cadastral boundary which denotes the legal plot of land. The &lt;code&gt;ObjectPlacement&lt;/code&gt; of the &lt;code&gt;IfcSite&lt;/code&gt; is therefore likely to be a corner of the site boundary which is a point that has been surveyed.&lt;/p&gt;
&lt;h2&gt;Coordinate systems defined by &lt;code&gt;IfcBuilding&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;IfcBuilding&lt;/code&gt; contains a &lt;code&gt;Representation&lt;/code&gt; of the building. It also contains an &lt;code&gt;IfcObjectPlacement&lt;/code&gt;, which is relative to the &lt;code&gt;IfcSite&lt;/code&gt;. This would place your building on your site model. The rotation of this placement also sets out the project north of the building. If your building has multiple wings, it may also define the individual project norths of each wing.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;IfcBuilding&lt;/code&gt; additionally contains two attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ElevationOfRefHeight&lt;/code&gt;: as one steps into your building, the finish floor level will be seen as the &lt;em&gt;building's internal reference height&lt;/em&gt; of +0.00. This attribute will record this "+0.00 reference height" in terms of the absolute values of elevation above sea level.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ElevationOfTerrain&lt;/code&gt;: this is the height in absolute values of elevation above sea level of the terrain immediately surrounding the perimeter of the building. If the terrain slopes, it is taken to be the lowest point.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Just like the reference point values in &lt;code&gt;IfcSite&lt;/code&gt;, these are also duplications of data. It is not explicitly mentioned, but I believe that should there be a discrepancy, the derived coordinate from the &lt;code&gt;IfcMapConversion&lt;/code&gt; takes priority.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;ElevationOfTerrain&lt;/code&gt;, apart from being a reference value, also provides a datum to measure the &lt;code&gt;EavesHeight&lt;/code&gt; and the &lt;code&gt;Height&lt;/code&gt; (total height) of the building which is recorded in the &lt;code&gt;Qto_BuildingBaseQuantities&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Absolute coordinates&lt;/h2&gt;
&lt;p&gt;If your object has an &lt;code&gt;IfcObjectPlacement&lt;/code&gt;, it usually uses an &lt;code&gt;IfcLocalPlacement&lt;/code&gt; which has a &lt;code&gt;PlacementRelTo&lt;/code&gt;, thus inheriting the parent's placement. If you omit the &lt;code&gt;PlacementRelTo&lt;/code&gt;, it does not inherit any more parent coordinates, and ends up being an absolute coordinate. An absolute coordinate is defined as only relative to the &lt;code&gt;WorldCoordinateSystem&lt;/code&gt; of the &lt;code&gt;IfcProject&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A common example for this is the &lt;code&gt;IfcSite&lt;/code&gt; element which is the immediate child of the &lt;code&gt;IfcProject&lt;/code&gt;. Because its only parent coordinate is the &lt;code&gt;WorldCoordinateSystem&lt;/code&gt;, it is known as an &lt;em&gt;absolute&lt;/em&gt; placement.&lt;/p&gt;
&lt;p&gt;You can also omit the &lt;code&gt;IfcObjectPlacement&lt;/code&gt; altogether, and it will therefore also be treated as an absolute placement which is equal to the &lt;code&gt;WorldCoordinateSystem&lt;/code&gt; of the &lt;code&gt;IfcProject&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Omission of the &lt;code&gt;IfcObjectPlacement&lt;/code&gt; is a quick and easy way to say that your &lt;code&gt;IfcBuildingStorey&lt;/code&gt;, &lt;code&gt;IfcBuilding&lt;/code&gt;, and &lt;code&gt;IfcSite&lt;/code&gt;, are all at the &lt;code&gt;WorldCoordinateSystem&lt;/code&gt;. This behaviour has been noted in some software, such as Revit in some circumstances.&lt;/p&gt;
&lt;p&gt;Keep in mind that this behaviour is technically possible but it is not endorsed by buildingSMART. For more information, see this &lt;a href="http://www.buildingsmart-tech.org/implementation/ifc-implementation/ifc-impl-agreements/cv-2x3-143"&gt;ISG implementation agreement CV-2x3-143 agreement on having the containment tree and the relative placement tree identical for spatial elements&lt;/a&gt;. It is only mentioned out of completeness.&lt;/p&gt;
&lt;h2&gt;Coordinate systems and &lt;code&gt;IfcGrid&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Grids are by convention (i.e. described not enforced by the IFC specification) placed relative to the local placement of its container. Grids can be contained by &lt;code&gt;IfcSite&lt;/code&gt;, &lt;code&gt;IfcBuilding&lt;/code&gt;, or &lt;code&gt;IfcBuildingStorey&lt;/code&gt;. As an alternative to a relative and absolute placements, coordinates can also be specified constrained to a grid system. This is as simple as using &lt;code&gt;IfcGridPlacement&lt;/code&gt; for the &lt;code&gt;IfcObjectPlacement&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;IfcGridPlacement&lt;/code&gt; allows you to specify an object's placement using the intersection of two grid lines, or &lt;code&gt;IfcVirtualGridIntersection&lt;/code&gt;, and a direction. The details will not be described here, but using grids does not change the fundamental concept of site coordinates. Any object placed this way will still resolve to a local &lt;code&gt;(X, Y, Z)&lt;/code&gt; which can be translated using the &lt;code&gt;IfcMapConversion&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;It is therefore possible to have an &lt;code&gt;IfcGrid&lt;/code&gt; spatially contained by an &lt;code&gt;IfcSite&lt;/code&gt;. The &lt;code&gt;IfcBuilding&lt;/code&gt; could then have a placement aligning with the grid. This makes intuitive sense to lay a building out relative to a grid placed on the site, but it breaks the ISG agreement where containment tree and relative placement tree should be identical.&lt;/p&gt;
&lt;h2&gt;&lt;em&gt;Spatial Composition&lt;/em&gt; and coordinates&lt;/h2&gt;
&lt;p&gt;For the objects that we've described so far, they usually use the &lt;em&gt;Spatial Composition&lt;/em&gt; concept to relate to one another. Keep in mind that spatial decomposition and inheritance of coordinates are two separate concepts. Just because something is spatially contained in a parent container does &lt;em&gt;not&lt;/em&gt; mean that it inherits its coordinates.&lt;/p&gt;
&lt;p&gt;However, that being said, a convention is endorsed by the specification's &lt;a href="https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/schema/ifcgeometricconstraintresource/lexical/ifclocalplacement.htm"&gt;documentation of &lt;code&gt;IfcLocalPlacement&lt;/code&gt;&lt;/a&gt; to place objects relative to the same container that it is spatially contained in. I've linked the page for you to read the details of the relationships that are endorsed.&lt;/p&gt;
&lt;h2&gt;Coordinate systems created by Revit&lt;/h2&gt;
&lt;p&gt;Now that we know what should be defined and how they should be defined in an ideal world, let's take a Revit project as an example. We will be &lt;a href="https://thinkmoult.com/assets/../how-to-create-better-ifc-files-with-revit.html"&gt;exporting using the open source Revit exporter as an IFC4 file&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Revit provides an &lt;code&gt;IfcProject&lt;/code&gt; as expected, and this has one &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt;. Unfortunately, our luck ends here, as no &lt;code&gt;IfcMapConversion&lt;/code&gt; is provided. Therefore, all that great stuff we talked about where we could record a CRS, its datums and projections, and so on, are not available.&lt;/p&gt;
&lt;p&gt;Let's see what information we &lt;em&gt;do&lt;/em&gt; have in the &lt;code&gt;IfcProject&lt;/code&gt;'s &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Precision&lt;/code&gt;: this is set to 0.01 of a millimeter in my metric scenario.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;WorldCoordinateSystem&lt;/code&gt;: this is set to &lt;code&gt;(0, 0, 0)&lt;/code&gt;. As far as I have observed, this never changes, regardless of the placement of any of Revit's origins.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;TrueNorth&lt;/code&gt;: this represents a vector of the "Angle to True North" value that you have set for your project base point. For example, if your project has no rotation, it will be the vector &lt;code&gt;(0, 1)&lt;/code&gt;. If your true north is set to 45 degrees (i.e. top left of your building), then it will be the vector &lt;code&gt;(-Pi/4, Pi/4)&lt;/code&gt; (in the second quadrant). And so on.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An &lt;code&gt;IfcSite&lt;/code&gt; is also provided with the following information.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;RefLatitude&lt;/code&gt;: this value is taken from your Revit project's "Location" latitude, and has no relationship to the survey point or project base point. There are a few quirks to watch out for: it is comma and space separated instead of using a full stop separator, and it records to a degree of precision that may return different results if you are using other programs that do not share the same degree of precision.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RefLongitude&lt;/code&gt;: same as latitude, but for longitude instead.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RefElevation&lt;/code&gt;: this value is set to the &lt;code&gt;Elev&lt;/code&gt; field of the Revit Project Base Point.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The final information we can extract is the &lt;code&gt;ObjectPlacement&lt;/code&gt; attribute of the &lt;code&gt;IfcSite&lt;/code&gt; element. This has a location and a direction. The direction is identical to the &lt;code&gt;TrueNorth&lt;/code&gt; value described above, but has a Z dimension too. The Z dimension may be set to the &lt;code&gt;Elev&lt;/code&gt; field of the Revit Project Base Point, if the "Include IFCSITE elevation in the site local placement origin" option is checked in the "Advanced" tab of the IFC export settings. If the option is not checked, it is set to &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Credits to &lt;a href="https://www.clearboxbim.com/"&gt;Niel Simmonds&lt;/a&gt; for clarifying the behaviour of elevation data.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Location&lt;/code&gt; of the &lt;code&gt;IfcSite&lt;/code&gt;, however, is a bit of a tricky one. It is a 3D coordinate, with the Z ordinate always set to &lt;code&gt;0&lt;/code&gt;. The X and Y ordinates have a relationship to the project base point (PBP) as shown below. Revit further complicates things by having a project base point that can be represented by eastings and northings that are relative to either the survey point, or the project's invisible internal origin point. These are denoted with the subscript &lt;code&gt;Survey&lt;/code&gt; and &lt;code&gt;Origin&lt;/code&gt; respectively.&lt;/p&gt;
&lt;p&gt;&lt;img alt="How to derive Revit's IfcSite coordinates" src="https://thinkmoult.com/assets/revit-ifcsite-coordinates.gif"&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;IfcBuilding&lt;/code&gt; is always set to a relative placement of &lt;code&gt;(0, 0, 0)&lt;/code&gt;, and therefore fully inherits the location of the &lt;code&gt;IfcSite&lt;/code&gt;. However, I have seen elevation data at the &lt;code&gt;IfcBuildingStorey&lt;/code&gt; level, set in its &lt;code&gt;ObjectPlacement&lt;/code&gt;'s &lt;code&gt;Location&lt;/code&gt; Z ordinate (X and Y are hardcoded at &lt;code&gt;0, 0&lt;/code&gt;). In particular, this Z value will not be the value you set in your Revit level schedule. Instead, it will be your Revit level value plus the &lt;code&gt;Elev&lt;/code&gt; value of your Project Base Point. As a result, your building will always have "absolute" height values in its IFC export, even though it may not be inherited or stored at the location recommended by the IFC spec. I should note that the &lt;code&gt;Elev&lt;/code&gt; value set on your Revit Survey Point has no impact whatsoever on the IFC export.&lt;/p&gt;
&lt;p&gt;It should be noted that &lt;a href="https://thinkmoult.com/assets/../why-revit-is-shit.html"&gt;Revit does not know what a building or site is&lt;/a&gt; and so it is not possible to have multiple buildings, building portions, sites, or sub-sites. All files automatically generate and contain all of their contents inside a single site and single building.&lt;/p&gt;
&lt;p&gt;Knowing this information is extremely important. Because Revit does not specify a CRS conversion, many people put their local CRS eastings and northings coordinates into the project base point and the survey point. As most of these values are very large in magnitude, the &lt;code&gt;IfcSite&lt;/code&gt; local placement will too be extremely far off in space.&lt;/p&gt;
&lt;p&gt;This far site placement is inherited by every single object spatially contained by the site. Any program which then parses the IFC to extract the geometry will have to deal with this, and the inability to deal with such large transformation magnitudes is a well known problem in the 3D industry. As a result, geometry gets unnecessarily "broken" and imports are unreliable. You can experience this yourself by importing an IFC into Blender which has CRS coordinates, or even attempting to import an IFC back into Revit: it won't be able to handle its own creation.&lt;/p&gt;
&lt;p&gt;As a workaround, you can simply modify the &lt;code&gt;IfcLocalPlacement&lt;/code&gt; of the &lt;code&gt;IfcSite&lt;/code&gt; in a text editor before importing the IFC. After the import, you can then specify using native GIS features of your application how the origin point translates to a target CRS. Knowing the relationship of the &lt;code&gt;IfcSite&lt;/code&gt; coordinates above will help you specify the origin correctly. I tend to simply reset the value such that the origin point corresponds with the project base point. In simple scenarios this is &lt;code&gt;(0, 0, 0)&lt;/code&gt;, but sometimes it may have a further offset which you can calculate using the formula above. An alternative, simpler way is by finding the difference in coordinates between the &lt;code&gt;IfcSite&lt;/code&gt; and Revit's project base point, and making that the new &lt;code&gt;IfcSite&lt;/code&gt; local placement &lt;code&gt;Location&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This article should clarify all coordinate related concepts in BIM and Revit, and hopefully you can now use IFCs a bit more reliably across other software other than Revit.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Point cloud mesh reconstruction with metaballs</title>
        <link href="https://thinkmoult.com/point-cloud-mesh-reconstruction-with-metaballs.html" />
        <id>https://thinkmoult.com/point-cloud-mesh-reconstruction-with-metaballs.html</id>
        <updated>2019-05-15</updated>
        <summary>3D scanning results in a point cloud which often needs to be converted into a closed mesh surface. In this article I propose a new technique of mesh reconstruction using metaballs.</summary>
        <content type="html">

&lt;p&gt;When you scan an object, a point cloud is generated of the object in space. This
point cloud is often converted into a mesh using a process known as mesh
reconstruction. The mesh can then be textured, retopologised, and so on.&lt;/p&gt;
&lt;p&gt;The mesh reconstruction process often uses one of a few famous algorithms out
there. One example is Poisson mesh reconstruction, I believe originally
developed at Microsoft, which looks at the normals or orientations of each of
the points in the point cloud. These normals help it determine the boundary
between outside the scanned object and inside the scanned object. The boundary
is then converted into an interpolated surface, which forms the new mesh.&lt;/p&gt;
&lt;p&gt;The Poisson reconstruction algorithm isn't always the best choice. For example,
when you don't know the orientations of the points, and it is not easy to derive
it, then Poisson wouldn't fare too well. If you also have lots of thin shapes,
such as leaves on a tree, Poisson will struggle. But that's ok, since there are
other algorithms out there, each with their pros and cons.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Poisson creating bulbous forms when reconstructing
vegetation" src="https://thinkmoult.com/assets/bulbous-poisson-reconstruction.png"&gt;&lt;/p&gt;
&lt;p&gt;In 2015, I dealt with the issue of having to reconstruct meshes from extremely
sparse or poor scans with holes. I'd like to share that there is a another
approach to mesh reconstruction using &lt;em&gt;metaballs&lt;/em&gt;. I haven't seen others use
this method, so I thought I'd share it here.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Metaballs"&gt;Metaballs&lt;/a&gt; define a surface usually
based on the distance from the centroid of each point. Each point represents a
blob-like sphere, and when you get points close to each other, just as water
droplets would join one another, these blobs would coalesce into a form.&lt;/p&gt;
&lt;p&gt;Therefore, if you convert each point in a point cloud into a metaball and adjust
its threshold to overlap with the average density of the scan, you can convert
your scan into a very blobby mesh. This type of reconstruction works well on
thin shapes, but does not attempt to patch or interpolate over any holes in the
scan (which can be good if your scan is particularly bad or misleading). It also
does not need to consider the entire point set at once or bother with point
orientation. With this technique, it is possible to reconstruct in batches or
zones and then stitch the results together.&lt;/p&gt;
&lt;p&gt;Let's see an example, on a particularly nasty photogrammetry dataset where some
parts were very well scanned and other parts were very badly scanned, with a
relatively sparse point cloud.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A metaball reconstruction on the left, with a Poisson reconstruction of the
same dataset on the right" src="https://thinkmoult.com/assets/metaball-mesh-reconstruction.jpg"&gt;&lt;/p&gt;
&lt;p&gt;If you want to try your own reconstruction, you can test this reconstruction
very easily with Blender. Blender supports metaballs out of the box. Simply
create a metaball, and set it to be the duplivert object of a point cloud. No
coding skills required and no proprietary software needed.&lt;/p&gt;
&lt;p&gt;Let's see another reconstruction with the Stanford bunny.  If you want to
recreate this, you will first need to &lt;a href="https://stackoverflow.com/questions/30783446/how-can-i-read-transform-the-range-images-of-the-stanford-bunny-ply-files"&gt;reorientate the source point cloud of the
Stanford
bunny&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Metaball reconstruction of the Stanford
bunny" src="https://thinkmoult.com/assets/stanford-bunny-metaball-reconstruction.png"&gt;&lt;/p&gt;
&lt;p&gt;On the left is the metaball reconstruction, and on the right is the zipper
high resolution reconstruction provided by Stanford (with normals smoothed). As
you can see, the metaball reconstruction results in a pretty detailed mesh. You
can also see artifacts of blobbiness and the bunny on the left is marginally
fatter due to the metaball radius.&lt;/p&gt;
&lt;p&gt;Happy scanning! If you are aware of research with this technique, please send me
an email and I'd love to hear about it.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Robotic wire cutting toolpath generation with Blender</title>
        <link href="https://thinkmoult.com/robotic-wire-cutting-toolpath-generation-with-blender.html" />
        <id>https://thinkmoult.com/robotic-wire-cutting-toolpath-generation-with-blender.html</id>
        <updated>2019-05-06</updated>
        <summary>Most toolpath generation focuses on minimising material wastage, tool wear, and robot movements. This article describes an alternative approach that uses the U/V direction of a surface, its edge loops, and edge rings, to intuitively describe a toolpath.</summary>
        <content type="html">

&lt;p&gt;In a previous post, I talked about &lt;a href="https://thinkmoult.com/assets/../robotic-stereotomy-stone-diamond-wire-cutting.html"&gt;using a diamond wire to cut
stone&lt;/a&gt;. The wire
cutter would be attached to a 6-axis robot arm which would then be pushed
through the stone. If you haven't yet read it, read it now.&lt;/p&gt;
&lt;p&gt;Today, I want to talk about the technical approach used.&lt;/p&gt;
&lt;p&gt;The robotic arm that performed the cutting was a German KUKA robot, which processes a
proprietary toolpath instruction language known as KRL (KUKA Robot Language).
Given that there was no open-hardware robot available, this had to do. KUKA
robots come with a similarly proprietary simulation software, which is
horrendously expensive. Luckily, there is a cheaper, but mostly functionally
equivalent simulator called KukaPRC (some funky behaviour, but quite well done)
written for Grasshopper, which is the visual scripting language used by Rhino.&lt;/p&gt;
&lt;p&gt;The visual scripting language comes with a set of nodes for drag-and-drop
create-your-own toolpath. Although one valid approach was to parameterise the
shape of each block and use Grasshopper to generate toolpaths, we had a wider
goal of more generic toolpath generation due to strangely cut shapes.&lt;/p&gt;
&lt;p&gt;The good news is that every shape's surface is already parameterised in the form
of the surface UV. Given a clean mesh topology with a lot of quads, we figured
that the wire could simply follow edge rings, starting with U, an following V,
until it had carved up the required shape.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Edge loops and edge rings which create a natural
toolpath" src="https://thinkmoult.com/assets/edge-loops-and-edge-rings.png"&gt;&lt;/p&gt;
&lt;p&gt;The KRL syntax in its simplest form supports an XYZ for the toolhead location,
along with a tool axis vector and tool "up" vector. The XYZ is all relative to a
datum which is calibrated at the beginning. The datum would be an arbitrary
point on the jig which would hold the stone. Each edge in the edge ring would
represent the toolhead axis, and the midpoint of the edge would represent the
toolhead XYZ location. The "up" vector would be logically chosen to minimise
robot arm clashes.&lt;/p&gt;
&lt;p&gt;I used Blender with a quick Python script to create the necessary vectors for
the toolpath. Seams were used to denote where the cuts stopped and started,
making the workflow similar to how any existing texture artist would work. This
would also resolve any issues with poles made in the surface topology.&lt;/p&gt;
&lt;p&gt;Using Blender with quad-meshes created a very fluid workflow between scanning
rocks, retopologising, and generating toolpaths. The Blender script would then
spit out a KRL file which we could feed into the Grasshopper-based simulator, as
a final sanity check before actually carving up stone.&lt;/p&gt;
&lt;p&gt;Because actually carving stone is slow and expensive, we would prototype with a
hot-wire cutter (resistance wire with a haphazardous power pack tied to it) and
styrofoam. If you clamp the foam down at the bottom and use dense foam, it sort
of doesn't move around too much.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Carving foam using toolpaths generated from edge
loops" src="https://thinkmoult.com/assets/cutting-foam-block.png"&gt;&lt;/p&gt;
&lt;p&gt;By the time I write this post, all the languages, robot APIs and scripts would
be deprecated, and so is probably not worth digging up and sharing. However, the
principle of edge loops and seams as a workflow was really quite intuitive, and
thought the concept was worth a post.&lt;/p&gt;
&lt;p&gt;Most toolpath generation techniques, however, do not have intuitiveness to the
user as their top priority. Most also do not take into account surface striation
patterns. Most would have a much more sensible goal such as minimising tool
wear, or material wastage, or robot movement efficiency. This approach does
absolutely none of that and is therefore useless for any proper production.
Still, pretty slick for rapid prototyping.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Photorealistic rendering with Radiance</title>
        <link href="https://thinkmoult.com/photorealistic-rendering-with-radiance.html" />
        <id>https://thinkmoult.com/photorealistic-rendering-with-radiance.html</id>
        <updated>2019-05-04</updated>
        <summary>Radiance is rarely used for photorealistic rendering. This case study of rendering my living room demonstrates that it is possible to be both aesthetically believable and scientifically accurate.</summary>
        <content type="html">

&lt;p&gt;&lt;a href="https://www.radiance-online.org/"&gt;Radiance&lt;/a&gt; is the world's leading lighting simulation toolkit. It is used by
lighting engineers internationally when they want to predict how a space will be
lit, either through natural or artificial lighting. It is also unique in its
quest for "photometrically correct" rendering (see a &lt;a href="https://thinkmoult.com/assets/../a-comparison-between-radiance-and-other-rendering-engines.html"&gt;comparison of Radiance and
other rendering
engines&lt;/a&gt;
here).&lt;/p&gt;
&lt;p&gt;The most common usecase for rendering with Radiance is for scientific
quantitative analysis. In contrast, the CG community (such as Pixar) has the
goal to make the unreal look real, to give wonder, surprise, and to make you
believe in another artistic world.&lt;/p&gt;
&lt;p&gt;Somewhere between the scientists and the artists lie those who design the world
around us. They are the architects, industrial designers, and installation
artists. The unreal, at the end of the day, needs to manifest in a physical
creation that can be manufactured and placed in space. A mixture of physical
prototypes virtual prototypes are used to flesh out the idea. But how do we
guarantee that the physical creation will match the virtual prototype? How can
we trust our virtual sketch?&lt;/p&gt;
&lt;p&gt;In this article, I will give a breakdown of a living room render done in
Radiance. This is a proof of concept of implementing a level of qualitative
detail that isn't usually done in Radiance renders, with the end goal to make it
economical to create scientifically accurate, unreal renders.&lt;/p&gt;
&lt;h2&gt;Living room renders with Radiance&lt;/h2&gt;
&lt;p&gt;The scene used is my living room at home in Sydney, Australia. Let's start with
some images.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A luminance render of my work desk at night" src="https://thinkmoult.com/assets/radiance-work-desk-night.png"&gt;&lt;/p&gt;
&lt;p&gt;This is a luminance render of the work desk lit only by a cheap artificial desk
lamp from IKEA. It is adjusted with human exposure adjustment, so there is a
slight desaturation and ability to see the depths of the room.&lt;/p&gt;
&lt;p&gt;To judge the human exposure adjustment, there is only my word as evidence of
actually sitting in that space looking at the scene at night. Radiance does an
excellent job at what is an incredibly complex field of human interpretation.
One immediately visible flaw is the glare given off by the computer monitor. At
night, after the screen is on for a while, this glare is not visible. Other
than the glare, I can only give a qualitative statement where I claim that the
real life scene and the render look quite similar.&lt;/p&gt;
&lt;p&gt;Let's see how it compares to a photo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A greyscale comparison of the render and a
photo" src="https://thinkmoult.com/assets/radiance-work-desk-photo-comparison.jpg"&gt;&lt;/p&gt;
&lt;p&gt;For completeness, here is a colour version.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A colour comparison of the render and a
photo" src="https://thinkmoult.com/assets/radiance-work-desk-photo-comparison-c.jpg"&gt;&lt;/p&gt;
&lt;p&gt;This comparison of three images represents a greyscale version of the original
luminance render on the left. On the right is a photograph of the actual room
taken with a phone camera set on automatic. Naturally, the photograph has the
desk lamp shown as overexposed. The camera also captures lighting effects not
visible to the human eye, such as a blue tinting to the computer monitor, and
the extremely reflective surface of the desk. In real life, the desk is much
less specular.&lt;/p&gt;
&lt;p&gt;In the centre, it shows a photo taken of the render of the left. This naturally
"adds" the layer of camera exposure imperfections (subject to the brightness
clipping of the computer screen).&lt;/p&gt;
&lt;p&gt;For qualitative results, which is the purpose of this render, it is suffice to
say that they look rather similar. Here is another night time shot that shows
more of the room.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A luminance night time render of the entire room" src="https://thinkmoult.com/assets/radiance-room-night.png"&gt;&lt;/p&gt;
&lt;p&gt;Let's see it in the daytime.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A luminance render of my living room" src="https://thinkmoult.com/assets/radiance-room-day.png"&gt;&lt;/p&gt;
&lt;p&gt;This daytime render shows the entirety of the living room taken from behind the
desk with human exposure adjustment. There is a variety of entourage in the
scene, as well as a glimpse of the backyard outside, turf grass, perimeter
fencing, and planter bed to the right.&lt;/p&gt;
&lt;p&gt;Again, there is only a claim made by myself that it does look indeed quite
similar to the real life scene.&lt;/p&gt;
&lt;p&gt;To help others appreciate the similarity, here is a greyscale comparison. The
render is on the left and the phone camera photo (on automatic settings) is on
the right. The photo is not quite exactly the same in terms of time of day,
contents of the living room (a lot more messy in real life!), and camera
position. However, it is enough to qualitatively admit that they are quite
similar. No extra manipulation (apart from the greyscale filter) was done on
either the render or the photo.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A greyscale comparison of the living room render and a
photo" src="https://thinkmoult.com/assets/radiance-room-photo-comparison.jpg"&gt;&lt;/p&gt;
&lt;p&gt;For completeness, here is a colour version.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A colour comparison of the living room render and a
photo" src="https://thinkmoult.com/assets/radiance-room-photo-comparison-c.jpg"&gt;&lt;/p&gt;
&lt;p&gt;To bring some numerics to this primarily qualitative exercise, this falsecolour
luminance render shows the range of values seen in the render.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A falsecolour luminance render of the living
room" src="https://thinkmoult.com/assets/radiance-room-falsecolor.png"&gt;&lt;/p&gt;
&lt;p&gt;Similarly, a falsecolour illuminance render is shown to give an idea of the
range of values.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A falsecolour illuminance render of the living
room" src="https://thinkmoult.com/assets/radiance-room-i-falsecolor.jpg"&gt;&lt;/p&gt;
&lt;p&gt;To complete the set of images, here is the work desk again, this time rendered
in the day time.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A luminance daytime render of my living room work
desk" src="https://thinkmoult.com/assets/radiance-work-desk-day.png"&gt;&lt;/p&gt;
&lt;p&gt;As a bonus, a panoramic VR environment of the room is supplied that uses WebVR
and can be viewed on any computer or phone. If you have a form of cardboard VR
goggles, you can view the scene using them.&lt;/p&gt;
&lt;h2&gt;Capabilities demonstrated by the render&lt;/h2&gt;
&lt;p&gt;The objective of this render was to essentially use Radiance with techniques
that are usually only used in a more traditional CG workflow. However, there was
one prerequisite: &lt;em&gt;the render had to be done "blind"&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;CG artists usually render by creating test renders, and then slowly tweak the
scene until it matches the look they are aiming for. For this "blind" render, no
artistic license was taken with these renders. There were no tests or tweaks,
all of the data was entered and the render is final (unless further data can be
added or re-measured to improve scientific accuracy). All geometry was taken
from measurements of real life objects (with one exception to do with foliage,
which is described later). All materials are also taken from real life
measurements in a different environment. The render is a result of careful
numeric input of measurements on top of the pillars of scientific validation in
Radiance's history. This "blind" render methodology was to prove the ability to
reliably predict the look of a unbuilt space simply by measuring samples of
objects.&lt;/p&gt;
&lt;p&gt;Apart from the "blind" render, here are some other capabilities demonstrated:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Only vanilla Radiance is used, so the scene is written with a text editor (Vim)
   without using any frontend. Meshes use OBJ files that can be created from any
   software (in this case, Blender is used)&lt;/li&gt;
&lt;li&gt;Both low and high polygon meshes are used to build a scene&lt;/li&gt;
&lt;li&gt;Diffuse and specular maps in material definitions (normal maps are &lt;em&gt;not&lt;/em&gt;
   used, due to Radiance's inability to displace objects along the normal Z axis)&lt;/li&gt;
&lt;li&gt;A mixture of texture maps and procedural textures are used&lt;/li&gt;
&lt;li&gt;Usage of particle driven vegetation generation&lt;/li&gt;
&lt;li&gt;Usage of duplivert (instance) based vegetation generation&lt;/li&gt;
&lt;li&gt;Usage of photogrametrically scanned objects&lt;/li&gt;
&lt;li&gt;Artificial lighting using &lt;code&gt;.ies&lt;/code&gt; data of a lamp, placed in a luminaire&lt;/li&gt;
&lt;li&gt;Geolocated CIE sky natural lighting, with a time of day&lt;/li&gt;
&lt;li&gt;A calibrated environment map, combined with the CIE sky&lt;/li&gt;
&lt;li&gt;A non-trivial scene asset organisation structure, with reusable assets,
   dividing the scene into different parts. &lt;/li&gt;
&lt;li&gt;Panoramic rendering, for use in static VR, with a VR demo included&lt;/li&gt;
&lt;li&gt;Cross platform support, all this work was done in Linux, but no Linux
   specific technologies are used&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Asset structure in the scene&lt;/h2&gt;
&lt;p&gt;The assets were largely split into three areas for organisation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The living room and the objects inside&lt;/li&gt;
&lt;li&gt;The planter bed seen to the right and all of its groundcover plants&lt;/li&gt;
&lt;li&gt;The backyard with turf, fencing, and trees&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="WIP image of the entire scene" src="https://thinkmoult.com/assets/living-room-overview.png"&gt;&lt;/p&gt;
&lt;p&gt;Splitting the assets meant that should a portion of the scene change, the entire
octree didn't need to be recompiled. The scene was then further split into:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Individual items of furniture or entourage&lt;/li&gt;
&lt;li&gt;Individual instances of plants&lt;/li&gt;
&lt;li&gt;Individual patches of turf&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The assets were organised into atomic directories following a &lt;a href="https://thinkmoult.com/assets/../proposed-radiance-filesystem-hierarchy-standard.html"&gt;proposed Radiance
Filesystem Hierarchy
Standard&lt;/a&gt;. This
allowed the scene to include many objects without being overly complex in its
programmatic definition.&lt;/p&gt;
&lt;p&gt;A brief glance at
&lt;a href="https://bin.sevenstrokes.net/living-room/scene.rad"&gt;&lt;code&gt;scene.rad&lt;/code&gt;&lt;/a&gt; and the
&lt;a href="https://bin.sevenstrokes.net/living-room/Makefile"&gt;&lt;code&gt;Makefile&lt;/code&gt;&lt;/a&gt; demonstrates the
succinct, intuitive, human description of all elements that are present in the
scene.&lt;/p&gt;
&lt;h2&gt;Mesh modeling and objects&lt;/h2&gt;
&lt;p&gt;The meshes were included in Radiance using &lt;code&gt;mesh&lt;/code&gt; objects. This is described in
my &lt;a href="https://thinkmoult.com/assets/../basic-rendering-tutorial-radiance.html"&gt;beginners tutorial to
Radiance&lt;/a&gt;. This by itself is
enough to immediately create a lot of realism in the scene.&lt;/p&gt;
&lt;p&gt;Here's a wireframe view of the scene. Relatively standard CG modeling practices
are used here. Examples include maximising quad meshes to improve mesh topology,
and using bevels to give realistic edges.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A wireframe OpenGL render of the scene" src="https://thinkmoult.com/assets/blender-wip-1.png"&gt;&lt;/p&gt;
&lt;p&gt;Let's take a look at the wireframes of some of the more detailed aspects of the
scene. This gives an idea of the level of detail in modeling required.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Shoes and GPO outlets in the distance are given the same level of detail as
nearby objects" src="https://thinkmoult.com/assets/blender-wip-2.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="A softbody simulated cloth, along with wires and beveled keyboard" src="https://thinkmoult.com/assets/blender-wip-3.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Glints from screws, bevels, and beads give slight hints of detail for realism" src="https://thinkmoult.com/assets/blender-wip-4.png"&gt;&lt;/p&gt;
&lt;h2&gt;Materials and textures&lt;/h2&gt;
&lt;p&gt;In order to record materials, every real life object was brought outside into
bright clear sunlight, and measured using the &lt;code&gt;macbethcal&lt;/code&gt; method. I've detailed
how to &lt;a href="https://thinkmoult.com/assets/../use-macbethcal-to-calibrate-textures.html"&gt;calibrate textures using
&lt;code&gt;macbethcal&lt;/code&gt;&lt;/a&gt; in another
post, but essentially this involves a RAW photograph of the material sample
together with
a colour checker chart. The average RGB of the diffuse material is then measured
after running &lt;code&gt;macbethcal&lt;/code&gt;, and any CG diffuse texture map then is scaled to
that measured RGB. Specular and roughness values were guessed based on sensible
values, with help from &lt;a href="https://thinkmoult.com/assets/../radiance-specularity-and-roughness-value-examples.html"&gt;examples of specular and roughness in
Radiance&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Some materials could not be brought outside, such as the carpet or wall. However
carpet or wall close to a window in ideal conditions can still be measured using
&lt;code&gt;macbethcal&lt;/code&gt;. In the future, I plan to invest in some accurate artificial
lights.&lt;/p&gt;
&lt;p&gt;Translucent materials had their transparency measured using a luxmeter placed in
front of and behind the object. Multiple measurements were taken at different
times of day and an average taken of the results.&lt;/p&gt;
&lt;h2&gt;Artificial lighting&lt;/h2&gt;
&lt;p&gt;Only one artificial luminaire is present in the scene: the desk lamp. This is a
cheap luminaire bought from IKEA, which originally came with a clear LED candle
bulb that is no longer sold. The LED lamp contained a reflector which casted
rather interesting shadows, but unfortunately no &lt;code&gt;.ies&lt;/code&gt; file is provided.
However, this lamp can be replaced with any cheap generic bulb, and so there is
no guarantee that users of the space will choose that particular bulb.&lt;/p&gt;
&lt;p&gt;As a result, I replaced the original lamp with a cheap, relatively
omnidirectional bulb that you might expect to find at the shops (in other words,
an easier bulb to simulate). Online, I found an &lt;code&gt;.ies&lt;/code&gt; file by Cree, that
provided the same shape, temperature and lumen output of the simpler bulb.
Therefore, it isn't the exact same bulb, but is similar. The nighttime render
verifies that the bulb behaves as expected. You can see the &lt;code&gt;.ies&lt;/code&gt; sphere shape
relative to the luminaire in the picture below. The bulb itself, although not
seen in the render, contains glow materials.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A sphere representing the lamp's IES data placed inside the
luminaire" src="https://thinkmoult.com/assets/ies-sphere-lamp.png"&gt;&lt;/p&gt;
&lt;p&gt;The computer monitor is also technically an artifical light source. The good
news is that all computer monitors are roughly the same in terms of brightness,
and that Greg Ward has already measured a VDU (visual display unit) in the past,
at 250cd/m2. Therefore his material settings were copied verbatim.&lt;/p&gt;

&lt;p&gt;The environment lighting is created using both a CIE sky and a typical HDRI
environment you might find in CG renders. The HDRI map was multiplied to give a
ballpark correct figure for grass on a sunny day, and then a mask was applied to
remove the sky portion of the HDRI map.&lt;/p&gt;
&lt;p&gt;The sky portion was replaced with a &lt;code&gt;gensky&lt;/code&gt; CIE sky with parameters for the
geolocation and a solar disc for the sun. As such the primary lighting is
provided by the sky, but the scaled HDRI environment helps add a bit of
variation within the ballpark values, but does not significantly adversely
affect the simulation.&lt;/p&gt;
&lt;p&gt;&lt;img alt="HDRI envmap with a sky portion replaced by a CIE sky" src="https://thinkmoult.com/assets/hdri-envmap-cie.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Any surrounding context that was expected to actually affect the simulation was
modeled, and therefore the HDRI image was limited to subtle background effects.&lt;/p&gt;
&lt;h2&gt;Vegetation particles&lt;/h2&gt;
&lt;p&gt;As in regular CG, a few variations of plant stems and leaves were modeled. These
could then be instanced in various locations, rotations, and scales using the
typical instancing tools. In Blender, the feature is known as "particles", but
the method of growing and placing objects in a render, usually used for
vegetation, is well established.&lt;/p&gt;
&lt;p&gt;Radiance does not have any particle distribution tools, but it does support
instancing. Therefore in the case of the backyard grass, a script was written to
copy a patch of grass up to 50 times in an area. I describe more about &lt;a href="https://thinkmoult.com/assets/../creating-grass-and-plants-in-radiance.html"&gt;how to
create vegetation in
Radiance&lt;/a&gt; in another post.
You can see the script generated
&lt;a href="https://bin.sevenstrokes.net/living-room/grass.rad"&gt;&lt;code&gt;grass.rad&lt;/code&gt;&lt;/a&gt; which sets out
the instances for each species of grass.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Grass and bush as textured planes vs modeled grass and
bush" src="https://thinkmoult.com/assets/bush-texture-vs-model.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Instances were deleted where they were not visible from the point of view of the
camera.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Grassy patches that form the back yard" src="https://thinkmoult.com/assets/blender-wip-5.png"&gt;&lt;/p&gt;
&lt;p&gt;Whereas the grass leaves were fully modeled (but not textured), the herbacious
vegetation in the planter bed was only semi modeled (but fully textured). Each
fern frond, leaf, or stem, was merely an alpha mapped plane. This was done to
optimise the rendering time.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alpha mapped planes arranged to create a planter bed" src="https://thinkmoult.com/assets/blender-wip-6.png"&gt;&lt;/p&gt;
&lt;h2&gt;Vegetation photogrammetry&lt;/h2&gt;
&lt;p&gt;Photogrammetry with Poisson reconstruction is generally not the right tool to
scan moving, thin, homogenous surfaces. This can be seen in the bulbous
backfaces in the mesh reconstruction of these ferns in the planter bed.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Poisson reconstruction unable to reconstruct thin
shapes" src="https://thinkmoult.com/assets/failed-poisson-reconstruction.png"&gt;&lt;/p&gt;
&lt;p&gt;Perhaps another reconstruction technique, such as my proposed &lt;a href="https://thinkmoult.com/assets/../point-cloud-mesh-reconstruction-with-metaballs.html"&gt;point cloud mesh
reconstruction using metaballs&lt;/a&gt;, may be more successful, but were not used in
this render.&lt;/p&gt;
&lt;p&gt;From a distance, mesh reconstructions may still be viable. Often, a UV
map is generated from the projected raster photos that make up the scan. This is
much harder to calibrate, as it is a messy collage of photos. For a bush, where
you generally only care if the leaf is within the ballpark of correct values,
and you are only seeing it from a distance, it is acceptable to use this
technique.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A scanned bush mesh" src="https://thinkmoult.com/assets/photogrammetrically-scanned-bush.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="A generated UV map from a scanned bush" src="https://thinkmoult.com/assets/bush-uv-map.png"&gt;&lt;/p&gt;
&lt;p&gt;This type of scanned entourage offers much more realism than the alternative
technique of alpha mapped planes for far away vegetation.&lt;/p&gt;
&lt;h2&gt;Alpha mapped trees&lt;/h2&gt;
&lt;p&gt;There are a few trees planted in the planter bed, and beyond the planter bed. In
this render, an alpha mapped plane was used, where the tree texture was
calibrated. The side effect of not using a fully modeled tree is that the
shadows will not be truly correct, especially as the light generally hits at
quite a sharp angle to the alpha mapped plane, which causes it to cast shadows
that can't be seen from the room.&lt;/p&gt;
&lt;p&gt;The position and shape of these dappled shadows are not critical to the
scientific accuracy, as long as they exist. Therefore the tree was placed in the
horizontal plane, to represent the canopy of the tree, and to cast the shadows.
If viewed from another angle, this would look absolutely ridiculous, but for the
purposes of simulating from this camera angle, it does what it needs to.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A view of the alpha mapped plane trees" src="https://thinkmoult.com/assets/alpha-mapped-trees.png"&gt;&lt;/p&gt;
&lt;h2&gt;Rigid body simulation placed bricks&lt;/h2&gt;
&lt;p&gt;A nearly invisible part of the render is a pile of bricks in the backyard. I
don't actually have a pile of bricks in my backyard, but they do show that any
regular CG technique is still applicable, so long as it can be baked into a
mesh. In this case, a rigid body simulation was used to drop them and have them
pile naturally.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A pile of bricks, that you can hardly see in the actual
render" src="https://thinkmoult.com/assets/rigid-body-bricks.png"&gt;&lt;/p&gt;
&lt;h2&gt;Panoramic 360 VR&lt;/h2&gt;
&lt;p&gt;A static, panoramic 360 VR was created from this render. This means that you
cannot move around in the space, but you can look around 360 degrees, just like
Google StreetView. This is a old trick that has been around for a long time, but
Radiance has been around longer than that, and so it is not too intuitive how to
achieve this.&lt;/p&gt;
&lt;p&gt;I've written a tutorial on &lt;a href="https://thinkmoult.com/assets/../create-360-vr-panoramas-with-radiance.html"&gt;how to create 360 VRs with Radiance&lt;/a&gt; that covers all
the steps required. The &lt;code&gt;scene.rif&lt;/code&gt; includes commented out sections that
describe how to create a 360 VR using the three techniques described in the
tutorial (angular map, cube map, and equirectangular map). The equirectangular
map is the preferred approach.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A 360 panoramic VR environment of the room" src="https://thinkmoult.com/assets/radiance-vr.jpg"&gt;&lt;/p&gt;
&lt;p&gt;After rendering out the panoramic image, it needs to be displayed in a real time
viewer. Nowadays, there are plenty of open source solutions that provide this
function. I have used &lt;a href="https://aframe.io/"&gt;A-Frame&lt;/a&gt;, which is a WebVR script
that runs in your browser. You can &lt;a href="https://thinkmoult.com/assets/vr/"&gt;view a demo of the Radiance VR&lt;/a&gt;. If you
have cardboard VR goggles, which you can buy as a cheap flatpack online, you can
put your phone in and move your head around to see the scene.&lt;/p&gt;
&lt;h2&gt;Full inspection of the sources&lt;/h2&gt;
&lt;p&gt;The living room render is a fully open-source creation available for your
inspection. It is released under a CC-BY-SA 4.0 license, and you can browse the
&lt;a href="https://bin.sevenstrokes.net/living-room/"&gt;Radiance living room source files&lt;/a&gt;
for free online here. It is also a public &lt;code&gt;rsync&lt;/code&gt; directory, so you can download
it as follows:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rsync -avz rsync://sevenstrokes.net/bin/living-room .
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Some of the more reusable assets have been reshared and are available in the
&lt;a href="https://radiance.thinkmoult.com/"&gt;free 3D Radiance model repository&lt;/a&gt;.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Creating grass and plants in Radiance</title>
        <link href="https://thinkmoult.com/creating-grass-and-plants-in-radiance.html" />
        <id>https://thinkmoult.com/creating-grass-and-plants-in-radiance.html</id>
        <updated>2019-05-01</updated>
        <summary>Radiance is seldom used for rendering detailed vegetation such as grass and plants. I introduce how to use common CG techniques to still achieve photorealistic grass in Radiance.</summary>
        <content type="html">

&lt;p&gt;Radiance is not often used to simulate fields of grass and heavily vegetated
scenes like those often created by CG artists with other rendering engines. This
is because exactly simulating the average luminance or illuminance on natural
environments is not often required. This article will demonstrate how to render
these types of scenes in Radiance.&lt;/p&gt;
&lt;p&gt;The usual technique for rendering grass is to model some strands, and then place
instances of those strands using an automatic system, such as a "hair",
"particle", "duplivert", or "instancing" system that is provided with many
modeling software such as Blender. Sometimes, the vegetation is purely a series
of alpha-mapped plane. In other cases, such as for trees, the plant is generated
and leaves appear at locations defined by an L-system or similar. All of these
techniques can be used with Radiance.&lt;/p&gt;
&lt;p&gt;As Radiance does not take shortcuts in its calculations, I would advise to
minmise the polygons where necessary when rendering vegetation. With grass,
don't model anything detailed. With groundcover and trees, use alpha mapped
planes as much as possible.&lt;/p&gt;
&lt;h2&gt;Bake all the vegetation into a single mesh&lt;/h2&gt;
&lt;p&gt;The simplest approach is to "bake" the generated vegetation into a static mesh
and export it as an OBJ, regardless of what generated it in the first place. The
mesh can then be included in a typical manner as described by my &lt;a href="https://thinkmoult.com/assets/../basic-rendering-tutorial-radiance.html"&gt;basic Radiance
beginners tutorial&lt;/a&gt;. Despite
its simplicity, there are a few disadvantages of this approach: firstly, the
created OBJ can become extremely large, it also does not conserve memory on
repeated elements when rendering, and it is an all or nothing approach, it is
hard to turn on and off elements. That said, it is very, very easy, and so I use
this approach to create a planter bed in my &lt;a href="https://thinkmoult.com/assets/../photorealistic-rendering-with-radiance.html"&gt;living room Radiance render&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A baked planter bed mesh with many polygons rendered in Radiance" src="https://thinkmoult.com/assets/planter-bed.jpg"&gt;&lt;/p&gt;
&lt;p&gt;With Blender, there is a trick to export complex particle creations into a
single mesh without needing to bake it first, by linking the particle object
into a fresh file and then exporting an OBJ.&lt;/p&gt;
&lt;h2&gt;Create many instances&lt;/h2&gt;
&lt;p&gt;Another approach is to ask Radiance to copy and paste and object many times.
Radiance has an &lt;code&gt;instance&lt;/code&gt; object, which places a precompiled octree into a
scene. This conserves memory when rendering. Although it is tempting to create a
single strand of grass and then instance it 10,000 times, I have found Radiance
is not capable of dealing with this. I have found more than 500 instances of a
single type of octree to cause Radiance to take a long time to prepare for
rendering, as well as octrees of incredibly thin aspect ratio (i.e. a grass
strand) to be very difficult for Radiance to handle.&lt;/p&gt;
&lt;p&gt;That said, as long as you limit the instance to have a balanced aspect ratio,
such as a patch of vegetation, and do not go overboard in the number of
instances, then this is a valid technique. Here is an example of an instance you
might create which is not too long or thin.&lt;/p&gt;
&lt;p&gt;&lt;img alt="An instance of a plant stem, which could be repeated many
times" src="https://thinkmoult.com/assets/stem-instance.png"&gt;&lt;/p&gt;
&lt;p&gt;The instance is then placed multiple times with different locations and
rotations to build up complexity.&lt;/p&gt;
&lt;p&gt;&lt;img alt="An example of many tufts of ferns instanced to create a scene" src="https://thinkmoult.com/assets/instance-example.png"&gt;&lt;/p&gt;
&lt;p&gt;In Blender, there is a very easy way to do this, using a technique known as
&lt;em&gt;dupliverts&lt;/em&gt;. With this technique, a mesh is created where each vertex
represents the origin of placing an instance. This Blender script automatically
converts these vertices into Radiance instances:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import bpy
import math

# Path to the octree
octree = 'obj/bahia-grass.oct'
n = 0
with open('/tmp/particles.rad', 'w') as output:
    for vertex in bpy.context.active_object.data.vertices:
        output.write('void instance particle_{}\n5 {} -t {} {} {} \n0\n0\n\n'.format(
            n,
            octree,
            vertex.co[0],
            vertex.co[1],
            vertex.co[2],
        ))
        n = n + 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This technique is especially useful when applied to groundcovers. A patch of
groundcover is created, and then simply repeated a few times until it becomes
convincing. I have released many types of plants in the &lt;a href="https://radiance.thinkmoult.com/"&gt;free Radiance model
repository&lt;/a&gt; where you can download and quickly
create vegetation yourself.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A patch of Bahia grass available in the free Radiance model
repository" src="https://thinkmoult.com/assets/bahia-grass.png"&gt;&lt;/p&gt;
&lt;h2&gt;Using alpha mapped planes for textures&lt;/h2&gt;
&lt;p&gt;Alpha mapped planes are a standard technique in the CG industry. Here is how to
define it in Radiance. First, we define &lt;code&gt;diffuse-map&lt;/code&gt;, this is the diffuse
texture that we will use for our object. Then, we will apply to this a plastic
shader. Our plastic shader multiplies the RGB values of the &lt;code&gt;diffuse-map&lt;/code&gt; by 1.
For more information about how to set a diffuse map, you can read &lt;a href="https://thinkmoult.com/assets/../use-macbethcal-to-calibrate-textures.html"&gt;how to use
macbethcal to calibrate
textures&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then, &lt;code&gt;my-material&lt;/code&gt; is defined, which is what will be assigned to our actual
object, using UV coordinates. An &lt;code&gt;alpha-mask.hdr&lt;/code&gt; is provided where white is
visible and black is invisible. The &lt;code&gt;mixpict&lt;/code&gt; will mix between the &lt;code&gt;diffuse&lt;/code&gt;
material and a &lt;code&gt;void&lt;/code&gt; (i.e. invisible) material, depending on the &lt;code&gt;grey&lt;/code&gt;
function, which reads greyscale data from &lt;code&gt;alpha-mask.hdr&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void colorpict diffuse-map
7 red green blue diffuse-map.hdr . frac(Lu) frac(Lv)
0
0

diffuse-map plastic diffuse
0
0
5 1 1 1 0 0

void mixpict my-material
7 diffuse void grey alpha-mask.hdr . frac(Lu) frac(Lv)
0
0
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Front and back face materials&lt;/h2&gt;
&lt;p&gt;Plants are interesting from a material point of view because they often have a
different material from the front face of leaves and the backface of leaves. For
instance, the front face may be more specular or have a different colour.&lt;/p&gt;
&lt;p&gt;This can be achieved in Radiance using a &lt;code&gt;mixfunc&lt;/code&gt; as follows, which mixes
between the &lt;code&gt;frontface&lt;/code&gt; and &lt;code&gt;backface&lt;/code&gt; material, which is defined elsewhere.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void mixfunc my-material
4 frontface backface if(Rdot,1,0) .
0
0
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Creating variations in colour&lt;/h2&gt;
&lt;p&gt;With autogenerated particle or hair systems, often colour can be varied. This
can also somewhat be achieved in Radiance. One approach is to modify the
instance script above to select from several preset octrees, each compiled with
a different material. &lt;/p&gt;
&lt;p&gt;Another approach is to use a calculation. Here is a crude example, saved as
&lt;code&gt;random.cal&lt;/code&gt;, which pumps out a gradient of RGB along an objects local UV
coordinates.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{ A1 = 0-1, where 0 has no variation and 1 varies the colour to 0}
{
red = (((Lu + Lv) / 2) * A1) + (1 - A1);
green = (((Lu + Lv) / 2) * A1) + (1 - A1);
blue = (((Lu + Lv) / 2) * A1) + (1 - A1);
}
red = (((Lu + Lv) / 2) * A1) + (1. - A1);
blue = (((Lu + Lv) / 2) * A1) + (1. - A1);
green = (((Lu + Lv) / 2) * A1) + (1. - A1);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It is then applied as follows:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void colorfunc random-color
4 red green blue random.cal
0
1 .25
&lt;/code&gt;&lt;/pre&gt;
        </content>
    </entry>
    <entry>
        <title>Ten Smiles, an Android app to remind you to smile</title>
        <link href="https://thinkmoult.com/ten-smiles-android-app-to-remind-you-to-smile.html" />
        <id>https://thinkmoult.com/ten-smiles-android-app-to-remind-you-to-smile.html</id>
        <updated>2019-04-26</updated>
        <summary>Ten Smiles is a small, free, Android app that reminds you to smile 10 times each day. I wrote it for fun a few years ago.</summary>
        <content type="html">

&lt;p&gt;Ten Smiles was a concept Android app that would run in the background of your
Android phone, and pop up randomly 10 times a day to remind you to smile. I
wrote it a few years ago as a little programming exercise. Along with the text
reminder, it would additional show a happy face with a funny moustache, and a
horrible pun to accompany it with, all randomly chosen from a small repository
of puns and faces which gets old real quick. Let's see an example reminder!&lt;/p&gt;
&lt;p&gt;&lt;img alt="An example smile reminder from the Ten Smiles app" src="https://thinkmoult.com/assets/ten-smiles-example.png"&gt;&lt;/p&gt;
&lt;p&gt;Ten Smiles is pretty much plug and play. You just install the application from
this &lt;a href="https://thinkmoult.com/assets/tensmiles.apk"&gt;Ten Smiles Android installation APK&lt;/a&gt;, and then toggle the
"Enable Ten Smiles" option in the app, and hit save. It will automatically
choose 10 random times each day roughly during non-sleeping hours, and will pop
up by itself.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A small number of settings visible in the Ten Smiles app" src="https://thinkmoult.com/assets/ten-smiles-settings.png"&gt;&lt;/p&gt;
&lt;p&gt;Unfortunately, I no longer have the source code for this project as it was
merely an afternoon plaything a few years ago. However, I am not one for
inserting tracking codes or malware into my software as others may do - this is
evidenced by the static HTML nature of my blog.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>How to bulk convert PDFs to DXF or DWG</title>
        <link href="https://thinkmoult.com/how-to-bulk-convert-pdf-to-dxf-or-dwg.html" />
        <id>https://thinkmoult.com/how-to-bulk-convert-pdf-to-dxf-or-dwg.html</id>
        <updated>2019-04-02</updated>
        <summary>Inkscape and pstoedit can be used to convert between PDF, EPS, DXF, and DWG on the command line. This is very useful when bulk file conversions need to be done.</summary>
        <content type="html">

&lt;p&gt;Architectural, engineering, and construction drawings are usually produced in both PDF and DWG format. Often, a DWG is used for accurate scaling or inclusion in other programs. So if you only have a PDF, you might need to convert a PDF to a DXF or DWG.&lt;/p&gt;
&lt;p&gt;If you want to &lt;a href="https://knowledge.autodesk.com/support/autocad/troubleshooting/caas/sfdcarticles/sfdcarticles/How-to-convert-a-PDF-to-a-DWG-in-AutoCAD.html"&gt;convert a PDF to a DWG&lt;/a&gt;, it is possible to do this in AutoCAD using the &lt;code&gt;pdfimport&lt;/code&gt; command. However, this is a manual process and will be slow when you have many files to convert.&lt;/p&gt;
&lt;p&gt;Additionally, DWG is not an open data format. Using &lt;a href="https://thinkmoult.com/assets/../ethical-implications-of-openbim.html"&gt;non-open data formats in construction is not ethical&lt;/a&gt; and should be discouraged in the industry. Instead, a DXF file should be produced. A DXF is functionally equivalent to a DWG for 2D content, and can be opened in other software. It may be larger, as it is in ASCII format, but it can be compressed. If your DWG contains 3D data, it may be worth converting it into an OBJ instead, or ideally, an IFC file if it contains construction data.&lt;/p&gt;
&lt;p&gt;To convert a PDF to a DXF, we will first convert from PDF to EPS (Encapsulated PostScript format), and then convert from EPS to DXF. You will require &lt;a href="https://inkscape.org/"&gt;Inkscape&lt;/a&gt;, a free and open-source vector editing program similar to Adobe Illustrator. You will also require &lt;a href="http://www.calvina.de/pstoedit/pstoedit.htm"&gt;pstoedit&lt;/a&gt;, which is an open-source command line PostScript conversion tool.&lt;/p&gt;
&lt;p&gt;We will run the scripts using the command line, as it will be much faster than using a GUI. On Windows, you can run both commands using &lt;a href="https://www.cygwin.com/"&gt;cygwin&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./inkscape.exe -z --export-eps=&amp;quot;file.eps&amp;quot; &amp;quot;file.pdf&amp;quot;
pstoedit -f &amp;quot;dxf&amp;quot; &amp;quot;file.eps&amp;quot; &amp;quot;file.dxf&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here is a simple shell script that converts all files in a folder called &lt;code&gt;pdf/&lt;/code&gt; into an output folder called &lt;code&gt;dxf/&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#!/bin/bash
mkdir -p eps
mkdir -p dxf
for FILE in pdf/*.pdf; do
    export BASEFILE=`basename &amp;quot;$FILE&amp;quot;`
    echo &amp;quot;Processing $FILE&amp;quot;
    ./inkscape.exe -z --export-eps=&amp;quot;eps/$BASEFILE&amp;quot; &amp;quot;pdf/$BASEFILE&amp;quot;
    pstoedit -f &amp;quot;dxf&amp;quot; &amp;quot;eps/$BASEFILE&amp;quot; &amp;quot;dxf/$BASEFILE&amp;quot;
done
cd dxf/ &amp;amp;&amp;amp; rename &amp;quot;.pdf&amp;quot; &amp;quot;.dxf&amp;quot; *.pdf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It is worth mentioning that the &lt;a href="https://inkscape.org/doc/inkscape-man.html"&gt;Inkscape man page&lt;/a&gt; describes how to export to SVG format, and that &lt;code&gt;pstoedit&lt;/code&gt; also supports conversion to many other formats such as Adobe Illustrator files, plaintext, or even PowerPoint!&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>The ethical implications of OpenBIM</title>
        <link href="https://thinkmoult.com/ethical-implications-of-openbim.html" />
        <id>https://thinkmoult.com/ethical-implications-of-openbim.html</id>
        <updated>2019-03-25</updated>
        <summary>OpenBIM is an initiative to promote the use of open data in the architecture, engineering and construction industry. I describe how using OpenBIM has positive ethical implications.</summary>
        <content type="html">

&lt;p&gt;OpenBIM is an international initiative to use open data standards in the
architecture, engineering, and construction industry. This is in contrast to the
current state of the AEC industry, which is largely limited by the tools and
closed ecosystems of a few software vendor monopolies.&lt;/p&gt;
&lt;p&gt;The solution posited by OpenBIM is to switch to &lt;em&gt;open data&lt;/em&gt;. You may have
already heard of them, such as the IFC format. In fact, IFC is just one of many
OpenBIM initiatives, such as BCF, bsDD, BIMSIE, and OWL. Without deciphering
the funny acronyms, it is suffice to say they are all simply initiatives to
create open data in different contexts.&lt;/p&gt;
&lt;p&gt;In short, open data is a digital format that everybody can read and write. This
by itself is extremely interesting from a technical point of view, but in this
article I would like to focus on the ethical implications.&lt;/p&gt;
&lt;h2&gt;Open data prevents monopolies&lt;/h2&gt;
&lt;p&gt;The biggest advantage of open-data is that it allows interoperability between
different software. This has the obvious consequence of preventing industry
monopolies. As you'll find in any standard business textbook, monopolies stifle
innovation and give rise to customer exploitation. This is no surprise to
anybody in the industry. As one example, I describe &lt;a href="https://thinkmoult.com/assets/../a-comparison-between-radiance-and-other-rendering-engines.html"&gt;multiple sustainability and
light simulation tools that have been killed by
Autodesk&lt;/a&gt;.
I have also documented the &lt;a href="https://thinkmoult.com/assets/../why-revit-is-shit.html"&gt;daily problems with Revit that have been unfixed for
a decade&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In the current monopolistic state of affairs, the quality of the data that
describes our built environment is not governed by the government, instead, it's
governed by Autodesk. It is time we asked ourselves the question: &lt;em&gt;is leaving
Autodesk in charge of international building data really in the best interest of
society?&lt;/em&gt; Who should dictate the digital capabilities that help design the
environment around us?&lt;/p&gt;
&lt;p&gt;Shouldn't it be &lt;em&gt;society&lt;/em&gt;?&lt;/p&gt;
&lt;h2&gt;Open data allows design validation, to learn what makes good environments&lt;/h2&gt;
&lt;p&gt;The average lifespan of a building built today is 50 years if we're feeling
optimistic. The average lifespan of building data is 3 years. This is because
the supported software version of Autodesk products is 3 years. Admittedly,
companies can upgrade from one software version to the next, but any developer
with a large real estate portfolio will find it uneconomical to do this. Also,
anyone hired to endlessly upgrade Revit projects will kill themself after the
first year.&lt;/p&gt;
&lt;p&gt;This usually isn't a problem because the building data quality is so poor to
begin with due to inefficient and ineffective authoring tools. It is often
cheaper to simply resurvey a site, remodel a building, and drill a few
investigative holes here and there to see what's inside.&lt;/p&gt;
&lt;p&gt;The good news is that as authoring tools inevitably improve, without vendor
lock-in, a BIM model will last practically forever, especially because OpenBIM
standards are based on ASCII syntax. As a case in point, I can open an &lt;a href="https://en.wikipedia.org/wiki/IGES"&gt;IGES
file&lt;/a&gt; from 40 years ago. This means that the
data can be used further throughout the building's physical lifespan.&lt;/p&gt;
&lt;p&gt;This increased lifespan of the model has a significant ethical impact,
because it allows the building to be validated against its initial design
intent. This is to do with the concept of architectural liability. Whilst
building system engineers may have performance based contracts, architects are
simply not liable for the space that they design. When things don't work out and
a space is unsuccessful, it is hard to pinpoint what went wrong, and how to
improve it next time.&lt;/p&gt;
&lt;p&gt;This means that the time taken for an architect to learn if his design is good
or bad from concept phase to post-occupancy evaluation is a feedback loop of
around 10 years. This makes it incredibly hard for architects to learn how to
actually design better spaces for society. If the physical performance of all
buildings are linked back to building element data, it will give people an
opportunity to study deeper what makes good spaces for society, rather than
making a very expensive gambling mistake with millions of dollars of investment,
and trying better the next time.&lt;/p&gt;
&lt;h2&gt;Open data stores higher quality data on things that matter&lt;/h2&gt;
&lt;p&gt;It is well known that OpenBIM data improves the data quality by specifying
standardised data structures. However, these are technical advantages, not
ethical advantages. Where there is an ethical advantage is the amalgum and
variety of interrelated data that OpenBIM can capture.&lt;/p&gt;
&lt;p&gt;For example, most BIM users nowadays are doing little more than traditional 3D
modeling that has been done for many decades, with a bit of metadata sprinkled
on top. In fact, programs like Revit expose BIM data literally in the form of
key-value metadata pairs, which pretends that a building is a 3D shape with some
attributes.&lt;/p&gt;
&lt;p&gt;This couldn't be further than the truth. Buildings are about relationships
between objects and a merging of many disciplines which are politically
controlled by many stakeholders. In OpenBIM, you can store everything from the
prevailing wind direction, to exactly who is responsible for a building element,
to the eutrophication per unit of specified equipment, all in the one BIM model.
This variety of data that is combined in a structured way guides designers on
what data is important to different parties.&lt;/p&gt;
&lt;p&gt;This is vital because it allows people to capture the holistic network of
relationships that a building truly is. Without this understanding, the barrier
to analysing a side effect of a design change is a one week turnaround time by
a disconnected model from a third-party consultant and a dead tree report that
gets forgotten. This delay, isolated design process, and neverending game of
catch-up and rework in the team to relay data inherently creates bad design,
which is in turn bad for the environment.&lt;/p&gt;
&lt;p&gt;Another impact on data quality is due to a side effect of better
interoperability. Without vendor lock-in, specialised software can be used. This
is important because the number of features a software has is usually inversely
correlated with how good that software is at executing any particular feature.
It would make much more sense if you could use a dedicated 3D modeling tool for
3D modeling, use a dedicated data management tool for BIM data, and then link
the two together using open data. This would also improve the quality of
designs, because they could record the designers intent with much more fidelity
than lower fidelity one-size-fits-all tool compromises.&lt;/p&gt;
&lt;h2&gt;Open data is a prerequisite to human rights&lt;/h2&gt;
&lt;p&gt;We don't often hear the wild claim that file formats are connected to human
rights.  However, in the digital age and most of our lives invested in the
digital sphere, our digital rights are synonymous with our human rights.&lt;/p&gt;
&lt;p&gt;The digital world we live in has changed drastically since the birth of personal
computers, and perhaps not quite for the better in some ways. I will invite you
to read more about &lt;a href="https://thinkmoult.com/assets/../five-fundamental-facets-of-ethical-software.html"&gt;the five fundamental facets of ethical
software&lt;/a&gt;, where I go
into more detail. I describe some of the worrying trends in the virtual world,
and how open data is one of the prerequisites to a solution.&lt;/p&gt;
&lt;h2&gt;Open data is a public good&lt;/h2&gt;
&lt;p&gt;Any building, even if it is designed, built, owned, and run by a private
company, has public positive and negative externalities. Just as it is
impossible to isolate any part of the earth from its interdependency on any
other part of the earth, our buildings are no different. Yet in our daily
practice, we so easily refer to "man-made" objects versus "natural" objects, and
draw a thick red boundary line around our site bounary.&lt;/p&gt;
&lt;p&gt;Some governments, such as the Australian government, have pushed for open-data
standards on geoscience and GIS datasets. They do this because they realise that
information about the city is a public good. If it is made available to
everyone, everyone benefits - they can scrutinise the public realm, easily
create new maps, census analysis, and proposals to change things.&lt;/p&gt;
&lt;p&gt;Yet for some reason, public open data about the buildings which make up most of
the built environment are not available. There is no public repository of BIM
data with downloadable buildings. We can't find publicly accessible data of
building resource usage, such as how much pollution each building is causing.
As a society, shouldn't we be able to? The open-data logic to benefit the
public bizarrely stops at the building scale. This should not be the case, as
buildings are the most human scale of our environment, and so it matters the
most.&lt;/p&gt;
&lt;p&gt;Designing a building in an open-source fashion also fundamentally &lt;em&gt;changes who
you are as a designer&lt;/em&gt;. As seen in the software industry, when you create
software that is open-source, there is a level of care bestowed upon it because
you are presenting it as a gift for the public, not as a product to be sold.
This is reflected in the quality of the open-source thing that you create,
because a part of your knows that you aren't just chasing a profit target,
you're serving the public. I recall a firm called
&lt;a href="http://openingdesign.com/"&gt;OpeningDesign&lt;/a&gt;, as well as the amazing &lt;a href="https://wikihouse.cc/"&gt;WikiHouse
project&lt;/a&gt;, who I have had the privilege of working with
Yorik van Havre on FreeCAD, which designs in the public domain.  Without open
data, it is impossible to truly achieve this with truly open designs.&lt;/p&gt;
&lt;p&gt;I wait for a day when it is legally required for all developments to be done
transparently. For all BIM data to be open and available to all to investigate,
criticise, and propose new ideas.&lt;/p&gt;
&lt;p&gt;After all, it's &lt;em&gt;our world&lt;/em&gt;, so it should be &lt;em&gt;our data&lt;/em&gt;.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Free intervals sheet music</title>
        <link href="https://thinkmoult.com/free-intervals-sheet-music.html" />
        <id>https://thinkmoult.com/free-intervals-sheet-music.html</id>
        <updated>2019-03-21</updated>
        <summary>Intervals are a fundamental concept in learning music. This free downloadable sheet music helps give examples and illustrates the relationships between notes.</summary>
        <content type="html">

&lt;p&gt;Learning about intervals in music is a fundamental bit of theory for recognising patterns and structures in music pieces. I have produced a free PDF download of interval examples. These can be downloaded as a ZIP file and printed for any purpose.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The sheet music is notated on an A4 paper size&lt;/li&gt;
&lt;li&gt;Intervals start from explaining how to get the interval number.  These are
   followed by the common intervals that are encoutered in other sheet music.&lt;/li&gt;
&lt;li&gt;Extra examples demonstrate how augmented, diminished, double
augmented, and double diminished intervals work.&lt;/li&gt;
&lt;li&gt;Extra examples to explain inversions of intervals and their relationships.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A sample page is shown below:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Preview of the interval sheet music" src="https://thinkmoult.com/assets/intervals.png"&gt;&lt;/p&gt;
&lt;p&gt;The sheet has no copyright or attribution text that might
get in the way of professionalism when presenting to
students. The sheet is created using
&lt;a href="http://www.lilypond.org/"&gt;LilyPond&lt;/a&gt;, which is quite
possibly the world's best music engraving software.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://thinkmoult.com/assets/intervals.zip"&gt;Download intervals.zip&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
        </content>
    </entry>
    <entry>
        <title>Why Radiance needs a free 3D model repository</title>
        <link href="https://thinkmoult.com/radiance-free-3d-model-repository.html" />
        <id>https://thinkmoult.com/radiance-free-3d-model-repository.html</id>
        <updated>2019-03-17</updated>
        <summary>The Radiance free 3D model repository is the world's first photometrically accurate model repository, with a focus on both correctness and aesthetics. It is completely open-source and free to mirror and redistribute. You can download models as an OBJ, along with material and light definitions.</summary>
        <content type="html">

&lt;p&gt;Radiance, unlike other rendering engines, does not currently have a large
repository of free 3D models so that lighting simulationists can reuse assets in
their renders. For this reason, I have created the &lt;a href="https://radiance.thinkmoult.com/"&gt;Radiance free 3D model
repository&lt;/a&gt;, which will host model geometry
and model material definitions that are photometrically accurate and are
measured from real-life products. As far as I am aware, nothing like this
is available.&lt;/p&gt;
&lt;p&gt;You can read more about how the repository is organised and what it offers in
terms of file formats, photometric accuracy, and download methods in the
repository itself. However, in this article, I'd like to describe the underlying
reason why this repository is so important.&lt;/p&gt;
&lt;p&gt;Currently, architects who design our built environment do not have any
established workflows for accurately creating virtual prototypes of their
designs. If an architect wants to visualise their design, they commonly do so
through 2D sketches / collages, or use 3D rendering, as real-life physical
mockups are slow and expensive. However, both of these digital visualisations
are artistic impressions of the design, and often, the sketcher or the CG artist
would take quite a bit of artistic liberty. It is also unfortunately common
practice for the architect to blatantly lie in the render about what the space
will look like. In other scenarios, the visualisation would be purposely vague
or abstract, in order to not over-promise to clients about what the space will
look like, and leave it to the imagination.&lt;/p&gt;
&lt;p&gt;There is room for creative exploration and imaginative interpretation of spaces,
but I would equally argue that there is also room for an honest, scientifically
accurate simulation to see what a space would &lt;em&gt;really&lt;/em&gt; look like. Even if this
is never shown to clients, it is an invaluable tool for architects who want to
remove the rose-tinted glasses and verify that the space is actually beautiful.&lt;/p&gt;
&lt;p&gt;If this type of validated render is exposed to the client, and by extension, to
the public, then it serves as an honest representation of the aesthetic impact
the design has on the public domain. Currently, this doesn't exist. Instead, we
see buildings that glow from impossible bird-like angles or unlikely viewpoints,
treated as a spectacular blessed work of art upon the ground. In reality,
buildings are frankly a little bit drab to most people. Especially for projects
which heavily impact the public domain, it is ethically responsible to give them
a true representation of how designs will impact the environment.&lt;/p&gt;
&lt;p&gt;The tool that is capable of this scientifically validated visualisation, of
course, is Radiance. Architects may come across Radiance through daylight and
sunlight studies, sustainability analysis, or through the light engineering of
the space. However, it is less often used in the form of qualitative analysis,
as it is slow, and due to the over-simplified models and material definitions,
often produces renders that look even more fake (despite being correct) than an
artists impression of a photoreal scene.&lt;/p&gt;
&lt;p&gt;The reason for this is because lighting engineers, in their quest for accuracy,
have not had the same urgency to develop the same workflows, asset libraries,
and attention to geometric and textural detail that the artists have. These
types of things are simply not required when analysing average illuminance
levels, for instance.  However, accuracy and art are not mutually exclusive. For
instance, more detailed geometric models actually increase the accuracy of a
light simulation.  For sure, this increases the simulation time significantly,
and probably does not impact the average overall luminance and illuminance
values, but certainly does greatly impact the qualitative empathy a viewer has
with the rendered visualisation.&lt;/p&gt;
&lt;p&gt;It is also important to stress that this type of render certainly takes a lot of
time compared to a regular artistic render, and almost always will look less
"spectacular", and time is the most important factor in creating renders. The
key to making validated renders economical is similar to how CG artists make
their renders economical: they build an asset library. The difference is that a
Radiance asset library is something quite special: the materials are true. There
will be no need to tweak objects for a particular light or shot: the asset will
simply be a digital twin of the real life object.  But unfortunately, a
repository does not yet exist, which is why this one is being launched. It is
also key to keep the repository open-source, so that the resulting assets can
then be validated by the community, and recipients can ensure they are not being
lied to about the quality of the asset.&lt;/p&gt;
&lt;p&gt;The good news is that &lt;a href="https://thinkmoult.com/assets/../history-rendering-engines-modern-trends.html"&gt;rendering engines are already trending towards
photorealism&lt;/a&gt;. They
aren't quite there yet, and will take a long time to get there, but slowly they
are pulled towards reality. I envision a time in the future where clients will
choose between hiring two architectural firms: one of them can tell them
truthfully what the design will be like, and the other cannot. That will be the
stepping stone to the time where government and planning approval organisations
&lt;em&gt;expect&lt;/em&gt; a truthful representation in all development applications. After all,
it's the &lt;em&gt;right&lt;/em&gt; thing to do.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>The five fundamental facets of ethical software</title>
        <link href="https://thinkmoult.com/five-fundamental-facets-of-ethical-software.html" />
        <id>https://thinkmoult.com/five-fundamental-facets-of-ethical-software.html</id>
        <updated>2019-03-15</updated>
        <summary>Technology is increasingly trending towards proprietary forms, which have negative impacts on society. I describe the 5 fundamental ingredients to keep software honest, and prioritise people over profit.</summary>
        <content type="html">

&lt;p&gt;The computing world has changed significantly since the web matured. We now have
centralised services monopolising most of the internet traffic, several
industries still running completely proprietary software, and the internet of
things which is slowly permeating through people homes.&lt;/p&gt;
&lt;p&gt;What does this mean? For most of us who aren't familiar with the work done by
the Free Software Foundation, we are unaware of the implications of how our
digital lives have changed. We have entrusted more and more of our personal
lives into digital services, but have these digital services grown to support
us the best way they could have?&lt;/p&gt;
&lt;p&gt;Allow me to use an analogy. Imagine you are buying a house. In this parallel
world, you only have the choice of 3 house designs. As usual, a company will
build the house for you. However, they will not tell you what is in your house,
there will be some locked doors that you can't open, and when something is
broken, you have to ask them to fix it. You're also not entirely sure if the
house complies with the government fire resistance requirements, because the
government hasn't certified it. They also own the spare key, and will randomly
decide to enter your house without asking to "upgrade" unspecified aspects of
it. Every so often, you're prohibited from placing certain furniture in the
house, and occasionally they will throw away some of your furniture without
asking. In a few years, you will be asked to leave your house, and buy a new
house from the same company, otherwise all your furniture will be thrown out.
Also, there's a microphone by your bedside, and a CCTV camera in your bathroom.&lt;/p&gt;
&lt;p&gt;If this scenario sounds absolutely ridiculous to you, that's because it is.  If
you replace "house" with any other personal electronic device you own, such as
computer or phone, this is exactly what is happening with society right now.
Maybe you shouldn't bring your phone with you to the bathroom.&lt;/p&gt;
&lt;p&gt;Software wasn't always like this. Richard M. Stallman, the foremost advocator
for software freedom, first observed that with software, either you control the
software, or the software controls you. If we lose control of software, vendors
become increasingly opaque on their processes. Their priorities shift from
developing software to benefit users, to developing software to maximise
profits. When profits become the driving factor, companies no longer hesitate to
make decisions that harm society. They promote the ignorance of users, create
profiles that can be used for authoritarian means, control communication, hinder
innovation and self expression, and monopolise markets. In fewer words, Richard
remarks:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Companies tend to lose their scruples when that is profitable"&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Richard Stallman&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;We see this trend blatantly happening around us. For instance, the majority of
web traffic filters through Google who profiles your behaviour in order to
create psychological profiles to maximise advertising profits. Google realised
that providing search results that were correct were less profitable than
showing you results for things you were inclined to believe, regardless of
their factual validity. This resulted in YouTube's and Google's results
agorithm creating a positive feedback loop encourage extremist behaviour,
pushing people towards violence and binarism.&lt;/p&gt;
&lt;p&gt;To mitigate the issue of software being developed against the interests of the
public, I will describe 5 fundamental facets the allow a software to remain &lt;em&gt;in
control&lt;/em&gt; by the users, keep the software &lt;em&gt;honest&lt;/em&gt;, and by extension, prioritise
&lt;em&gt;people over profit&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;The data should be open data&lt;/h2&gt;
&lt;p&gt;All software needs to store and communicate data to one another. If the data
format is closed and proprietary, it cannot evolve to meet the needs of the
public, or be inspected by the public that it is truly correct. It also means
that you can only inspect it using a limited set of tools which are not under
your control. It is likely to be inefficient, store unwanted data, and the user
has to trust that their data is recorded correctly, with no way to validate it.&lt;/p&gt;
&lt;p&gt;Open data should have formats that have publicly available specifications that
describe their syntax, grammar, tokens, parsing, and so on. This allows anyone
to additionally adapt the data to their own needs, since the rules are so
clearly spelled out in the specification.&lt;/p&gt;
&lt;p&gt;Open data should also ideally have some form of plain text interpretation. Even
better so if that plain text is human understandable to the extent that humans
can author data themselves with a text editor without the need for software.
This allows humans to inspect the data easily, and allows a human to be critical
of the quality of data produced by software.&lt;/p&gt;
&lt;p&gt;The good news is that there open data standards for almost any industry. Where
one does not exist, it is also easy to store things in plain text, and to follow
the Unix philosophy to think about universal text streams being piped from one
to another.&lt;/p&gt;
&lt;h2&gt;The software should be open-source&lt;/h2&gt;
&lt;p&gt;Proprietary software where the only developers are part of a secret club is not
conducive to public inspection of whether or not the software is being true to
its purpose. As a result, it quickly succumbs to the profit motive and develops
features that attempt to monetise its users, often with the side effect of
privacy violations, limiting their exposure to opportunities that could improve
the world, or creating anti-social situations.&lt;/p&gt;
&lt;p&gt;As a result, software should be created by the community. That is, not only
open-source, but the core developers should be welcoming to all contributors and
unafraid of forks.&lt;/p&gt;
&lt;p&gt;These days, there are plenty of quasi-open-source projects where the source is
available, but it is held on a tight leash. The phrase "open-source" is simply
used as a marketing tool but does not represent the actual scenario. It is even
worse when proprietary tools promote a so-called "open-source" ecosystem of
modules and plugins. These projects are &lt;em&gt;liars&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The good news is that it is easy nowadays to open-source a project. Being a good
maintainer is another story, but open-sourcing things is a good start.&lt;/p&gt;
&lt;h2&gt;The deployment process should be independently verifiable&lt;/h2&gt;
&lt;p&gt;Once software is developed in an open-source manner and uses open-data formats,
it has to be deployed onto a machine. This can be simple as compiling it on a
computer, downloading a binary, or running it as a network-accessed service.
This deployment process represents an opportunity for a malicious actor to
modify the software to their own ends.&lt;/p&gt;
&lt;p&gt;Therefore, we need to check that the software we are running is true to the
open-source code that we have inspected. In some cases, you can simply compile
it yourself, and then you are sure to use the version of the software that the
codebase describes. You will first need to obtain the source code using methods
that cannot be compromised - this can be through open source and open data
protocols such as &lt;code&gt;git&lt;/code&gt;, or by verifying that a package matches a precomputed
hash, or are signed by developers. Many Linux distributions offer this feature.&lt;/p&gt;
&lt;p&gt;If you are downloading a binary, things become harder. A level of verification
can still be determined using hashing and signing, but it is less trustworthy
than the ability to compile the source yourself. Software projects that have
lengthy, complex, build procedures that discourage the public to build from
source are doing a disservice to user rights.&lt;/p&gt;
&lt;p&gt;Some software is not deployed on your machine at all. This describes most
services we access on the internet. Unless you run your own email server, it is
unlikely that you have verified that your email provider only runs the necessary
software for email processing, and doesn't run other proprietary tools or store
secret non-open data for other purposes that you are unaware of.&lt;/p&gt;
&lt;p&gt;It is technically possible to solve this problem, using crowd-distributed
deployment processes where multiple parties verify the validity of the
deployment, similar to how blockchain works. However, although technically
possible, it is a waste of resources.&lt;/p&gt;
&lt;p&gt;Other strategies we can muse upon are run-time hashes which expose build-time
procedures and dependencies, or third-party deployment inspections, but again,
these are complex.&lt;/p&gt;
&lt;p&gt;Any service which forces a non-local deployment is a form of abstracting the
control of data away from users. They should be discouraged, as the long-term
trend represents a full abstraction of data processing services and the complete
ignorance of the user to comprehend the full stack of software required to
process the data. This is already happening now, where some web developers are
unaware of the full stack of web-related software required to serve even simple
static files over the internet.&lt;/p&gt;
&lt;h2&gt;The software hosting should be decentralised&lt;/h2&gt;
&lt;p&gt;Once the software is deployed, the software host represents another opportunity
to modify the program, replace it with a lookalike, or observe the environment
and infer information for its own purposes.&lt;/p&gt;
&lt;p&gt;This is a not a problem for purely local software - a user can run and deploy an
open-source operating system and environment for it to run on. If they want to
run it on another computer, they can do the same, assuming that the software
supports that platform. For this reason, having cross-platform support is a
feature of decentralised local software.&lt;/p&gt;
&lt;p&gt;However, there are software which are networked in some way. To mitigate this, a
common protocol should be established for the software to communicate, and the
network should be decentralised. Like email, or the more recent ActivityPub
extension, this allows anybody to run it themselves, and not be cut off from a
wider network.&lt;/p&gt;
&lt;p&gt;Any centralised network represents a single opportunity for malicious activity,
and discourages the independence and freedom of individual users to grow the
network organically.&lt;/p&gt;
&lt;h2&gt;End-to-end encryption should be possible&lt;/h2&gt;
&lt;p&gt;The final facet to consider is when the software is in use. Users should have
the right to protect their behaviour with the software, especially as users
record more and more of their lives digitally.&lt;/p&gt;
&lt;p&gt;For local software, the software data does not necessarily leave the system that
it is deployed and hosted on. In this case, users should be aware of similarly
free and open-source standards for encrypting their data. These already exist,
such as using PGP encryption.&lt;/p&gt;
&lt;p&gt;Again, software that is networked creates a problem. Network communications are
often poorly designed for user privacy. The networked software should be
designed in a way that any inputs can be encrypted on the client-side that
accesses the networked service, before being decrypted on the other end, and
ensure that the message cannot be modified in the process. Software such as
XMPP's OMEMO encryption extension demonstrate how this can be done.&lt;/p&gt;
&lt;h2&gt;It's not just ethical software&lt;/h2&gt;
&lt;p&gt;It's important to note that although this article has focused on software, these
trends of increased abstraction and opaque processes apply to many industries.
If you think it is hard to build software that achieves these ideals, you are
witnessing a much more systemic problem with society. We are too keen on wanting
more - and we want more faster and easier. We do not stop and think about
whether more is necessarily better.&lt;/p&gt;
&lt;p&gt;Take a deep breath.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>How to create better IFC files with Revit</title>
        <link href="https://thinkmoult.com/how-to-create-better-ifc-files-with-revit.html" />
        <id>https://thinkmoult.com/how-to-create-better-ifc-files-with-revit.html</id>
        <updated>2019-03-12</updated>
        <summary>This is an introduction to the fundamental concepts of IFC files and explains how to improve data exports from Autodesk Revit to IFC. Out of the box, Revit IFC support is very limited, but it can be mitigated using an open-source plugin and understanding these undocumented quirks.</summary>
        <content type="html">

&lt;p&gt;IFC is the ISO standard of how BIM data should be stored. Revit is one of the two BIM programs used by almost all players in the AEC industry. Autodesk is also one of the corporate bodies behind the creation of the IFC ISO standard. It should therefore stand to reason that creating and exporting high quality IFC files out of Revit should be easy. Unfortunately, this isn't the case, and &lt;a href="https://thinkmoult.com/assets/../why-revit-is-shit.html"&gt;poor IFC support is one of Revit's biggest problems&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In this article, I will walk through some of the fundamental concepts in IFC, and explain how to capture that data with Revit, so that the quality of your BIM data improves, and the longevity of the BIM digital twin can be increased. In contrast, if you simply supply a &lt;code&gt;.rvt&lt;/code&gt; file to your clients, you are merely providing a BIM model with a shelf-life of 3 years (the lifespan of Autodesk support), and with no guarantee of interoperability or quality of the BIM data structure.&lt;/p&gt;
&lt;p&gt;To start with, I will be blunt and advise that the out-of-the-box Revit provides extremely poor IFC export and import support. For this reason, there is an &lt;a href="https://github.com/Autodesk/revit-ifc/tree/Dev"&gt;open-source IFC import and export plugin for Revit&lt;/a&gt;. Without installing this, there is little you can do with Revit. If you know how to compile it yourself, please compile the "Dev" branch, as that will give you the latest features, as it is a moving target as with most open-source things. You will need to install this to follow the rest of this article.&lt;/p&gt;
&lt;p&gt;&lt;img alt="The export dialog of the Revit open source IFC exporter" src="https://thinkmoult.com/assets/revit-opensource-ifc-import-export.png"&gt;&lt;/p&gt;
&lt;p&gt;Finally, Autodesk as produced the &lt;a href="https://www.descor.com/allegati/ifc-manual-2018-enu.pdf"&gt;Autodesk Revit IFC Manual 2018&lt;/a&gt; which helps describe the various options of this open source IFC exporter. Give it a read, as it will explain all the options in the exporter. It's a little vague on a few points, but hopefully this article will help clear things up.&lt;/p&gt;
&lt;h2&gt;Revit and IFC version support&lt;/h2&gt;
&lt;p&gt;One of the first questions people ask is what's the difference between the IFC versions that you can choose to export to.&lt;/p&gt;
&lt;p&gt;Most of the industry (at least from my experience in Australia) is still producing IFC2x3. However, IFC2X3 lacks many features of IFC4, so in an ideal world we should aim to produce IFC4 IFCs as much as possible. However, although Autodesk's marketing department might tell you otherwise, IFC4 support in Revit is currently quite hit and miss, although from watching the commits, it is slowly improving. I would recommend trying to export your project in both IFC2X3 and IFC4. If all the geometry is able to be exported in IFC4, then I would use IFC4, because there are ways to set the attributes and data. If the geometry itself cannot be exported, but it works in IFC2X3, then you have little choice but to stick with IFC2X3, as geometry representation is not one of those things you can easily control in Revit.&lt;/p&gt;
&lt;h2&gt;Fundamental IFC concepts&lt;/h2&gt;
&lt;p&gt;IFC is a bold attempt to improve the transparency and interoperability of BIM data in the industry. It does this by creating a technical specification that BIM vendors (Autodesk, Graphisoft, FreeCAD), and BIM authors (yourself) attempt to follow.&lt;/p&gt;
&lt;p&gt;This IFC specification defines different types of elements, procedures, people, and concepts found in the building industry. These concepts have different data associated with them, which should be organised in a certain way to be easily analysed and discovered. Not all concepts are physical! They can refer to people and timelines. If an element is a physical object, like walls and floors, it can have a geometric representation association with them. This allows us to see our buildings digitally in 2D or 3D. Other data, such as for quantity take-off, doesn't need to have any geometry associated with it, so a QS can work purely with raw data.&lt;/p&gt;
&lt;p&gt;It is important to have a grasp of these fundamental concepts, which can be found in &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC4/ADD2_TC1/HTML/schema/chapter-4.htm"&gt;Chapter 4, IFC fundamental concepts and assumptions&lt;/a&gt; in the &lt;a href="http://www.buildingsmart-tech.org/ifc/IFC4/Add2/html/"&gt;latest IFC4 specification&lt;/a&gt;. If you think that IFC is merely about calling some shapes walls, and other shapes floors, and hopefully opening it in one program and another, you will be surprised to find that IFC offers much more insight than that, if people used it properly, that is.&lt;/p&gt;
&lt;h2&gt;IFC project declaration in Revit&lt;/h2&gt;
&lt;p&gt;The most funamental concept is the ability to declare your project. The "project" is not a visible element in Revit, but it does have attributes associated with it. Below is a list of these attributes.&lt;/p&gt;
&lt;p&gt;Most of the values for these attributes are derived from your "Project Information" settings. When you export an IFC, Revit will automatically create one &lt;code&gt;IfcProject&lt;/code&gt;. Let's see what the attributes are, and where to go to set them correctly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;GlobalId&lt;/code&gt; - set automatically and cannot be modified via the UI. It can, however be modified via the Revit API.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OwnerHistory&lt;/code&gt; - set automatically, I won't go into detail but suffice to say it is set with garbage data and cannot be relied upon for actual ownership history&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Name&lt;/code&gt; - this is usually the "short name" or code of the project, it can be set by changing the "Project Number" attribute.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Description&lt;/code&gt; - this can be set by creating a new project parameter (shared or otherwise) called &lt;code&gt;IfcDescription&lt;/code&gt;, and making it available to the "Project Information" category. Please ensure that you group this parameter under a group named "IFC Parameters".&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ObjectType&lt;/code&gt; - this can be set by creating a new project parameter (shared or otherwise) called &lt;code&gt;IfcObjectType&lt;/code&gt; and making it available to the "Project Information" category. Please ensure that you group this parameter under a group named "IFC Parameters".&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LongName&lt;/code&gt; - this is the full project name, and can be set by changing the "Project Name" attribute.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Phase&lt;/code&gt; - the project phase is set by the "Project Status" attribute.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RepresentationContexts&lt;/code&gt; - Revit will automatically define only one representation context, which will be a 3-dimensional model, with a coordinate system and true north.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UnitsInContext&lt;/code&gt; - the units are taken from your "Project Units" settings. It is generally correct. Units can get pretty confusing in IFC with unit definitions and IFC sometimes advocating specific units in certain attributes, but this is not a Revit problem, this is an IFC problem.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you're curious where these attributes are specified, you can read the &lt;code&gt;IfcProject&lt;/code&gt; &lt;a href="http://www.buildingsmart-tech.org/ifc/IFC4/Add2/html/schema/ifckernel/lexical/ifcproject.htm"&gt;specification page&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The coordinate system of the &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt; is used to define the offset of the project coordinates from the global point of origin. This seems to always be set to &lt;code&gt;(0, 0, 0)&lt;/code&gt;, and I don't think there is a way to change that through the UI. By default, true north is Y, east is X, and up / elevation is Z. Please note that the &lt;code&gt;IfcProject&lt;/code&gt; does &lt;em&gt;not&lt;/em&gt; define the site location.&lt;/p&gt;
&lt;p&gt;It is not currently possible to have another &lt;code&gt;IfcGeometricRepresentationContext&lt;/code&gt; to represent plan views out of IFC. Yes, IFC can support native plan views, not just derived plan views from IFC 3D representations, but Autodesk doesn't allow you to unfortunately.&lt;/p&gt;
&lt;h2&gt;Project library&lt;/h2&gt;
&lt;p&gt;IFC files don't necessarily only contain a BIM project. Just as you have Revit families, and can somewhat propagate shared parameters, IFC allows you to create project libraries that define either types of objects or groups of properties (known as property sets in IFC lingo). Technically, you could create your families in IFC format, and it can have parametric data stored within it, and other programs like FreeCAD or GeometryGym use this functionality.&lt;/p&gt;
&lt;p&gt;This is not possible within Revit.&lt;/p&gt;
&lt;h2&gt;IFC object definitions and object type definitions in Revit&lt;/h2&gt;
&lt;p&gt;There are many objects that are defined in IFC. In Revit, you are used to categories such as walls, floors, ceilings, and columns. Similarly, in IFC, there is &lt;code&gt;IfcWall&lt;/code&gt;, &lt;code&gt;IfcSlab&lt;/code&gt;, &lt;code&gt;IfcCovering&lt;/code&gt;, and &lt;code&gt;IfcColumn&lt;/code&gt;. IFC has more object "classes" than what is defined in Revit, and goes into more detail and across more disciplines. Therefore, when you export to an IFC, you will have to "map" your Revit categories to IFC object "classes".&lt;/p&gt;
&lt;p&gt;All object occurrences are defined by a mapping table supplied by Autodesk that maps Revit family categories to IFC objects. You can see this by going to &lt;code&gt;File -&amp;gt; Export -&amp;gt; Options -&amp;gt; IFC Options&lt;/code&gt;. IFC objects are defined as subclasses of &lt;code&gt;IfcObject&lt;/code&gt;, whereby you will most commonly be dealing with subclasses of &lt;code&gt;IfcProduct&lt;/code&gt;, such as walls, beams, etc.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Autodesk Revit IFC object mapping configuration dialog" src="https://thinkmoult.com/assets/revit-ifc-object-mapping.png"&gt;&lt;/p&gt;
&lt;p&gt;You will notice that the mapping table has two columns: one for IFC Class Name and one for IFC Type. This is, however, extremely misleading because the IFC Type field does &lt;em&gt;not&lt;/em&gt; refer to the IFC object type. For example, an &lt;code&gt;IfcBeam&lt;/code&gt; has an associated &lt;code&gt;IfcBeamType&lt;/code&gt;, which serves a purpose similar to a parent class to which attributes / property sets / geometric representations can be inherited from (and overriden in the child).&lt;/p&gt;
&lt;p&gt;Instead, the IFC Type field actually refers to &lt;code&gt;PredefinedType&lt;/code&gt; attribute that exists for both IFC objects and IFC object types. These are basically more detailed subcategories of the semantic IFC class name. For example, an &lt;code&gt;IfcBeam&lt;/code&gt; has a &lt;code&gt;PredefinedType&lt;/code&gt; attribute which may contain an enum of &lt;code&gt;IfcBeamTypeEnum&lt;/code&gt;, where you can specify your beam to be a &lt;code&gt;BEAM&lt;/code&gt;, &lt;code&gt;JOIST&lt;/code&gt;, &lt;code&gt;HOLLOWCORE&lt;/code&gt;, &lt;code&gt;LINTEL&lt;/code&gt;, and so on. So the IFC Type field is actually referring to the enum value, which must be defined in all uppercase. In the screenshot above, &lt;code&gt;CONDUITSEGMENT&lt;/code&gt; is an enum value of &lt;code&gt;IfcCableCarrierSegmentTypeEnum&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There is a fundamental problem in Revit whereby the semantic object you are modeling determines what modeling capabilities you have. If you want to model a roof, you don't necessarily get the same tools as modeling a floor, even though geometrically they can be very similar. This leads to people misusing objects for inappropriate IFC types. Thankfully, there is some way to mitigate this by ensuring that it is exported correctly into IFC, regardless of the Revit category being used.&lt;/p&gt;
&lt;p&gt;If you add a project parameter called &lt;code&gt;IfcExportAs&lt;/code&gt; (type or instance, both works) as a text parameter and place it in the &lt;code&gt;IFC Parameters&lt;/code&gt; group, then you can override the IFC class and predefined type on an instance-by-instance or type-by-type basis. For instance, if you create a new generic in-place model, and type in &lt;code&gt;IfcCovering&lt;/code&gt;, and export it into an IFC, it will turn into an &lt;code&gt;IfcCovering&lt;/code&gt; object. If you alternatively type in &lt;code&gt;IfcCovering.SKIRTINGBOARD&lt;/code&gt;, you will export it as an &lt;code&gt;IfcCovering&lt;/code&gt; object, and its &lt;code&gt;PredefinedType&lt;/code&gt; attribute will be set to &lt;code&gt;SKIRTINGBOARD&lt;/code&gt;. This pattern of &lt;code&gt;IfcClass.ENUMVALUEINUPPERCASE&lt;/code&gt; generally works for all classes and types. This is a great way of adding semantics to generic models.&lt;/p&gt;
&lt;p&gt;If you are only interested in setting the &lt;code&gt;PredefinedType&lt;/code&gt; but keeping the IFC Class, you can add a project parameter called &lt;code&gt;IfcExportType&lt;/code&gt;, and fill it simply with &lt;code&gt;SKIRTINGBOARD&lt;/code&gt;. Yes, this is a double up in functionality with the &lt;code&gt;IfcExportAs&lt;/code&gt; parameter, but I'm mentioning it for completeness.&lt;/p&gt;
&lt;p&gt;However, keep in mind that this trick only works with user-created families and in-place models. It does &lt;em&gt;not&lt;/em&gt; work on system families. If somebody decides to model a fence using the railing tool or an office partition with a curtain wall, you can't fix it.&lt;/p&gt;
&lt;h2&gt;IFC object attributes in Revit&lt;/h2&gt;
&lt;p&gt;Each IFC object subclass has a series of attributes that are composed of the attributes of that particular class, as well as the attributes inherited by any parent classes. In the latest IFC4Add2 specification, it is now very easy to see this as each IFC object page has a section called "Attribute Inheritance", which lists it all out for you.&lt;/p&gt;
&lt;p&gt;For instance, an &lt;code&gt;IfcWall&lt;/code&gt; inherits &lt;code&gt;GlobalId&lt;/code&gt;, &lt;code&gt;OwnerHistory&lt;/code&gt;, &lt;code&gt;Name&lt;/code&gt;, and &lt;code&gt;Description&lt;/code&gt; from its parent &lt;code&gt;IfcRoot&lt;/code&gt;. You will notice that this is the same as &lt;code&gt;IfcProject&lt;/code&gt; above. This is because both &lt;code&gt;IfcWall&lt;/code&gt; and &lt;code&gt;IfcProject&lt;/code&gt; inherit from &lt;code&gt;IfcRoot&lt;/code&gt;. Just like &lt;code&gt;IfcProject&lt;/code&gt;, the &lt;code&gt;GlobalId&lt;/code&gt; and &lt;code&gt;OwnerHistory&lt;/code&gt; attributes are special and behave as described above. However, just like in &lt;code&gt;IfcProject&lt;/code&gt; the &lt;code&gt;Name&lt;/code&gt; field is special, the &lt;code&gt;Name&lt;/code&gt; field of an &lt;code&gt;IfcWall&lt;/code&gt; is also special (this applies to most &lt;code&gt;IfcObject&lt;/code&gt; children). By default, it will be named after the family name, followed by the family type name, followed by the family type "tag", which is an autogenerated numerical ID. These 3 values are concatenated together with the ":" symbol as a separator. If it is an in-place family, it will use the in-place model name twice as the first two fields.&lt;/p&gt;
&lt;p&gt;If you want a much more sensible name, you can set its &lt;code&gt;Name&lt;/code&gt; value manually. Just create a parameter called &lt;code&gt;IfcName&lt;/code&gt; and add to to the &lt;code&gt;IFC Parameters&lt;/code&gt; group. This is the same technique used to set the &lt;code&gt;Description&lt;/code&gt; attribute.&lt;/p&gt;
&lt;p&gt;This pattern of adding a parameter named after the attribute and prefixed with &lt;code&gt;Ifc&lt;/code&gt; is common to all attributes. For instance, an &lt;code&gt;IfcWall&lt;/code&gt; also has an attribute called &lt;code&gt;Tag&lt;/code&gt; (which is ambiguous, but we'll complain about that later). You can set the value of &lt;code&gt;Tag&lt;/code&gt; by creating a parameter called &lt;code&gt;IfcTag&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;IFC object types in Revit&lt;/h2&gt;
&lt;p&gt;As opposed to &lt;code&gt;PredefinedType&lt;/code&gt;, there is the true concept of object types in IFC. Any &lt;code&gt;IfcObject&lt;/code&gt; can have a type definition relationship (&lt;code&gt;IfcRelDefinesByType&lt;/code&gt;, or inverse &lt;code&gt;IsTypedBy&lt;/code&gt;) to an &lt;code&gt;IfcTypeObject&lt;/code&gt;. This corresponds roughly (but not exactly) to the selected type of the Revit family of that object.&lt;/p&gt;
&lt;p&gt;For instance, if you create a new wall in Revit of a wall family "Basic Wall", and choose the type "Wall 1", then your &lt;code&gt;IfcWall&lt;/code&gt; will by &lt;code&gt;isTypedBy&lt;/code&gt; an &lt;code&gt;IfcWallType&lt;/code&gt; with the name &lt;code&gt;Wall 1&lt;/code&gt;. In IFC nomenclature, this is the proper place you should store the human referrable name. For instance, walls are often given human codes that correspond to a construction type, such as BLK01, or CON03, or PTN05. In Revit, although your company might have a standard, it is ambiguous whether it is stored as a type name, type mark, mark, keynote, or something else entirely. In IFC, the proper place to store it is in the &lt;code&gt;IfcTypeObject&lt;/code&gt;'s &lt;code&gt;Name&lt;/code&gt; attribute. Given the default mapping, this must mean that you need to name your Revit family type name's after your construction type if you want proper IFC exports.&lt;/p&gt;
&lt;p&gt;However, it is also possible to override the &lt;code&gt;Name&lt;/code&gt; attribute using the trick of creating an &lt;code&gt;IfcName&lt;/code&gt; parameter in the &lt;code&gt;IFC Parameters&lt;/code&gt; group, but this time setting it as a type based parameter instead of an instance based parameter. Now you can set it to whatever you want.&lt;/p&gt;
&lt;p&gt;This creates a little catch: Revit doesn't usually allow two parameters with the same name, one as a type-based, and one as an instance-based parameter. This limits you to either name your types properly, or name your elements properly, but not both. One workaround, which may be considered bad Revit practice, is to have one as a project parameter (say, your instance-based one for convention) and one as a shared parameter (say, your type-based one). This allows Revit to have two parameters that are named the same. As long as you don't have any scripts which use the name as the identifier, you'll be OK with this approach, but it can be confusing.&lt;/p&gt;
&lt;p&gt;This issue also occurs with the &lt;code&gt;Description&lt;/code&gt; attribute. It also occurs with &lt;em&gt;any&lt;/em&gt; attribute that shares a name between objects and object types. This includes property sets - you can set property set parameters to be type based to assign that property set attribute to the object type - but you will run into this limitation where you have to choose either instance or type.&lt;/p&gt;
&lt;p&gt;You will probably notice at this stage that IFC type objects created by Revit have their tag filled out automatically with a generated numerical ID. It's probably some internal ID which you can query with the API, though I haven't tested this. You can override it just like any other attribute, with no known ill effect.&lt;/p&gt;
&lt;h2&gt;Setting IFC object property sets in Revit&lt;/h2&gt;
&lt;p&gt;Property sets are basically groups of parameters which can be further set on object and object types. In IFC, each object or type has a list of related property sets which apply to it. Some of these are specific to that class of IFC object, and some apply to many objects.&lt;/p&gt;
&lt;p&gt;You can export IFC property set data by checking these two boxes in the IFC setup settings.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Revit IFC property set export settings" src="https://thinkmoult.com/assets/revit-ifc-property-sets.png"&gt;&lt;/p&gt;
&lt;p&gt;It is not compulsory to fill this property set data in. In contrast, Revit has properties which always show even if you have no intention of filling them in, and the absence of information may sometimes be misinterpreted as intentional data (such as the default value of a boolean checkbox). This is known as the NULL vs empty problem in Revit, and can mislead BIM users. In IFC, you do not need to include a property unless you want to fill it with information.&lt;/p&gt;
&lt;p&gt;For instance, an &lt;code&gt;IfcWall&lt;/code&gt; can have the &lt;a href="http://www.buildingsmart-tech.org/ifc/IFC4/final/html/schema/ifcsharedbldgelements/pset/pset_wallcommon.htm"&gt;&lt;code&gt;Pset_WallCommon&lt;/code&gt;&lt;/a&gt; property set applied to it. This property set has attributes such as &lt;code&gt;AcousticRating&lt;/code&gt;, &lt;code&gt;FireRating&lt;/code&gt;, &lt;code&gt;ThermalTransmittance&lt;/code&gt;, &lt;code&gt;LoadBearing&lt;/code&gt; and so on. Although there is room for improvement, there is generally a sensible set of attributes defined in IFC.&lt;/p&gt;
&lt;p&gt;In addition, if your &lt;code&gt;IfcWall&lt;/code&gt; is concrete, you can use the &lt;code&gt;Pset_ConcreteElementGeneral&lt;/code&gt; and describe attributes such as &lt;code&gt;ConstructionMethod&lt;/code&gt; (In-Situ / Precast), &lt;code&gt;StrengthClass&lt;/code&gt;, and &lt;code&gt;ReinforcementVolumeRatio&lt;/code&gt;, among others. If your wall isn't concrete, you simply exclude this property set.&lt;/p&gt;
&lt;p&gt;If you have additional details specific to your project, then you can always create your own property sets and create your own attributes. We'll see how to do this soon. Ideally, you should create an &lt;code&gt;IfcProjectLibrary&lt;/code&gt; so that people know what to expect in your project, but as mentioned above, it is not possible to create project libraries in Revit.&lt;/p&gt;
&lt;p&gt;Let's say we wanted to set the &lt;code&gt;FireRating&lt;/code&gt; value of our &lt;code&gt;IfcWall&lt;/code&gt; in the &lt;code&gt;Pset_WallCommon&lt;/code&gt; property set. You can do this by creating a new project parameter (probably type based, this time) called &lt;code&gt;FireRating&lt;/code&gt; and placing it in the &lt;code&gt;IFC Parameters&lt;/code&gt; parameter group and filling it out with whatever you want. In Australia, a value might be something like &lt;code&gt;120/120/120&lt;/code&gt; for a 2-hour fire rated wall.&lt;/p&gt;
&lt;p&gt;I chose the &lt;code&gt;FireRating&lt;/code&gt; attribute because Revit actually already has a &lt;code&gt;Fire Rating&lt;/code&gt; attribute (notice the space) in its &lt;code&gt;Identity Data&lt;/code&gt; parameter group out of the box. Because this exists, Autodesk has hard-coded this value to set the IFC &lt;code&gt;FireRating&lt;/code&gt; attribute by default. However, if both the &lt;code&gt;Fire Rating&lt;/code&gt; parameter and the IFC &lt;code&gt;FireRating&lt;/code&gt; parameter exists in your file, the latter will take priority, including empty values (see the NULL vs empty problem described above).&lt;/p&gt;
&lt;p&gt;For properties such as &lt;code&gt;AcousticRating&lt;/code&gt; where there is no OOTB Revit equivalent, you will always need to add your own project parameter.&lt;/p&gt;
&lt;p&gt;Notice that these project parameters are &lt;em&gt;not&lt;/em&gt; suffixed with &lt;code&gt;Ifc&lt;/code&gt; and do not mention which property set it is part of. That is because by default Revit only deals with "common" property sets, like &lt;code&gt;Pset_WallCommon&lt;/code&gt;. However, it is not clear what is "common" and what isn't. For instance, you will find that if you tried to define &lt;code&gt;StrengthClass&lt;/code&gt; from  &lt;code&gt;Pset_ConcreteElementGeneral&lt;/code&gt; it works, however if you tried to define &lt;code&gt;EutrophicationPerUnit&lt;/code&gt; from &lt;code&gt;Pset_EnvironmentalImpactIndicators&lt;/code&gt;, it won't work. You will need to trial your required data on a case by case basis.&lt;/p&gt;
&lt;p&gt;What if you wanted to set your own property set, or wanted to overcome an issue where Revit doesn't support the property like the &lt;code&gt;EutrophicationPerUnit&lt;/code&gt; example above? This can be done by setting values in the &lt;code&gt;DefaultUserDefinedParameterSets.txt&lt;/code&gt; file that the exporter comes with. Here is an example of setting a custom &lt;code&gt;FooBar&lt;/code&gt; property in &lt;code&gt;My_Own_Property_Set&lt;/code&gt; for &lt;code&gt;IfcWall&lt;/code&gt; instances, as well as the &lt;code&gt;ClimateChangePerUnit&lt;/code&gt; for &lt;code&gt;Pset_EnvironmentalImpactValues&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#
# User Defined PropertySet Definition File
#
# Format:
#    PropertySet:   &amp;lt;Pset Name&amp;gt; I[nstance]/T[ype]   &amp;lt;element list separated by ','&amp;gt;
#   &amp;lt;Property Name 1&amp;gt;   &amp;lt;Data type&amp;gt; &amp;lt;[opt] Revit parameter name, if different from IFC&amp;gt;
#   &amp;lt;Property Name 2&amp;gt;   &amp;lt;Data type&amp;gt; &amp;lt;[opt] Revit parameter name, if different from IFC&amp;gt;
#   ...
#
# Data types supported: Area, Boolean, ClassificationReference, ColorTemperature, Count, Currency, 
#   ElectricalCurrent, ElectricalEfficacy, ElectricalVoltage, Force, Frequency, Identifier, 
#   Illuminance, Integer, Label, Length, Logical, LuminousFlux, LuminousIntensity, 
#   NormalisedRatio, PlaneAngle, PositiveLength, PositivePlaneAngle, PositiveRatio, Power, 
#   Pressure, Ratio, Real, Text, ThermalTransmittance, ThermodynamicTemperature, Volume, 
#   VolumetricFlowRate
# 
PropertySet:    My_Own_Property_Set I   IfcWall
    FooBar  Text

PropertySet:    Pset_EnvironmentalImpactValues  I   IfcWall
    ClimateChangePerUnit    Real
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once this file has been updated, the exporter will recognise your properties and place them in property sets.&lt;/p&gt;
&lt;p&gt;There are a few caveats. For instance, if you wanted to record the &lt;code&gt;TotalPrimaryEnergyConsumptionPerUnit&lt;/code&gt;, you will notice that its value is an &lt;code&gt;IfcEnergyMeasure&lt;/code&gt;. This is not one of the supported data types in the mapping file. If you check the &lt;a href="http://www.buildingsmart-tech.org/ifc/IFC4/final/html/schema/ifcmeasureresource/lexical/ifcenergymeasure.htm"&gt;data type definition&lt;/a&gt;, you will see that it is fundamentally a &lt;code&gt;REAL&lt;/code&gt; value. Therefore, although it isn't ideal, you can record it as a &lt;code&gt;Real&lt;/code&gt; type in the mapping text file.&lt;/p&gt;
&lt;p&gt;You might also notice that if you try to record the &lt;code&gt;WaterConsumptionPerUnit&lt;/code&gt;, it will successfully record it as an &lt;code&gt;IfcVolumeMeasure&lt;/code&gt; with no mapping required. But, what unit is it in? The IFC spec states that it is &lt;a href="http://www.buildingsmart-tech.org/ifc/IFC4/final/html/schema/ifcmeasureresource/lexical/ifcvolumemeasure.htm"&gt;usually measured in m3&lt;/a&gt;, but what about our unit definitions at the beginning of the export? Revit completely ignores your unit settings and will think your value is in cubic metres. But, Revit also records a conversion factor in the IFC file to convert between cubic metres and cubic feet. So depending on your viewer, it might apply the conversion factor to show it to you in cubic feet if you then open your file elsewhere. Sound confusing? That's because it is.&lt;/p&gt;
&lt;h2&gt;IFC type property sets in Revit&lt;/h2&gt;
&lt;p&gt;Property sets for types are very similar to property sets for objects, except that is applies to types, not instances, and also is defined differently in the STEP syntax (an attribute as opposed to a relationship). Go fish.&lt;/p&gt;
&lt;p&gt;Just change your parameters to be type based instead of instance based and it will create a property set for the object type rather than the object. However, you will run into the unique parameter name issue I describe above.&lt;/p&gt;
&lt;h2&gt;IFC performance property sets&lt;/h2&gt;
&lt;p&gt;IFC has a great concept where you can document the actual performance of a built object over time - e.g. machine-measured data from building automation systems and human specified data such as task and resource usage. This can be predicted, such as from a simulation, or it can be actual recordings, to verify the performance of a building. This can be specified at different life-cycle phases of the building.&lt;/p&gt;
&lt;p&gt;This can't be done in Revit to my knowledge.&lt;/p&gt;
&lt;p&gt;Next.&lt;/p&gt;
&lt;h2&gt;Quantity surveying and quantity take-off in Revit&lt;/h2&gt;
&lt;p&gt;IFC has the concept of a special set of properties which can be set for each object to define quantities. This can be quantities such as counts, lengths, areas, and volumes, and are designed to be useful for quantity surveyors to easily quantify different elements from the BIM model. They are similar to property sets, but are treated a little specially under-the-hood.&lt;/p&gt;
&lt;p&gt;The geometric representation therefore does not need to necessarily be 100% accurate, or even exist at all, as long as these values are filled in correctly. You may have noticed that Revit does actually understand quantities, so let's see how they translate into IFC.&lt;/p&gt;
&lt;p&gt;Pop quiz time: if you draw a wall length of 18ft, joined to another wall at one end, with a void in it (either via profile, void cut, or hosted door / window / element), what length should be recorded for quantity take-off purposes in IFC, and what length value will you see when you export it out of Revit?&lt;/p&gt;
&lt;p&gt;&lt;img alt="An example scenario of a wall" src="https://thinkmoult.com/assets/revit-qto-wall.png"&gt;&lt;/p&gt;
&lt;p&gt;The answer is that your IFC file will contain absolutely nothing at all. By default, Revit will not export any quantity values into IFC. This means your model is useless if a QS wants to use the IFC file to do quantity take-off (odds are, they aren't doing it this way anyway, but ... we're talking about an ideal future here).&lt;/p&gt;
&lt;p&gt;Let's play fair this time. Let's say you click the checkbox in the export properties that isn't on by default that says "export base quantities". Now, what value will you expect? 18ft? Less? Will it take into account that the wall profile starts and stops?&lt;/p&gt;
&lt;p&gt;The answer is 18.33333ft. Or something else, depending on how the wall decided to join to the other wall. No, it won't consider the gaping hole. Does this have any correlation with the greyed out "Dimensions" parameter group in your Revit properties? Nope.&lt;/p&gt;
&lt;p&gt;What about areas and volumes? Well, Revit will record a value called &lt;code&gt;NetSideArea&lt;/code&gt; and &lt;code&gt;NetSideVolume&lt;/code&gt; which is meant to be the full volume minus any penetrations or holes. Does it actually consider the penetrations when recording these values? Nope. In fact, it is misnamed. It should instead be recorded as &lt;code&gt;GrossSideArea&lt;/code&gt; and &lt;code&gt;GrossVolume&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;It's also worth mentioning that &lt;code&gt;NetSideVolume&lt;/code&gt; is not actually a valid IFC quantity name. The real name is &lt;code&gt;NetVolume&lt;/code&gt;, not &lt;code&gt;NetSideVolume&lt;/code&gt;. Revit seems to have gotten the quantity names all mixed up.&lt;/p&gt;
&lt;p&gt;What happens if you export both Revit properties and quantity base properties? You'll get &lt;em&gt;multiple&lt;/em&gt; quantity readouts depending on where they look, and both will give different values, maybe in the right place, maybe not, and maybe with the right name, maybe not.&lt;/p&gt;
&lt;p&gt;Can you override any of these things to fix it manually? No.&lt;/p&gt;
&lt;p&gt;The moral of the story is that quantities are currently hopelessly broken in Revit and if your QS trusts it, get a new QS. In contrast, the open-source BIM tool &lt;a href="http://yorik.uncreated.net/guestblog.php?2019=9"&gt;FreeCAD has an IFC quantities auditor&lt;/a&gt; - Revit should learn a thing or two from FreeCAD.&lt;/p&gt;
&lt;h2&gt;Next steps to creating better IFC files&lt;/h2&gt;
&lt;p&gt;This post covers the basics of IFC, and doesn't cover many other concepts such as relationships, associations, classifications, parametric data, and composition ... and not to mention we haven't even talked about geometry! However, I believe it should give a relatively good introduction to the current capabilities of Revit an OpenBIM, which is to say, not much, but at least it's something. At the very least, you'll be able to neaten up some of your parameter storage and improve some data export.&lt;/p&gt;
&lt;p&gt;In the future, should time permit, I will cover more IFC concepts in another article.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>A comparison between Radiance and other rendering engines</title>
        <link href="https://thinkmoult.com/a-comparison-between-radiance-and-other-rendering-engines.html" />
        <id>https://thinkmoult.com/a-comparison-between-radiance-and-other-rendering-engines.html</id>
        <updated>2019-03-06</updated>
        <summary>This posts compares Radiance with modern rendering engines, such as Renderman and Autodesk Insight. Radiance is seen as the gold standard for light simulation, but more modern engines are becoming more physically based and claim photorealistic results at a fraction of the time. Why should we use one over the other?</summary>
        <content type="html">

&lt;p&gt;Radiance, first released in 1985, is one of the oldest rendering engines in use
today. It distinguishes itself by its ability to produce scientifically
validated lighting simulations, whereas other rendering engines merely give the
illusion of the photoreal, but there is no guarantee to its accuracy.&lt;/p&gt;
&lt;p&gt;You have probably heard all this before. But it is also clear that other
rendering engines, such as Renderman, Cycles, V-Ray, Maxwell, Luxrender (the
list goes on) have changed drastically in recent times. They have shifted from
being "biased" rendering engines, to "unbiased" rendering engines, and we hear
terms like physically based rendering. You can create a sun and put your time of
day in your rendering program, and sometimes even see a falsecolour
representation of the luminance, or perhaps illuminance, in your rendering
engine. You can load in &lt;code&gt;.ies&lt;/code&gt; files when you create lights, and specify camera
options like exposure and white balance.&lt;/p&gt;
&lt;p&gt;All of these trends suggest that Radiance and other engines are not too
dissimilar. After all, they all do ray-tracing, they all solve the global
illumination problem, and some of their attributes seem to be physical units, or
have some sort of conversion factor. Nowadays, we also have tools like Sefaira
and Autodesk Insight 360, the former which claims to use Radiance, and the
latter which benchmarks with Radiance and promises accurate simulations at a
fraction of the time. How do these compare? What's the difference?&lt;/p&gt;
&lt;p&gt;These are all questions I wondered, and so I asked the folks who created
Radiance, who have spoken to people who develop other engines. I hope to
summarise and mirror the responses here in this article so that others who
wondered as I did can get a clearer answer. Many of the words are from others,
and I encourage those who read this to read the original thread.&lt;/p&gt;
&lt;h2&gt;Radiance is validated, others are not&lt;/h2&gt;
&lt;p&gt;In the words of Lars Grobe, who first replied to my question in 2018:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I think the main difference is - that the difference is not known. In the Radiance universe, a lot of work is spent on testing the validity of the models and methods. This allows professionals to rely on the software, as long as they are within the boundaries of the validations. There is a lot of other software capable to solve the global illumination, but few people will rely on it for quantitative studies before they have been validated.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Lars Grobe, Radiance community&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Or, as more simply summarised: there is a difference between a photoreal image
and a photometrically correct image. Radiance does not merely produce an image,
it produces numerical output which can be validated. If your rendering engine
is not rigorously validated, there is little guarantee of correctness.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It's a great question, and I think Lars and Germ&#225;n summarized the differences pretty well. The bottom line is that you can take almost any renderer and add the needed features and capabilities to make it physically accurate, but there is little economic motivation to do so. The main, important difference between Radiance and other tools is the dedication of this community to keeping the focus on accuracy every step of the way.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Greg Ward, creator of Radiance&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Greg is correct in that it is technically feasible to take any other renderer
and make it physically accurate. I recall attempting to do such a test with
Pixar's Renderman engine in 2017. Their documentation hints at the ability to
map their parameters which are either arbitrary or use E.V. as a unit back to
real life values, and support for BSDF material definitions via a custom plugin.
I wasn't able to progress particularly far, simply because Renderman is not
built for this purpose. One of the Renderman documenters explain:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Our light transport and materials are based on physical properties but in the end, it's not physical. We also render in RGB values, not spectral. It might predict what such a thing would look like in the real world, but there's no guarantee it would be that way if manufactured. I only really know of a couple renderers that promise real-world or near real-world material and light responses based on actual lights and measured substances.&lt;/p&gt;
&lt;p&gt;You can definitely achieve realistic and plausible images with RenderMan, and the fact we're not tied to certain aspects of reality is our strength when it comes to art directed and beautiful imagery. We pride ourselves on being able to make the unreal look real. So this will be an adventure into a realm we don't always anticipate.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;remydrh, Pixar Animation Studios&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;This argument is the same for most artistic renderers, such as Blender's
Cycles, Mitsuba, Luxrender, and so on. It is especially so for game-engine
style renderers such as Eevee, Unreal Engine, and Enscape. But if Renderman is
for artists, what about engines that actually do market themselves as able to
perform accurate light simulation? &lt;/p&gt;
&lt;h2&gt;The example of LightScape as a proprietary renderer&lt;/h2&gt;
&lt;p&gt;An older example is that of LightScape. LightScape is one of many proprietary
engines that marketed its ability to perform accurate results with the usual
marketing tropes: less complexity, prettier pictures, faster results. This speaks to a deeper, more systemic problem with the architecture industry, but let's focus on rendering. Greg Ward
gives a recount:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The most tragic trajectory was the one followed by LightScape, which was initially intended as a head-to-head competitor of Radiance, and was quite good at it, taking more of a radiosity approach with some ray-tracing add-ons. This was eventually bought by Autodesk, and stayed true to its purpose for maybe 5 years before things like photometric files lost support, followed by numeric output, followed by every useful feature for lighting simulation. (I can't say for sure, but I bet the renderings got nicer-looking in the same period.) The point is, although there is a small community of people who are keen on accurate results out of their renderer, the money is in good-looking output.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Greg Ward, creator of Radiance&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Rob Guglielmetti expands on this story with more detail.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Greg's account of the demise of Lightscape is even more generous that what actually happened. When Autodesk bought Lightscape from Discreet Logic (the original purchasers of Lightscape from the founders), it was immediately absorbed into their "3DStudio Viz" product, aimed at architects wanting to make nice pictures while being able to say their images are "correct", "accurate", etc. Well, the first beta of Viz included Lightscape's renderer, but the render-as-falsecolor option was unceremoniously removed.  This was the first thing I noticed, since I actually used Lightscape as an illumination engineering tool. I (and others on the beta test team) brought this up, and the falsecolor option was added by the next release candidate.  This one provided falsecolor images, but &lt;em&gt;with no scale legend&lt;/em&gt;. Useless.  For me, the writing was on the wall, even before version 1.0 of 3DS Viz with "Lightscape Inside" ever saw the light of day. I think Lightscape's awesome radiosity renderer lasted one year in the Autodesk Death Star.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rob Guglielmetti, Radiance community&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;It's important to note that there is an older proprietary engine known as AGi32
which seems to be the exception and has stayed true to its purpose. It is closed
source, so inpsection of the simulation process may not be as transparent as
Radiance, but it is worthwhile mentioning nonetheless.&lt;/p&gt;
&lt;h2&gt;Radiance maintains validity, whereas the is no guarantees in others&lt;/h2&gt;
&lt;p&gt;What about a more modern example, such as 3DS Max's Design render? 3DS Max's
rendering engine is the backbone for Autodesk's cloud rendering product
(another attempt since LightScape), which boasts the ability to be used for
lighting simulation, and is what is behind products like Insight 360 today.&lt;/p&gt;
&lt;p&gt;Greg Ward points to a &lt;a href="http://www.ibpsa.org/proceedings/BS2009/BS09_1514_1521.pdf"&gt;study comparing 3DS Max Design and
Radiance&lt;/a&gt; (2009)
which shows that 3DS Max is certainly capable of simulating a simple case of
light through an open window. It performs the simulation at a fraction of the
time, with the caveat that it is tricky to understand how to set materials and
hard to interpret the output. However, if one does figure out how to set
materials and to parse the output reliably, it is certainly possible to use
engines like 3DS Max.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You might read this report and decide, "Hey, I'll go with the big commercial software, since it probably has a smoother workflow," and you could be right.  Except, the next release comes out and the features you were relying on are no longer supported, or just don't work as they used to. This has happened many, many times over the past 30 years or so that I've been paying attention.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Greg Ward, creator of Radiance&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Tools like 3DS Max do not follow the same rigour in validation of their
engine. Over time, changes are made that deviate from validated
algorithms. These changes are not documented or communicated to users.
Parameters change, some are exposed, and others are hidden, again with little
prior notice or explanation to users. In lieu of validation against a controlled
physical environment, these engines sometimes only consider smoke tests against a similar
scene in Radiance as a "gold standard". This causes a decrease in accuracy over
time, and a lack of trust in the software that results can be meaningfully
replicated.&lt;/p&gt;
&lt;p&gt;This is proved in &lt;a href="https://www.researchgate.net/publication/282316986_The_impact_of_the_software's_choice_on_dynamic_daylight_simulations'_results_A_comparison_between_Daysim_and_3ds_Max_DesignR"&gt;a follow-up study comparing 3DS Max Design and
Radiance&lt;/a&gt;
(2015) which showed that 3DS Max only gave comparable results in one scenario,
but found more cases where 3DS Max was less accurate. If you truly are
interested in correct output, faith should not be placed in less rigorously
tested, undocumented engines. &lt;/p&gt;
&lt;p&gt;&lt;a href="https://blogs.autodesk.com/insight/daylighting-as-a-service-raas-illuminance-radiance/"&gt;Autodesk's initial claims about its cloud rendering
system&lt;/a&gt;
was released in 2013, and it is hard to find any more Autodesk technical breakdowns of the engine
since then. When these rendering engines other than Radiance change over time,
introducing new "features" (some documented, some not) to each release, it means that an
image rendered today is not the same as an image rendered in the future. As
simulationists, we have to ask why there is a change? Are we able to rerun and
revalidate our results with the changes? Are we using the appropriate tools and
documentation that let us interrogate our results? Is the change, actually,
correct?&lt;/p&gt;
&lt;h2&gt;Frontends to Radiance&lt;/h2&gt;
&lt;p&gt;Frontends to Radiance such as Honeybee, Ladybug, or Safaira do not share the
same difficulties as fully proprietary solutions. However, it is important to
note that with any model, it is an opportunity for a simulationist to create
error either in the form of garbage input, or garbage parameters.&lt;/p&gt;
&lt;p&gt;As frontends tend to influence the input and parameters (sometimes through the
simplification of inputs, or through the presets of parameters), it is important
to ask how much we value the correctness of the simulation. In some frontends,
such as Sefaira, the simulation parameters used are a secret. In this case, we
have to place a full trust in the Sefaira developers that the presets do not
sacrifice the correctness of the simulation.&lt;/p&gt;
&lt;h2&gt;Radiance has pioneered physically based rendering&lt;/h2&gt;
&lt;p&gt;With the trend of modern day engines slowly becoming more physically based, it
is useful to reflect where these things came from. I remember how surprised I
was to find that it was Radiance that had &lt;a href="http://radsite.lbl.gov/radiance//digests_html/v2n4.html"&gt;invented the concept of a normal
map&lt;/a&gt; back in 1992.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TEXDATA - Using the texdata type for bump mapping Date: Wed, 21 Oct 1992
13:19:48 +0800 From: Simon Crone
Apparently-To: GJWard@lbl.gov&lt;/p&gt;
&lt;p&gt;Hello Greg,&lt;/p&gt;
&lt;p&gt;I am after information on how to use the data files for the Texdata type.  I want to be able to use a Radiance picture file as a texture 'map'.  Ie. using the picture file's red value to change the x normal, the blue value to change the y normal and the z value to change the z height.  How might I go about this?  If you could supply an example, that would be great.&lt;/p&gt;
&lt;p&gt;Many thanks,
Simon Crone.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Radiance has pioneered many concepts that has slowly trickled into other
engines. Other than normal maps, we have the HDR format, sun &amp;amp; sky simulations,
exposure control, camera settings that mimicked camera behaviours, and
irradiance caching. The history of physically based rendering owes itself to
Radiance.&lt;/p&gt;
&lt;p&gt;However perhaps the most enabling concepts that Radiance has excelled at are its
numerical output and cross-platform portability. Radiance follows the Unix
philosophy, and isn't just one tool. Instead, Radiance is a collection of tools,
each specialising in its own task, that are chained together and pipe text
streams from one to another to achieve any desired output. These text streams
contain plain numerical output that can be interrogated by any suspicious
simulationist.  This modular flexibility and ecosystem of independent analysis
tools distinguishes Radiance from its commercial equivalents.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;I'll close with a short quote from Greg Ward, emphasis added by me.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In contrast, Radiance has been plodding along a lonely but very constrained path over its lifetime, where features are added only if they improve accuracy, or add capabilities without compromising accuracy. There's no money in it, but the reward is that we have at least one tool to which all the others can be compared when you really need to know, &lt;strong&gt;"Is this the right result, or does it just look right?"&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Greg Ward, creator of Radiance&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Happy rendering!&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>How to composite Enscape animations with Blender</title>
        <link href="https://thinkmoult.com/how-to-composite-enscape-animations-with-blender.html" />
        <id>https://thinkmoult.com/how-to-composite-enscape-animations-with-blender.html</id>
        <updated>2019-02-25</updated>
        <summary>Enscape provides real-time rendering with integration with BIM tools such as Revit, ArchiCAD, and Sketchup. However, it has a limited set of animation tools. Blender can be used to import Enscape camera animation keyframes and composite new animations on top of the Enscape flythrough.</summary>
        <content type="html">

&lt;p&gt;&lt;a href="https://enscape3d.com/"&gt;Enscape&lt;/a&gt; is a game-engine style rendering engine that has plugins available for Revit, SketchUp, Rhino, and ArchiCAD. It is a proprietary, simple program that allows you to view your models. Although it is very easy to use, it lacks the functionality and flexibility that other tools such as &lt;a href="https://www.blender.org/2-8/#eevee"&gt;Blender's Eevee&lt;/a&gt; (extremely powerful, free, and open-source), Unity (offers free versions), and Unreal Engine allow.&lt;/p&gt;
&lt;p&gt;One of the functions that Enscape has is the ability to set camera keyframes and export a short animation of your building model. This is standard keyframing and keyframe interpolation that is seen in all animation software, with the limitation that you can only keyframe the camera, the field of view, and the time of day. This means that should you want to create a more bespoke animation, it is simply not possible to do in Enscape and you should use other tools.&lt;/p&gt;
&lt;p&gt;However, it is possible to composite over the underlying Enscape-animated footage. Stock standard 2D compositing is possible just like with any other footage, and so is camera / motion tracking, if you are keen to spend time tracking markers and solving the camera motion. However, Enscape does have an option to export out an XML file saving the camera positions. It is possible for us to recreate the camera movements in any other software.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Enscape can export camera paths to an XML file" src="https://thinkmoult.com/assets/enscape-save-path-xml.png"&gt;&lt;/p&gt;
&lt;p&gt;This XML data looks a little like this for an animation that shows 5 keyframes. Take note how the frames are measured in seconds, not frames, and that the time of day is recorded in terms of "hour", and the field of view is recorded in radians.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; ?&amp;gt;
&amp;lt;VideoPath version=&amp;quot;1&amp;quot; easingInOut=&amp;quot;1&amp;quot; shakyCam=&amp;quot;0&amp;quot;&amp;gt;
    &amp;lt;Keyframes count=&amp;quot;18&amp;quot;&amp;gt;
        &amp;lt;Keyframe order=&amp;quot;0&amp;quot; hour=&amp;quot;6.19048&amp;quot;&amp;gt;
            &amp;lt;Position x=&amp;quot;-866.038&amp;quot; y=&amp;quot;23.1767&amp;quot; z=&amp;quot;-79.7907&amp;quot; /&amp;gt;
            &amp;lt;LookAt x=&amp;quot;0.133988&amp;quot; y=&amp;quot;0.0725552&amp;quot; z=&amp;quot;-0.988323&amp;quot; /&amp;gt;
        &amp;lt;/Keyframe&amp;gt;
        &amp;lt;Keyframe order=&amp;quot;1&amp;quot; timestampSeconds=&amp;quot;10.0362&amp;quot;&amp;gt;
            &amp;lt;Position x=&amp;quot;-874.087&amp;quot; y=&amp;quot;22.7914&amp;quot; z=&amp;quot;-98.4712&amp;quot; /&amp;gt;
            &amp;lt;LookAt x=&amp;quot;0.051014&amp;quot; y=&amp;quot;0.0422604&amp;quot; z=&amp;quot;-0.997803&amp;quot; /&amp;gt;
        &amp;lt;/Keyframe&amp;gt;
        &amp;lt;Keyframe order=&amp;quot;2&amp;quot; timestampSeconds=&amp;quot;12.4903&amp;quot;&amp;gt;
            &amp;lt;Position x=&amp;quot;-876.866&amp;quot; y=&amp;quot;23.2531&amp;quot; z=&amp;quot;-106.341&amp;quot; /&amp;gt;
            &amp;lt;LookAt x=&amp;quot;0.396895&amp;quot; y=&amp;quot;0.0325198&amp;quot; z=&amp;quot;-0.917288&amp;quot; /&amp;gt;
        &amp;lt;/Keyframe&amp;gt;
        &amp;lt;Keyframe order=&amp;quot;3&amp;quot; fieldOfViewRad=&amp;quot;1.91964&amp;quot; timestampSeconds=&amp;quot;50.9925&amp;quot;&amp;gt;
            &amp;lt;Position x=&amp;quot;-693.204&amp;quot; y=&amp;quot;59.4014&amp;quot; z=&amp;quot;-255.678&amp;quot; /&amp;gt;
            &amp;lt;LookAt x=&amp;quot;0.718453&amp;quot; y=&amp;quot;-0.688584&amp;quot; z=&amp;quot;0.0983752&amp;quot; /&amp;gt;
        &amp;lt;/Keyframe&amp;gt;
        &amp;lt;Keyframe order=&amp;quot;4&amp;quot; hour=&amp;quot;17.5333&amp;quot; timestampSeconds=&amp;quot;111.771&amp;quot;&amp;gt;
            &amp;lt;Position x=&amp;quot;-856.114&amp;quot; y=&amp;quot;91.0984&amp;quot; z=&amp;quot;-13.3383&amp;quot; /&amp;gt;
            &amp;lt;LookAt x=&amp;quot;0.51913&amp;quot; y=&amp;quot;-0.381081&amp;quot; z=&amp;quot;-0.765037&amp;quot; /&amp;gt;
        &amp;lt;/Keyframe&amp;gt;
    &amp;lt;/Keyframes&amp;gt;
&amp;lt;/VideoPath&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The data is almost enough to recreate a camera path. First, we also need the field of view which is sometimes not explicit in the XML, but you can find it out from your settings.
 It is given in degrees in the UI.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Enscape viewer showing the field of view" src="https://thinkmoult.com/assets/enscape-fov.png"&gt;&lt;/p&gt;
&lt;p&gt;Finally you will also need the camera resolution and the frames per second to convert seconds to frame. This can be found in the Enscape settings.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Enscape settings showing resolution and FPS" src="https://thinkmoult.com/assets/enscape-fps.png"&gt;&lt;/p&gt;
&lt;p&gt;Those settings can be set in your camera object and rendering settings in your favourite 3D software. The next step is to actually translate the camera position and directions to your 3D software. Here, I demonstrate how to do it in Blender with a script.&lt;/p&gt;
&lt;p&gt;There are actually three pieces of information required to explicitly define a camera location and rotation. First, you need the position coordinates, which we have, then we either need rotation degrees along each axis, which we don't have, or a camera direction and a camera up vector to help define an axis. Unfortunately, Enscape only gives us two: the camera position, and the camera direction vector. We don't know which way is up, so theoretically the camera could still rotate among an infinite number of possibilities and still be correct.&lt;/p&gt;
&lt;p&gt;The good news is that it seems to follow the same system that Blender uses for the camera "track to" solver. So apart from your camera object in Blender named &lt;code&gt;Camera&lt;/code&gt;, you will also need to create an empty, named &lt;code&gt;Target&lt;/code&gt; which we will use to set as the "target" for the camera to point to. This is the python script that you can run inside Blender to import the XML data into your camera and target object. Be sure to delete any existing keyframes for the object or it might get confused. Also check that the FPS is correct (the default is 30).&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import bpy, xml.etree.ElementTree
fps = 30
cam = bpy.data.objects['Camera']
target = bpy.data.objects['Target']
frame = 0
tree = xml.etree.ElementTree.parse('/path/to/Enscape_VideoPath.xml')
root = tree.getroot()
for keyframe in root[0]:
    try:
        frame = round(fps * float(keyframe.attrib['timestampSeconds']))
    except:
        frame = 0
    print(frame)
    cam.location = (float(keyframe[0].attrib['x']), -float(keyframe[0].attrib['z']), float(keyframe[0].attrib['y']))
    target.location = (
        float(keyframe[0].attrib['x']) + float(keyframe[1].attrib['x']),
        - float(keyframe[0].attrib['z']) - float(keyframe[1].attrib['z']),
        float(keyframe[0].attrib['y']) + float(keyframe[1].attrib['y'])
    )
    cam.keyframe_insert(data_path = 'location', frame = frame, index = -1)
    target.keyframe_insert(data_path = 'location', frame = frame, index = -1)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Run the script and that's it! Your camera will now follow the path of the enscape camera. The coordinates are such that the project base point is set to be the origin. If you want, you can now export your project as an IFC, and &lt;a href="https://thinkmoult.com/assets/../how-to-view-bim-ifc-files-linux.html"&gt;view your IFC using Blender&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can additionally check if the camera is correct by &lt;a href="https://docs.blender.org/manual/en/latest/editors/3dview/properties/background_images.html"&gt;setting a video underlay in your Blender camera&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You will then quickly notice that your camera is correct on the keyframes, but the interpolation may not match exactly. By default, Enscape does an "EaseInOut" easing, but doesn't reveal exactly what interpolation it uses. I have found that it is roughly equivalent to a bezier curve without any handles. That is, you can go to the graph editor for the camera object, set your scale origins to be individual origins, then scale all keyframes down to 0.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Bezier interpolation without handles in the Blender graph animation editor" src="https://thinkmoult.com/assets/blender-graph.png"&gt;&lt;/p&gt;
&lt;p&gt;Alternatively, you can use &lt;a href="https://blenderartists.org/t/blender-camera-animation-to-enscape-video-path-python-script/1526696"&gt;this script&lt;/a&gt; to do the opposite: to plan out a camera path in Blender then load it into Enscape.&lt;/p&gt;
&lt;p&gt;You can now render and composite roughly camera tracked scenes on top of the Enscape footage.&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>A proposed Radiance Filesystem Hierarchy Standard</title>
        <link href="https://thinkmoult.com/proposed-radiance-filesystem-hierarchy-standard.html" />
        <id>https://thinkmoult.com/proposed-radiance-filesystem-hierarchy-standard.html</id>
        <updated>2019-02-17</updated>
        <summary>The proposed Radiance Filesystem Hierarchy Standard (RFHS) is a proposed standard on how to organise files for 3D models, HDR textures, Radiance materials, IES lights, and so on in a Radiance project. This allows Radiance assets to be easily distributed and reused across different proejcts.</summary>
        <content type="html">

&lt;p&gt;Radiance projects do not usually have any form of enforced structure for organising your files. This is convenient, as Radiance is a whole suite of lighting analysis tools that can be tied together in any way. It is inappropriate to enforce one, as it would be akin to asking &lt;code&gt;imagemagick&lt;/code&gt; to require your raster files be in a certain folder structure. However, this creates an issue when a scene grows to be rather complex, as Radiance scenes have many files. It also means that it can be hard to distribute or reuse assets across projects and across organisations, as everybody has their own way or organising files.&lt;/p&gt;
&lt;p&gt;To allow the easy maintenance of a complex scene and the reuse of assets, I would like to propose a Radiance Filesystem Hierarchy Standard, or RHFS. It is not strict, but I have found it useful in my works, and will use it to distribute Radiance assets online. If you are planning on using it to build something, please let me know!&lt;/p&gt;
&lt;h2&gt;Structure of a single asset&lt;/h2&gt;
&lt;p&gt;The following rules describe how to create a single, reusable asset. This may be an object, such as a chair, table, or lamp.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A single asset must be fully contained in a folder named after the asset. This folder should be distributed as an atomic package and have no other dependencies.&lt;/li&gt;
&lt;li&gt;The asset name must be all lowercase, and spaces should be represented by hyphens. This improves SEO and can be used in programming contexts.&lt;/li&gt;
&lt;li&gt;The asset must only contain the raw source in open formats. All other data that can be generated should be excluded. This minimises repository filesize.&lt;/li&gt;
&lt;li&gt;If data needs to be generated, the asset must contain a &lt;code&gt;Makefile&lt;/code&gt; at its top level directory, providing a &lt;code&gt;make lib&lt;/code&gt; target at a minimum to build all necessary data.&lt;/li&gt;
&lt;li&gt;The asset must have a &lt;code&gt;README.md&lt;/code&gt; at its top level directory, describing the asset, and explaining how to use it in a project&lt;/li&gt;
&lt;li&gt;The asset must have a &lt;code&gt;LICENSE&lt;/code&gt; at its top level directory, so that the license doesn't get lost with asset transfer&lt;/li&gt;
&lt;li&gt;The asset may have zero or more of the following directories, to hold its data&lt;ul&gt;
&lt;li&gt;&lt;code&gt;obj/&lt;/code&gt; - stores all "objects", such as &lt;code&gt;.rad&lt;/code&gt;, &lt;code&gt;.rtm&lt;/code&gt;, &lt;code&gt;.obj&lt;/code&gt;, &lt;code&gt;.oct&lt;/code&gt;, and parametric source data such as &lt;code&gt;.blend&lt;/code&gt;, &lt;code&gt;.rfa&lt;/code&gt;, or &lt;code&gt;.3dm&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tex/&lt;/code&gt; - stores all "textures" (in the CG sense), such as &lt;code&gt;.hdr&lt;/code&gt;, and source data such as &lt;code&gt;.xcf&lt;/code&gt;, &lt;code&gt;.svg&lt;/code&gt;, or &lt;code&gt;.psd&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cal/&lt;/code&gt; - stores all calculation files&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ies/&lt;/code&gt; - stores all light files&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mat/&lt;/code&gt; - stores all material definitions, such as &lt;code&gt;.mat&lt;/code&gt; files&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pic/&lt;/code&gt; - stores all example pictures&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This is an example of the asset &lt;code&gt;cool-chair&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cool-chair/
cool-chair/obj/
cool-chair/obj/cool-chair.blend # the source file, if anybody wants to tweak
cool-chair/obj/cool-chair.obj # the baked geometry
cool-chair/obj/cool-chair.rad # radiance mesh primitive, in this case
cool-chair/tex/
cool-chair/tex/leather.hdr # an example texture
cool-chair/tex/leather.xcf # the GIMP file used to paint the leather texture
cool-chair/cal/
cool-chair/cal/led-colour-customiser.cal # this leather chair has funky LED effects!
cool-chair/ies/
cool-chair/ies/led-strip.ies # an example ies file
cool-chair/mat/
cool-chair/mat/cool-chair.mat # material file
cool-chair/Makefile
cool-chair/README.md
cool-chair/LICENSE
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Including an asset in your Radiance scene&lt;/h2&gt;
&lt;p&gt;The following rules describe how to use the asset in a scene that you are building. These are required as Radiance paths are relative to where the scene is compiled and rendered.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The project must have a &lt;code&gt;lib/&lt;/code&gt; directory at its top level directory, which will be the working directory where the scene will be compiled and rendered.&lt;/li&gt;
&lt;li&gt;Each asset directory must be located in the &lt;code&gt;lib/&lt;/code&gt; directory.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In addition, to make it easier for others to view your scene, it is recommended that the following rules be followed when creating a Radiance scene:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The project should have a &lt;code&gt;README.md&lt;/code&gt; at its top level directory, describing the scene&lt;/li&gt;
&lt;li&gt;The project should have a &lt;code&gt;LICENSE&lt;/code&gt; at its top level directory&lt;/li&gt;
&lt;li&gt;The project should be a &lt;code&gt;pic/&lt;/code&gt; directory which stores renders created with the scene&lt;/li&gt;
&lt;li&gt;The project should have a &lt;code&gt;Makefile&lt;/code&gt; at its top level directory, providing the following targets:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;make libs&lt;/code&gt; - build all asset libs&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make view&lt;/code&gt; - interactively view the scene&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make render&lt;/code&gt; - render the scene&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;When using an asset in your scene, the asset's &lt;code&gt;README.md&lt;/code&gt; file should explain how to include the asset in the scene. This could be anything, as Radiance can be quite complex. However, it is recommended that the asset provides a &lt;code&gt;.rad&lt;/code&gt; or an &lt;code&gt;.oct&lt;/code&gt; file. This is so that it can be simply included with &lt;code&gt;xform&lt;/code&gt; or instanced in with a single line in the project. For example, a project can use our &lt;code&gt;cool-chair&lt;/code&gt; asset by simply typing in one line:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;!xform lib/cool-chair/obj/cool-chair.rad
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is an example project which follows the rules above:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lib/
lib/cool-chair/*
pic/
pic/scene.hdr # some milestone render
scene.rad # the above xform command lives here
scene.rif
Makefile
README.md
LICENSE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here is an example &lt;code&gt;Makefile&lt;/code&gt; that provides the expected targets. The details may be different, but if these targets exist as a convention it may make projects a little bit easier to run.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;.PHONY : libs
libs :
    cd lib/cool-chair &amp;amp;&amp;amp; make lib

.PHONY : view
view :
    make libs
    rad -o x11 scene.rif

.PHONY : render
render :
    make libs
    rad scene.rif
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Other recommendations&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;It should be assumed that all assets can be further customised. Provide source geometry in formats that FOSS software can open, such as &lt;code&gt;.blend&lt;/code&gt;, &lt;code&gt;.xcf&lt;/code&gt;, or &lt;code&gt;.svg&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;If your asset has multiple variations, allow them to be built. For example, if &lt;code&gt;cool-chair&lt;/code&gt; comes in different materials, describe its usage in &lt;code&gt;README.md&lt;/code&gt; and provide convenience targets in &lt;code&gt;Makefile&lt;/code&gt; to build things differently based on different materials in its &lt;code&gt;mat/&lt;/code&gt; directory.&lt;/li&gt;
&lt;li&gt;Track the asset in a &lt;code&gt;git&lt;/code&gt; repository and use &lt;code&gt;git lfs&lt;/code&gt; for tracking large binary assets, such as &lt;code&gt;*.obj&lt;/code&gt;, &lt;code&gt;*.blend&lt;/code&gt; and &lt;code&gt;*.hdr&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
        </content>
    </entry>
    <entry>
        <title>Using IfcOpenShell to parse IFC files with Python</title>
        <link href="https://thinkmoult.com/using-ifcopenshell-parse-ifc-files-python.html" />
        <id>https://thinkmoult.com/using-ifcopenshell-parse-ifc-files-python.html</id>
        <updated>2019-02-12</updated>
        <summary>IFC is the ISO standard format for storing BIM data. IfcOpenShell allows you to use Python to query and parse IFC files to extract and analyse data. As there is no API documentation as of writing, these code examples give an introduction demo to how to read IFC files.</summary>
        <content type="html">

&lt;p&gt;IFC is the ISO standard format for storing BIM data. IfcOpenShell is a project that has a Python library that allows you to parse IFC files. To start off with, you will need to &lt;a href="http://www.ifcopenshell.org/python.html"&gt;download and install IfcOpenShell python&lt;/a&gt;. There is currently no API documentation for IfcOpenShell, but it isn't hard to work out given that it derives mostly from the IFC specification.&lt;/p&gt;
&lt;p&gt;While parsing IFC files, if you would like to view IFC files using open-source viewers that are available on Linux, Windows, and Macs, I would recommend reading &lt;a href="https://thinkmoult.com/assets/../how-to-view-bim-ifc-files-linux.html"&gt;how to view BIM IFC files on Linux&lt;/a&gt;. These viewers are open-source and are relatively strict, as opposed to commercial viewers like Revit which do a very poor job of parsing IFCs correctly, or viewers like Solibri which are very lenient with their parsing and promote badly structured IFCs.&lt;/p&gt;
&lt;p&gt;The examples below use 2X3, as right now is it assumed that most IFC files floating out there are 2X3, but the principles still apply to IFC4. As of writing, IfcOpenShell determines IFC2X3 or IFC4 parsing based on a compile-time flag, which by default is set to IFC2X3. If you wish to use IFC4, you will need to compile IfcOpenShell with &lt;code&gt;USE_IFC4=Y&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let's start with loading an IFC file:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import ifcopenshell
ifc_file = ifcopenshell.open('/path/to/your/file.ifc')
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Getting all types of an IFC class, and listing what they are:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;products = ifc_file.by_type('IfcProduct')
for product in products:
    print(product.is_a())
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Merely printing a keyword by itself spits out the IFC string that defines it:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;print(product) # Prints #38=IfcWall('3OFfnkBQ0HwPPAt4e_Z09T',#5,'Wall','',$,#35,#37,$)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;is_a()&lt;/code&gt; function also works as a boolean.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ifc_file.by_type('IfcWall')[0].is_a('IfcWall') # True
ifc_file.by_type('IfcWall')[0].is_a('IfcSlab') # False
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This convention of pythonic lowercase underscore naming ends with &lt;code&gt;by_type()&lt;/code&gt; and &lt;code&gt;is_a()&lt;/code&gt;. All the rest of the parameters are generated from the IFC schema, which uses CapsCase. The rest of the naming also doesn't follow common programming convention (e.g. predicate prefixes such as &lt;code&gt;is&lt;/code&gt; should only return boolean). You will commonly find confusingly named parameters that suggest booleans or otherwise, but may instead return a set or some other value. Oh well.&lt;/p&gt;
&lt;p&gt;Getting attributes of any IFC data is through simple dot notation. The parameter name matches exactly what is shown in the IFC schema, including the CapsCase convention.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wall = ifc_file.by_type('IfcWall')[0]
print(wall.GlobalId)
print(wall.Name)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The parameter also returns sets and relationships, such as in the following example where we want to list the property sets associated with a wall. According to the &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifcsharedbldgelements/lexical/ifcwall.htm"&gt;IfcWall specification&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The property sets relating to the IfcWall are defined by the IfcPropertySet and attached by the IfcRelDefinesByProperties relationship. It is accessible by the inverse IsDefinedBy relationship.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Therefore we can use the &lt;code&gt;IsDefinedBy&lt;/code&gt; relationship, which returns a &lt;code&gt;SET OF IfcRelDefines FOR RelatedObjects;&lt;/code&gt;. The &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifckernel/lexical/ifcreldefines.htm"&gt;&lt;code&gt;IfcRelDefines&lt;/code&gt; is an abstract supertype&lt;/a&gt;, and so in this particular situation (a property set relationship), we expect an &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifckernel/lexical/ifcreldefinesbyproperties.htm"&gt;&lt;code&gt;IfcRelDefinesByProperties&lt;/code&gt;&lt;/a&gt; which has a &lt;code&gt;RelatingPropertyDefinition&lt;/code&gt; to store the property set itself. This property set is an &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifckernel/lexical/ifcpropertysetdefinition.htm"&gt;&lt;code&gt;IfcPropertySetDefinition&lt;/code&gt;&lt;/a&gt;. Which, again, is an abstract supertype, but at least it nominates a &lt;code&gt;Name&lt;/code&gt; parameter at this level. This is the name of the property set.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wall = ifc_file.by_type('IfcWall')[0]
for definition in wall.IsDefinedBy:
    # To support IFC2X3, we need to filter our results.
    if definition.is_a('IfcRelDefinesByProperties'):
        property_set = definition.RelatingPropertyDefinition
        print(property_set.Name) # Might return Pset_WallCommon
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In this scenario, the abstract supertype &lt;code&gt;IfcPropertySetDefinition&lt;/code&gt; is only subtyped by &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifckernel/lexical/ifcpropertyset.htm"&gt;&lt;code&gt;IfcPropertySet&lt;/code&gt;&lt;/a&gt;, which has a confusingly named &lt;code&gt;HasProperties&lt;/code&gt; parameter which holds a set of &lt;code&gt;IfcProperty&lt;/code&gt;. The type of IfcProperty varies, which we can check using &lt;code&gt;is_a()&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;for property in property_set.HasProperties:
    if property.is_a('IfcPropertySingleValue'):
        print(property.Name)
        print(property.NominalValue.wrappedValue)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Other data, such as quantity use, also uses the &lt;code&gt;isDefinedBy&lt;/code&gt; relationship, but we can distinguish it using &lt;code&gt;is_a()&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wall = ifc_file.by_type('IfcWall')[0]
for definition in wall.IsDefinedBy:
    related_data = definition.RelatingPropertyDefinition
    if related_data.is_a('IfcPropertySet'):
        pass
    elif related_data.is_a('IfcElementQuantity'):
        print_element_quantities(related_data)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There are &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifcquantityresource/ifcquantityresource.htm"&gt;many types of IFC quantities&lt;/a&gt;, so we'll have to handle them carefully. But this example just handles &lt;code&gt;IfcQuantityLength&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;def print_element_quantities(element_quantity):
    for quantity in element_quantity.Quantities:
        print(quantity.Name)
        if quantity.is_a('IfcQuantityLength'):
            print(quantity.lengthValue)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can also get geometry data, starting with the placement of any IFC element. &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifcgeometricconstraintresource/lexical/ifcobjectplacement.htm"&gt;IFC object placements are complex&lt;/a&gt;, and so you should take care to see how coordinates derive from the various spatial containers in IFC.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if wall.ObjectPlacement.PlacementRelTo:
    # Inherit the coordinates of its parents
    pass
local_coordinates = wall.ObjectPlacement.RelativePlacement.Location[0]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally, you can also get the actual geometric representation of an IFC element. Just like placements, &lt;a href="http://standards.buildingsmart.org/IFC/RELEASE/IFC2x3/TC1/HTML/ifcrepresentationresource/lexical/ifcrepresentation.htm"&gt;IFC representations are complex&lt;/a&gt;. There are many types, and an IFC element may have multiple representations in different contexts. This is beyond the scope of the quick demonstration. In this example, we will not go into detail, but simply deal with a typical extruded object from an axis, which is a very common type of object as shown below.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A profile which is extruded along an axis" src="https://thinkmoult.com/assets/IfcExtrudedAreaSolid-Layout1.gif"&gt;&lt;/p&gt;
&lt;p&gt;We will also see how to access the underlying profile which is used in the extrusion, as shown below.&lt;/p&gt;
&lt;p&gt;&lt;img alt="In this scenario, we deal with an OuterCurve, which is a closed, filled curve" src="https://thinkmoult.com/assets/IfcArbitraryProfileDef-Layout1.gif"&gt;&lt;/p&gt;
&lt;p&gt;This code will access the relevant geometry data:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;geometry = wall.Representation.Representations[0].Items[0] # An IfcExtrudedAreaSolid in this example
print(geometry.Position.Location[0]) # The centroid of the wall, so if the wall axis goes from (0, 0, 0) to (4, 0, 0) it will be (2, 0, 0)
print(geometry.ExtrudeDirection) # A vector pointing up (0, 0, 1)
print(geometry.Depth) # The height of the wall, say 3000
print(geometry.SweptArea) # A closed and filled area curve that can be extruded into a manifold, solid object
print(geometry.SweptArea.OuterCurve.Points) # the list of points that are in the polyline
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The points (i.e. &lt;code&gt;geometry.SweptArea.OuterCurve.Points&lt;/code&gt;) give coordinates relative to &lt;code&gt;geometry.Position.Location[0]&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Points are given relative to the profile location" src="https://thinkmoult.com/assets/IfcProfileDef-Layout1.gif"&gt;&lt;/p&gt;
&lt;p&gt;Geometry is quite delicate, and I would discourage attempting to be bold and edit it by hand unless you want a headache. There are plenty of tools out there that can help you do this, or to visualise the geometry.&lt;/p&gt;
&lt;p&gt;For more examples, you can see an example of &lt;a href="https://github.com/IfcOpenShell/IfcOpenShell/blob/master/src/ifcopenshell-python/ifcopenshell/geom/app.py"&gt;IfcOpenShell in use to build a simple viewer here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;And so ends this short introduction. If you are interested in helping push IFC, I recommend downloading &lt;a href="https://www.freecadweb.org/"&gt;FreeCAD&lt;/a&gt; and help writing code to make it the best open-source BIM authoring tool out there!&lt;/p&gt;
        </content>
    </entry>
    <entry>
        <title>Free major and minor arpeggios for piano sheet music</title>
        <link href="https://thinkmoult.com/free-major-and-minor-arpeggios-for-piano-sheet-music.html" />
        <id>https://thinkmoult.com/free-major-and-minor-arpeggios-for-piano-sheet-music.html</id>
        <updated>2019-01-31</updated>
        <summary>Download free piano sheet music for major and minor arpeggios for all keys. Includes fingering annotation and typeset in LaTeX, exported in PDF format.</summary>
        <content type="html">

&lt;p&gt;I have produced a free PDF download of major and minor arpeggios for piano. These can be downloaded as a ZIP file and printed for any purpose.&lt;/p&gt;
&lt;p&gt;Arpeggios are usually the next set of scales that are taught together
with &lt;a href="https://thinkmoult.com/assets/../free-major-and-minor-scales-for-piano-sheet-music.html"&gt;major and minor scales&lt;/a&gt;. This pack includes 12 PDFs in total of arpeggios sorted
logically. These music sheets have the following features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Arpeggios include major and minor varieties, shown side by side to each other.&lt;/li&gt;
&lt;li&gt;Arpeggios ascend and descend three octaves.&lt;/li&gt;
&lt;li&gt;Arpeggios include all keys, beginning at C major, followed by G major, D major, etc until F sharp major, then switches over to D flat major, and descends in flats until F major.&lt;/li&gt;
&lt;li&gt;Arpeggios include the 1&lt;sup&gt;st&lt;/sup&gt; and 2&lt;sup&gt;nd&lt;/sup&gt; inversions of all keys.&lt;/li&gt;
&lt;li&gt;Arpeggios also include the 7&lt;sup&gt;th&lt;/sup&gt; chord variety&lt;/li&gt;
&lt;li&gt;These arpeggios are optimised for piano, with two staves, one for the left hand and one for the right. Fingering numbers are noted, but only where fingering changes occur, instead of above every single note, which is unnecessarily ugly.&lt;/li&gt;
&lt;li&gt;All PDFs available in A4 and letter paper sizes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A sample page is shown below:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Sample page of a free PDF download for major and minor arpeggios" src="https://thinkmoult.com/assets/major-minor-arpeggios.png"&gt;&lt;/p&gt;
&lt;p&gt;The sheet has no copyright or attribution text that might
get in the way of professionalism when presenting to
students. The sheet is created using
&lt;a href="http://www.lilypond.org/"&gt;LilyPond&lt;/a&gt;, which is quite
possibly the world's best music engraving software.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://thinkmoult.com/assets/major-minor-arpeggios.zip"&gt;Download major-minor-arpeggios.zip&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
        </content>
    </entry>
    </feed>